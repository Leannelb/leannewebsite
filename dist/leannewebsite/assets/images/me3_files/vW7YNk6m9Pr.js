if (self.CavalryLogger) { CavalryLogger.start_js(["GfYRg"]); }

__d("PagesMessengerConfirmCloseThreadDialog.react",["fbt","React","XUIDialog.react","XUIDialogBody.react","XUIDialogButton.react","XUIDialogFooter.react","XUIDialogTitle.react"],(function(a,b,c,d,e,f,g){__p&&__p();var h;c=b("React").PropTypes;var i=300;h=babelHelpers.inherits(a,b("React").Component);h&&h.prototype;a.prototype.render=function(){"use strict";return b("React").createElement(b("XUIDialog.react"),{layerHideOnBlur:!1,shown:this.props.shown,width:i},b("React").createElement(b("XUIDialogTitle.react"),{showCloseButton:!1},g._("Close Message Thread")),b("React").createElement(b("XUIDialogBody.react"),null,g._("You haven't sent your message yet. Do you want to leave without sending it?")),b("React").createElement(b("XUIDialogFooter.react"),null,b("React").createElement(b("XUIDialogButton.react"),{action:"cancel",label:g._("Continue Writing"),onClick:this.props.onCancel,use:"default"}),b("React").createElement(b("XUIDialogButton.react"),{action:"confirm",label:g._("Leave This Thread"),onClick:this.props.onConfirm,use:"confirm"})))};function a(){"use strict";h.apply(this,arguments)}a.propTypes={onCancel:c.func.isRequired,onConfirm:c.func.isRequired,shown:c.bool.isRequired};e.exports=a}),null);
__d("PagesMessengerSimpleMultilineComposer.react",["cx","fbt","MercuryMessageObject","MercuryPageMessageActions","MercurySourceType","PagesEventObserver","PagesEventType","PagesMessengerTextInput.react","React","ReactDOM","XUIButton.react","isEmpty"],(function(a,b,c,d,e,f,g,h){__p&&__p();var i;c=b("React").PropTypes;d=babelHelpers.inherits(a,b("React").Component);i=d&&d.prototype;function a(a){"use strict";i.constructor.call(this,a),this.state={value:""},this.$1=b("MercuryPageMessageActions").getForFBID(this.props.sourceID),this.$2=b("MercuryMessageObject").getForFBID(this.props.sourceID)}a.prototype.hasInput=function(){"use strict";return!!this.state.value};a.prototype.clearInput=function(){"use strict";this.setState({value:""})};a.prototype.focusInput=function(){"use strict";b("ReactDOM").findDOMNode(this.refs.textInput).focus()};a.prototype.getConfirmButtonLabel=function(){"use strict";return h._("Send")};a.prototype.getTextInputPlaceholder=function(){"use strict";return h._("Write a message")};a.prototype.onTextInputChanged=function(event){"use strict";this.setState({value:event.target.value})};a.prototype.processSend=function(event){"use strict";var a=this.refs.textInput.props.value;if(!a)return;a=this.$2.constructUserGeneratedMessageObject(a,b("MercurySourceType").TITAN_WEB,this.props.threadID,null,null);b("PagesEventObserver").logData_DEPRECATED({page_id:this.props.sourceID,event_name:b("PagesEventType").MESSAGES_DIALOG_SEND,thread_id:this.props.destinationID},null);event.preventDefault();this.props.allowSend()&&(this.$1.send(a),this.setState({value:""}),this.props.afterSend())};a.prototype.render=function(){"use strict";return b("React").createElement("div",{className:"_1yn"},b("React").createElement("div",null,b("React").createElement(b("PagesMessengerTextInput.react"),{className:"_1yq _32wh"+(b("isEmpty")(this.state.value)?" _1yx":""),placeholder:this.getTextInputPlaceholder(),onChange:this.onTextInputChanged.bind(this),onKeyUp:this.props.onKeyUp,value:this.state.value,ref:"textInput"})),b("React").createElement("hr",{className:"_1yy"}),b("React").createElement("div",{className:"_1yz"},b("React").createElement("div",{className:"_1y-"},b("React").createElement(b("XUIButton.react"),{use:"confirm",onClick:this.processSend.bind(this),label:this.getConfirmButtonLabel()}))))};a.propTypes={afterSend:c.func.isRequired,allowSend:c.func.isRequired,destinationID:c.string.isRequired,onKeyUp:c.func.isRequired,sourceID:c.string.isRequired,threadID:c.string.isRequired};e.exports=a}),null);
__d("XPagesMessagingFindPageController",["XController"],(function(a,b,c,d,e,f){e.exports=b("XController").create("/pages/messaging/search/page_name_typeahead/",{page_id:{type:"String",required:!0},value:{type:"String"}})}),null);
__d("PagesMessengerNewThreadDialog.react",["cx","fbt","Event","Keys","MercuryIDs","MessengerParticipants.bs","PagesEventObserver","PagesEventType","PagesMessengerConfirmCloseThreadDialog.react","PagesMessengerSimpleMultilineComposer.react","React","WebAsyncSearchSource","XPagesMessagingFindPageController","XUIDialog.react","XUIDialogBody.react","XUIDialogTitle.react","XUITokenizerRichToken.react","XUITypeahead.react"],(function(a,b,c,d,e,f,g,h){__p&&__p();var i;c=b("React").PropTypes;var j=445,k=326;d=babelHelpers.inherits(a,b("React").Component);i=d&&d.prototype;function a(a){"use strict";i.constructor.call(this,a);this.state={typeaheadErrorMessage:null,initDialog:!1,pageName:"...",query:"",selectedItem:null,showCloseConfirmationDialog:!1};this.$1=!1;this.$2=!1;a=b("XPagesMessagingFindPageController").getURIBuilder().setString("page_id",this.props.pageID).getURI();a={uri:a};this.$3=new(b("WebAsyncSearchSource"))({bootstrapRequests:[a],queryRequests:[a],getAllForEmptyQuery:!0})}a.prototype.$4=function(a){"use strict";b("PagesEventObserver").notify(b("PagesEventType").MESSAGES_CLOSE_PAGE_MESSAGE_DIALOG,this.props.pageID,{flowID:this.props.flowID,close_state:a})};a.prototype.$5=function(){"use strict";this.refs.newThreadComposer.hasInput()?(this.setState({showCloseConfirmationDialog:!0}),this.$4("has_message")):(this.$6(),this.props.onHide(),this.$4("no_message"))};a.prototype.$6=function(){"use strict";this.refs.newThreadComposer.clearInput(),this.setState({query:"",selectedItem:null,showCloseConfirmationDialog:!1})};a.prototype.$7=function(){"use strict";this.$6(),this.props.onHide(),this.$4("confirm_close")};a.prototype.$8=function(){"use strict";this.setState({showCloseConfirmationDialog:!1})};a.prototype.$9=function(a,event){"use strict";b("Event").getKeyCode(event)===b("Keys").ESC&&setTimeout(this.$5.bind(this),0)};a.prototype.$10=function(event){"use strict";b("Event").getKeyCode(event)===b("Keys").ESC&&setTimeout(this.$5.bind(this),0)};a.prototype.$11=function(a){"use strict";!a&&this.props.shown&&this.$5()};a.prototype.subscribeEvents=function(){"use strict";this.refs.newPageMessageDialog&&!this.$2&&(this.refs.newPageMessageDialog.layerSubscribe("key",this.$9.bind(this)),this.$2=!0)};a.prototype.loadPageName=function(){"use strict";this.$1||(this.$1=!0,b("MessengerParticipants.bs").get(b("MercuryIDs").getParticipantIDFromUserID(this.props.pageID),function(a){this.setState({pageName:a.name})}.bind(this)))};a.prototype.componentDidUpdate=function(a,b){"use strict";__p&&__p();if(!this.props.shown)return;this.subscribeEvents();this.loadPageName();if(!this.refs.pageTypeahead)return;b=this.refs.pageTypeahead.getTextFieldDOM();b.style.border="0px";b.style.fontSize="14px";b.style.lineHeight="14px";this.props.shown&&!a.shown&&this.refs.pageTypeahead.focusInput()};a.prototype.renderFrom=function(){"use strict";return b("React").createElement("div",{className:"_1vwk"},h._("From: {pageName}",[h._param("pageName",this.state.pageName)]))};a.prototype.renderSelectedResult=function(){"use strict";return!this.state.selectedItem?null:b("React").createElement("span",{className:"_31d6"},b("React").createElement(b("XUITokenizerRichToken.react"),{entry:this.state.selectedItem,highlighted:!1,label:this.state.selectedItem.getTitle(),onRemove:this.$12.bind(this)}))};a.prototype.renderTypeahead=function(){"use strict";return this.state.selectedItem?null:b("React").createElement(b("XUITypeahead.react"),{className:(this.state.selectedItem?"":"_1vwn")+(this.state.selectedItem?" _29ez":"")+" _2pir",clearable:!!this.state.selectedItem,highlightOnSelect:!0,onChange:this.$13.bind(this),onClear:this.$12.bind(this),onSelectAttempt:this.$14.bind(this),queryString:this.state.query,ref:"pageTypeahead",searchSource:this.$3,selectedEntry:this.state.selectedItem,showPhoto:!!this.state.selectedItem,tallInput:!1,viewStyle:"rich",xuiError:this.state.typeaheadErrorMessage})};a.prototype.renderTo=function(){"use strict";return b("React").createElement("div",{className:"_1vwl"},b("React").createElement("span",{className:"_1vwm"},h._("To:")),this.renderSelectedResult(),this.renderTypeahead(),b("React").createElement("span",{className:"_2f3y"},h._("Pages only")))};a.prototype.$14=function(a){"use strict";this.refs.newThreadComposer.focusInput(),this.setState({typeaheadErrorMessage:null,query:a.getTitle(),selectedItem:a}),b("PagesEventObserver").notify(b("PagesEventType").MESSAGES_PAGE_MESSAGE_DIALOG_CHOOSE_RECIPIENT,this.props.pageID,{flowID:this.props.flowID,recipient:a.getUniqueID()})};a.prototype.$13=function(event){"use strict";this.setState({typeaheadErrorMessage:null,query:event.target.value,selectedItem:null})};a.prototype.$12=function(){"use strict";this.setState({typeaheadErrorMessage:null,query:"",selectedItem:null}),setTimeout(function(){this.refs.pageTypeahead.focusInput()}.bind(this),0)};a.prototype.$15=function(){"use strict";setTimeout(this.$5.bind(this),0)};a.prototype.$16=function(){"use strict";if(!this.state.selectedItem||this.state.selectedItem.getUniqueID().length==0){var a=h._("Please choose a Page to receive your message");this.refs.pageTypeahead.focusInput();this.setState({typeaheadErrorMessage:a});return!1}b("PagesEventObserver").notify(b("PagesEventType").MESSAGES_PAGE_MESSAGE_DIALOG_SEND,this.props.pageID,{flowID:this.props.flowID,recipient:this.state.selectedItem.getUniqueID()});return!0};a.prototype.renderAttachmentShelf=function(){"use strict";return b("React").createElement("div",{ref:"newThreadAttachmentsShelf",className:"_jz4"})};a.prototype.renderComposer=function(){"use strict";var a=this.state.selectedItem?this.state.selectedItem.getUniqueID():"",c="user:"+a;return b("React").createElement(b("PagesMessengerSimpleMultilineComposer.react"),{afterSend:this.$15.bind(this),allowSend:this.$16.bind(this),destinationID:a,onKeyUp:this.$10.bind(this),ref:"newThreadComposer",sourceID:this.props.pageID,threadID:c})};a.prototype.UNSAFE_componentWillReceiveProps=function(a){"use strict";!this.state.initDialog&&a.shown&&this.setState({initDialog:!0})};a.prototype.renderCloseConfirmationDialog=function(){"use strict";return!this.state.showCloseConfirmationDialog?null:b("React").createElement(b("PagesMessengerConfirmCloseThreadDialog.react"),{shown:this.state.showCloseConfirmationDialog,onCancel:this.$8.bind(this),onConfirm:this.$7.bind(this)})};a.prototype.render=function(){"use strict";return!this.state.initDialog?null:b("React").createElement("div",null,b("React").createElement(b("XUIDialog.react"),{layerHideOnBlur:!1,ref:"newPageMessageDialog",shown:this.props.shown,onToggle:this.$11.bind(this),width:j,height:k},b("React").createElement(b("XUIDialogTitle.react"),{className:"_2ga7"},h._("New Message to Page")),b("React").createElement(b("XUIDialogBody.react"),{className:"_1vwv"},this.renderFrom(),this.renderTo(),this.renderAttachmentShelf(),this.renderComposer())),this.renderCloseConfirmationDialog())};a.propTypes={flowID:c.string,onHide:c.func.isRequired,shown:c.bool.isRequired,pageID:c.string.isRequired};e.exports=a}),null);
__d("PagesMessengerMessagePageButton.react",["ix","cx","fbt","Image.react","PagesEventObserver","PagesEventType","PagesMessengerNewThreadDialog.react","React","XUIButton.react","fbglyph"],(function(a,b,c,d,e,f,g,h,i){__p&&__p();var j;c=b("React").PropTypes;d=babelHelpers.inherits(a,b("React").Component);j=d&&d.prototype;a.getButtonSize=function(a){"use strict";return a.size||"medium"};function a(a){"use strict";j.constructor.call(this,a),this.state={showDialog:!1}}a.prototype.$1=function(){"use strict";this.setState({showDialog:!1})};a.prototype.$2=function(){"use strict";if(this.state.showDialog)return;this.setState({showDialog:!0});b("PagesEventObserver").notify(b("PagesEventType").MESSAGES_OPEN_PAGE_MESSAGE_DIALOG,this.props.pageID,{flowID:this.props.flowID})};a.prototype.render=function(){"use strict";var a=i._("Message Page");return b("React").createElement("span",{className:this.props.pagesCommNewMessagesTab?"":"_3-9a"},b("React").createElement(b("XUIButton.react"),{className:this.props.pagesCommNewMessagesTab?"_3kr2":"",image:b("React").createElement(b("Image.react"),{src:g("142642")}),label:a,onClick:this.$2.bind(this),size:this.props.size}),b("React").createElement(b("PagesMessengerNewThreadDialog.react"),{flowID:this.props.flowID,shown:this.state.showDialog,onHide:this.$1.bind(this),pageID:this.props.pageID}))};a.propTypes={flowID:c.string,pageID:c.string.isRequired,pagesCommNewMessagesTab:c.bool};e.exports=a}),null);
__d("PagesContextCardCustomTag.react",["cx","Image.react","React","XUICard.react"],(function(a,b,c,d,e,f,g){"use strict";__p&&__p();var h;c=babelHelpers.inherits(a,b("React").Component);h=c&&c.prototype;function a(a){h.constructor.call(this,a),this.$1=function(){this.props.onClick&&this.props.onClick(this.props.tagData)}.bind(this),this.$2=function(event){event.stopPropagation(),this.props.hideOnRemove&&this.setState({removed:!0}),this.props.onRemove&&this.props.onRemove(this.props.tagData.name)}.bind(this),this.state={removed:!1}}a.prototype.genDefaultProps=function(){return{textOnly:!1}};a.prototype.render=function(){if(this.props.hideOnRemove&&this.state.removed)return null;var a=this.props.tagData,c="/images/pages/context_card/cross/cross_"+a.borderColor+".png",d={color:"#"+a.color.substring(2),backgroundColor:"none"};this.props.textOnly||(d.backgroundColor="#"+a.darkerFill.substring(2));return b("React").createElement(b("XUICard.react"),{className:"_1pbr"+(this.props.onClick?" _2rj2":"")+(this.props.textOnly?" _49ww":""),style:d,key:a.id,onClick:this.$1},a.name,this.props.canRemove?b("React").createElement(b("Image.react"),{className:"_2rj2 _5t1r",src:c,onClick:this.$2,height:8,width:8}):null)};e.exports=a}),null);
__d("PagesEnumTag.react",["PagesContextCardCustomTag.react","PagesManagerMessagingNavigationUnitKey","React"],(function(a,b,c,d,e,f){__p&&__p();var g;c=babelHelpers.inherits(a,b("React").Component);g=c&&c.prototype;function a(){var a,b;for(var c=arguments.length,d=new Array(c),e=0;e<c;e++)d[e]=arguments[e];return b=(a=g.constructor).call.apply(a,[this].concat(d)),this.$1=function(){this.props.onClick&&this.props.onClick(this.props.unit)}.bind(this),this.$2=function(){this.props.onRemove&&this.props.onRemove()}.bind(this),b}a.prototype.getTagData=function(){"use strict";var a={};(this.props.unit.getKey()===b("PagesManagerMessagingNavigationUnitKey").FILTERS.FLAGGED||this.props.unit.getKey()===b("PagesManagerMessagingNavigationUnitKey").FILTERS.PRIORITY)&&(a.borderColor="FFFB9240",a.color="FFFB9240",a.fillColor="FFFFF4EC",a.darkerFill="FFFCDEC5",a.id=0);a.name=this.props.unit.getDisplayTitle();return a};a.prototype.render=function(){"use strict";var a=this.getTagData();return b("React").createElement(b("PagesContextCardCustomTag.react"),babelHelpers["extends"]({},this.props,{key:a.id,onClick:this.$1,onRemove:this.$2,tagData:a}))};e.exports=a}),null);
__d("PagesManagerMessagingAppointmentBannerContainerFragment_appointments.graphql",[],(function(a,b,c,d,e,f){"use strict";a={kind:"Fragment",name:"PagesManagerMessagingAppointmentBannerContainerFragment_appointments",type:"NativeBookingRequestsConnection",metadata:null,argumentDefinitions:[],selections:[{kind:"LinkedField",alias:null,name:"edges",storageKey:null,args:null,concreteType:"NativeBookingRequestsEdge",plural:!0,selections:[{kind:"LinkedField",alias:null,name:"node",storageKey:null,args:null,concreteType:"NativeComponentFlowBookingRequest",plural:!1,selections:[{kind:"ScalarField",alias:null,name:"booking_status",args:null,storageKey:null},{kind:"ScalarField",alias:null,name:"id",args:null,storageKey:null},{kind:"LinkedField",alias:null,name:"suggested_time_range",storageKey:null,args:null,concreteType:"TimeRange",plural:!1,selections:[{kind:"ScalarField",alias:null,name:"end",args:null,storageKey:null},{kind:"ScalarField",alias:null,name:"start",args:null,storageKey:null}]},{kind:"ScalarField",alias:null,name:"status",args:null,storageKey:null}]}]}]};e.exports=a}),null);
__d("PagesManagerMessagingAppointmentBannerContainerRefetchQuery.graphql",[],(function(a,b,c,d,e,f){"use strict";a=function(){var a=[{kind:"LocalArgument",name:"count",type:"Int",defaultValue:null},{kind:"LocalArgument",name:"pageID",type:"ID",defaultValue:null},{kind:"LocalArgument",name:"userID",type:"ID!",defaultValue:null}],b=[{kind:"Variable",name:"id",variableName:"userID",type:"ID!"}],c={kind:"ScalarField",alias:null,name:"id",args:null,storageKey:null},d={kind:"Literal",name:"booking_time",value:"FUTURE_ONLY",type:"PagesPlatformNativeBookingTimeFilter"},e={kind:"Variable",name:"first",variableName:"count",type:"Int"},f={kind:"Variable",name:"requests_on_page",variableName:"pageID",type:"ID"},g={kind:"ScalarField",alias:null,name:"name",args:null,storageKey:null},h={kind:"LinkedField",alias:null,name:"profile_picture",storageKey:null,args:null,concreteType:"Image",plural:!1,selections:[{kind:"ScalarField",alias:null,name:"uri",args:null,storageKey:null}]};g=[{kind:"LinkedField",alias:null,name:"edges",storageKey:null,args:null,concreteType:"NativeBookingRequestsEdge",plural:!0,selections:[{kind:"LinkedField",alias:null,name:"node",storageKey:null,args:null,concreteType:"NativeComponentFlowBookingRequest",plural:!1,selections:[{kind:"LinkedField",alias:null,name:"product_item",storageKey:null,args:null,concreteType:"ProductItem",plural:!1,selections:[g,c,{kind:"ScalarField",alias:null,name:"experimental_freeform_price",args:null,storageKey:null},h]},{kind:"ScalarField",alias:null,name:"booking_status",args:null,storageKey:null},{kind:"LinkedField",alias:null,name:"suggested_time_range",storageKey:null,args:null,concreteType:"TimeRange",plural:!1,selections:[{kind:"ScalarField",alias:null,name:"end",args:null,storageKey:null},{kind:"ScalarField",alias:null,name:"start",args:null,storageKey:null}]},{kind:"ScalarField",alias:null,name:"status",args:null,storageKey:null},{kind:"ScalarField",alias:null,name:"has_saved_to_calendar",args:null,storageKey:null},{kind:"LinkedField",alias:null,name:"page",storageKey:null,args:null,concreteType:"Page",plural:!1,selections:[c,{kind:"LinkedField",alias:null,name:"address",storageKey:null,args:null,concreteType:"StreetAddress",plural:!1,selections:[{kind:"ScalarField",alias:null,name:"single_line_full_address",args:null,storageKey:null}]},g,{kind:"LinkedField",alias:null,name:"phone_number",storageKey:null,args:null,concreteType:"PhoneNumber",plural:!1,selections:[{kind:"ScalarField",alias:null,name:"display_number",args:null,storageKey:null}]},{kind:"LinkedField",alias:null,name:"profile_photo",storageKey:null,args:null,concreteType:"Photo",plural:!1,selections:[{kind:"ScalarField",alias:null,name:"url",args:null,storageKey:null},c]},{kind:"LinkedField",alias:null,name:"services_card",storageKey:null,args:null,concreteType:"PageServicesCard",plural:!1,selections:[{kind:"ScalarField",alias:null,name:"card_visibility",args:null,storageKey:null},{kind:"LinkedField",alias:null,name:"product_catalog",storageKey:null,args:null,concreteType:"ProductCatalog",plural:!1,selections:[{kind:"LinkedField",alias:null,name:"catalog_items",storageKey:null,args:null,concreteType:"ProductCatalogToProductItemsConnection",plural:!1,selections:[{kind:"LinkedField",alias:null,name:"edges",storageKey:null,args:null,concreteType:"ProductCatalogToProductItemsEdge",plural:!0,selections:[{kind:"LinkedField",alias:null,name:"node",storageKey:null,args:null,concreteType:"ProductItem",plural:!1,selections:[c,g]}]}]},c]},c]}]},{kind:"LinkedField",alias:null,name:"request_note",storageKey:"request_note(first:10)",args:[{kind:"Literal",name:"first",value:10,type:"Int"}],concreteType:"PagesPlatformNoteFromComponentFlowRequestConnection",plural:!1,selections:[{kind:"LinkedField",alias:null,name:"edges",storageKey:null,args:null,concreteType:"PagesPlatformNoteFromComponentFlowRequestEdge",plural:!0,selections:[{kind:"LinkedField",alias:null,name:"node",storageKey:null,args:null,concreteType:"PagesPlatformNote",plural:!1,selections:[{kind:"LinkedField",alias:null,name:"body",storageKey:null,args:null,concreteType:"TextWithEntities",plural:!1,selections:[{kind:"ScalarField",alias:null,name:"text",args:null,storageKey:null}]},c]}]}]},{kind:"ScalarField",alias:null,name:"calendar_sync_type",args:null,storageKey:null},c,{kind:"ScalarField",alias:null,name:"requested_time",args:null,storageKey:null},{kind:"ScalarField",alias:null,name:"service_general_info",args:null,storageKey:null},{kind:"ScalarField",alias:null,name:"request_flow_type",args:null,storageKey:null},{kind:"ScalarField",alias:null,name:"special_request",args:null,storageKey:null},{kind:"LinkedField",alias:null,name:"user",storageKey:null,args:null,concreteType:"User",plural:!1,selections:[g,h,c]},{kind:"ScalarField",alias:null,name:"user_availability",args:null,storageKey:null},{kind:"LinkedField",alias:null,name:"additional_info",storageKey:null,args:null,concreteType:"ServicesNativeBookingRequestAdditionalInfoField",plural:!0,selections:[{kind:"ScalarField",alias:null,name:"field_key",args:null,storageKey:null},{kind:"ScalarField",alias:null,name:"value",args:null,storageKey:null},{kind:"ScalarField",alias:null,name:"label",args:null,storageKey:null}]}]}]}];return{kind:"Request",operationKind:"query",name:"PagesManagerMessagingAppointmentBannerContainerRefetchQuery",id:"2140366109326115",text:null,metadata:{},fragment:{kind:"Fragment",name:"PagesManagerMessagingAppointmentBannerContainerRefetchQuery",type:"Query",metadata:null,argumentDefinitions:a,selections:[{kind:"LinkedField",alias:"appointments",name:"node",storageKey:null,args:b,concreteType:null,plural:!1,selections:[{kind:"FragmentSpread",name:"PagesManagerMessagingAppointmentBannerContainer_appointments",args:[{kind:"Variable",name:"count",variableName:"count",type:null},{kind:"Variable",name:"pageID",variableName:"pageID",type:null}]}]}]},operation:{kind:"Operation",name:"PagesManagerMessagingAppointmentBannerContainerRefetchQuery",argumentDefinitions:a,selections:[{kind:"LinkedField",alias:"appointments",name:"node",storageKey:null,args:b,concreteType:null,plural:!1,selections:[{kind:"ScalarField",alias:null,name:"__typename",args:null,storageKey:null},c,{kind:"InlineFragment",type:"User",selections:[{kind:"ScalarField",alias:"user_name",name:"name",args:null,storageKey:null},{kind:"LinkedField",alias:"confirmed",name:"native_booking_request",storageKey:null,args:[{kind:"Literal",name:"booking_status",value:["PENDING","CONFIRMED"],type:"[PagesPlatformNativeBookingStatus]"},d,e,f],concreteType:"NativeBookingRequestsConnection",plural:!1,selections:g},{kind:"LinkedField",alias:"requested",name:"native_booking_request",storageKey:null,args:[{kind:"Literal",name:"booking_status",value:["REQUESTED"],type:"[PagesPlatformNativeBookingStatus]"},d,e,f],concreteType:"NativeBookingRequestsConnection",plural:!1,selections:g}]}]}]}}}();e.exports=a}),null);
__d("PagesManagerMessagingAppointmentBannerContainer_appointments.graphql",[],(function(a,b,c,d,e,f){"use strict";a=function(){var a={kind:"Literal",name:"booking_time",value:"FUTURE_ONLY",type:"PagesPlatformNativeBookingTimeFilter"},b={kind:"Variable",name:"first",variableName:"count",type:"Int"},c={kind:"Variable",name:"requests_on_page",variableName:"pageID",type:"ID"},d=[{kind:"LinkedField",alias:null,name:"edges",storageKey:null,args:null,concreteType:"NativeBookingRequestsEdge",plural:!0,selections:[{kind:"LinkedField",alias:null,name:"node",storageKey:null,args:null,concreteType:"NativeComponentFlowBookingRequest",plural:!1,selections:[{kind:"ScalarField",alias:null,name:"booking_status",args:null,storageKey:null},{kind:"ScalarField",alias:null,name:"id",args:null,storageKey:null},{kind:"LinkedField",alias:null,name:"suggested_time_range",storageKey:null,args:null,concreteType:"TimeRange",plural:!1,selections:[{kind:"ScalarField",alias:null,name:"end",args:null,storageKey:null},{kind:"ScalarField",alias:null,name:"start",args:null,storageKey:null}]},{kind:"ScalarField",alias:null,name:"status",args:null,storageKey:null}]}]},{kind:"FragmentSpread",name:"PagesManagerMessagingAppointmentDialog_appointments",args:null}];return{kind:"Fragment",name:"PagesManagerMessagingAppointmentBannerContainer_appointments",type:"User",metadata:null,argumentDefinitions:[{kind:"LocalArgument",name:"count",type:"Int",defaultValue:null},{kind:"LocalArgument",name:"pageID",type:"ID",defaultValue:null}],selections:[{kind:"ScalarField",alias:"user_name",name:"name",args:null,storageKey:null},{kind:"LinkedField",alias:"confirmed",name:"native_booking_request",storageKey:null,args:[{kind:"Literal",name:"booking_status",value:["PENDING","CONFIRMED"],type:"[PagesPlatformNativeBookingStatus]"},a,b,c],concreteType:"NativeBookingRequestsConnection",plural:!1,selections:d},{kind:"LinkedField",alias:"requested",name:"native_booking_request",storageKey:null,args:[{kind:"Literal",name:"booking_status",value:["REQUESTED"],type:"[PagesPlatformNativeBookingStatus]"},a,b,c],concreteType:"NativeBookingRequestsConnection",plural:!1,selections:d}]}}();e.exports=a}),null);
__d("PagesManagerMessagingAppointmentBannerRootQuery.graphql",[],(function(a,b,c,d,e,f){"use strict";a=function(){var a=[{kind:"LocalArgument",name:"userID",type:"ID!",defaultValue:null},{kind:"LocalArgument",name:"pageID",type:"ID",defaultValue:null},{kind:"LocalArgument",name:"count",type:"Int",defaultValue:null}],b=[{kind:"Variable",name:"id",variableName:"userID",type:"ID!"}],c={kind:"ScalarField",alias:null,name:"id",args:null,storageKey:null},d={kind:"Literal",name:"booking_time",value:"FUTURE_ONLY",type:"PagesPlatformNativeBookingTimeFilter"},e={kind:"Variable",name:"first",variableName:"count",type:"Int"},f={kind:"Variable",name:"requests_on_page",variableName:"pageID",type:"ID"},g={kind:"ScalarField",alias:null,name:"name",args:null,storageKey:null},h={kind:"LinkedField",alias:null,name:"profile_picture",storageKey:null,args:null,concreteType:"Image",plural:!1,selections:[{kind:"ScalarField",alias:null,name:"uri",args:null,storageKey:null}]};g=[{kind:"LinkedField",alias:null,name:"edges",storageKey:null,args:null,concreteType:"NativeBookingRequestsEdge",plural:!0,selections:[{kind:"LinkedField",alias:null,name:"node",storageKey:null,args:null,concreteType:"NativeComponentFlowBookingRequest",plural:!1,selections:[{kind:"LinkedField",alias:null,name:"product_item",storageKey:null,args:null,concreteType:"ProductItem",plural:!1,selections:[g,c,{kind:"ScalarField",alias:null,name:"experimental_freeform_price",args:null,storageKey:null},h]},{kind:"ScalarField",alias:null,name:"booking_status",args:null,storageKey:null},{kind:"LinkedField",alias:null,name:"suggested_time_range",storageKey:null,args:null,concreteType:"TimeRange",plural:!1,selections:[{kind:"ScalarField",alias:null,name:"end",args:null,storageKey:null},{kind:"ScalarField",alias:null,name:"start",args:null,storageKey:null}]},{kind:"ScalarField",alias:null,name:"status",args:null,storageKey:null},{kind:"ScalarField",alias:null,name:"has_saved_to_calendar",args:null,storageKey:null},{kind:"LinkedField",alias:null,name:"page",storageKey:null,args:null,concreteType:"Page",plural:!1,selections:[c,{kind:"LinkedField",alias:null,name:"address",storageKey:null,args:null,concreteType:"StreetAddress",plural:!1,selections:[{kind:"ScalarField",alias:null,name:"single_line_full_address",args:null,storageKey:null}]},g,{kind:"LinkedField",alias:null,name:"phone_number",storageKey:null,args:null,concreteType:"PhoneNumber",plural:!1,selections:[{kind:"ScalarField",alias:null,name:"display_number",args:null,storageKey:null}]},{kind:"LinkedField",alias:null,name:"profile_photo",storageKey:null,args:null,concreteType:"Photo",plural:!1,selections:[{kind:"ScalarField",alias:null,name:"url",args:null,storageKey:null},c]},{kind:"LinkedField",alias:null,name:"services_card",storageKey:null,args:null,concreteType:"PageServicesCard",plural:!1,selections:[{kind:"ScalarField",alias:null,name:"card_visibility",args:null,storageKey:null},{kind:"LinkedField",alias:null,name:"product_catalog",storageKey:null,args:null,concreteType:"ProductCatalog",plural:!1,selections:[{kind:"LinkedField",alias:null,name:"catalog_items",storageKey:null,args:null,concreteType:"ProductCatalogToProductItemsConnection",plural:!1,selections:[{kind:"LinkedField",alias:null,name:"edges",storageKey:null,args:null,concreteType:"ProductCatalogToProductItemsEdge",plural:!0,selections:[{kind:"LinkedField",alias:null,name:"node",storageKey:null,args:null,concreteType:"ProductItem",plural:!1,selections:[c,g]}]}]},c]},c]}]},{kind:"LinkedField",alias:null,name:"request_note",storageKey:"request_note(first:10)",args:[{kind:"Literal",name:"first",value:10,type:"Int"}],concreteType:"PagesPlatformNoteFromComponentFlowRequestConnection",plural:!1,selections:[{kind:"LinkedField",alias:null,name:"edges",storageKey:null,args:null,concreteType:"PagesPlatformNoteFromComponentFlowRequestEdge",plural:!0,selections:[{kind:"LinkedField",alias:null,name:"node",storageKey:null,args:null,concreteType:"PagesPlatformNote",plural:!1,selections:[{kind:"LinkedField",alias:null,name:"body",storageKey:null,args:null,concreteType:"TextWithEntities",plural:!1,selections:[{kind:"ScalarField",alias:null,name:"text",args:null,storageKey:null}]},c]}]}]},{kind:"ScalarField",alias:null,name:"calendar_sync_type",args:null,storageKey:null},c,{kind:"ScalarField",alias:null,name:"requested_time",args:null,storageKey:null},{kind:"ScalarField",alias:null,name:"service_general_info",args:null,storageKey:null},{kind:"ScalarField",alias:null,name:"request_flow_type",args:null,storageKey:null},{kind:"ScalarField",alias:null,name:"special_request",args:null,storageKey:null},{kind:"LinkedField",alias:null,name:"user",storageKey:null,args:null,concreteType:"User",plural:!1,selections:[g,h,c]},{kind:"ScalarField",alias:null,name:"user_availability",args:null,storageKey:null},{kind:"LinkedField",alias:null,name:"additional_info",storageKey:null,args:null,concreteType:"ServicesNativeBookingRequestAdditionalInfoField",plural:!0,selections:[{kind:"ScalarField",alias:null,name:"field_key",args:null,storageKey:null},{kind:"ScalarField",alias:null,name:"value",args:null,storageKey:null},{kind:"ScalarField",alias:null,name:"label",args:null,storageKey:null}]}]}]}];return{kind:"Request",operationKind:"query",name:"PagesManagerMessagingAppointmentBannerRootQuery",id:"1758194350934510",text:null,metadata:{},fragment:{kind:"Fragment",name:"PagesManagerMessagingAppointmentBannerRootQuery",type:"Query",metadata:null,argumentDefinitions:a,selections:[{kind:"LinkedField",alias:"user",name:"node",storageKey:null,args:b,concreteType:null,plural:!1,selections:[{kind:"FragmentSpread",name:"PagesManagerMessagingAppointmentBannerContainer_appointments",args:[{kind:"Variable",name:"count",variableName:"count",type:null},{kind:"Variable",name:"pageID",variableName:"pageID",type:null}]}]}]},operation:{kind:"Operation",name:"PagesManagerMessagingAppointmentBannerRootQuery",argumentDefinitions:a,selections:[{kind:"LinkedField",alias:"user",name:"node",storageKey:null,args:b,concreteType:null,plural:!1,selections:[{kind:"ScalarField",alias:null,name:"__typename",args:null,storageKey:null},c,{kind:"InlineFragment",type:"User",selections:[{kind:"ScalarField",alias:"user_name",name:"name",args:null,storageKey:null},{kind:"LinkedField",alias:"confirmed",name:"native_booking_request",storageKey:null,args:[{kind:"Literal",name:"booking_status",value:["PENDING","CONFIRMED"],type:"[PagesPlatformNativeBookingStatus]"},d,e,f],concreteType:"NativeBookingRequestsConnection",plural:!1,selections:g},{kind:"LinkedField",alias:"requested",name:"native_booking_request",storageKey:null,args:[{kind:"Literal",name:"booking_status",value:["REQUESTED"],type:"[PagesPlatformNativeBookingStatus]"},d,e,f],concreteType:"NativeBookingRequestsConnection",plural:!1,selections:g}]}]}]}}}();e.exports=a}),null);
__d("PageCommItemMessengerConsistencyTypedLogger",["Banzai","GeneratedLoggerUtils","nullthrows"],(function(a,b,c,d,e,f){"use strict";__p&&__p();function a(){this.clear()}a.prototype.log=function(){b("GeneratedLoggerUtils").log("logger:PageCommItemMessengerConsistencyLoggerConfig",this.$1,b("Banzai").BASIC)};a.prototype.logVital=function(){b("GeneratedLoggerUtils").log("logger:PageCommItemMessengerConsistencyLoggerConfig",this.$1,b("Banzai").VITAL)};a.prototype.logImmediately=function(){b("GeneratedLoggerUtils").log("logger:PageCommItemMessengerConsistencyLoggerConfig",this.$1,{signal:!0})};a.prototype.clear=function(){this.$1={};return this};a.prototype.getData=function(){return babelHelpers["extends"]({},this.$1)};a.prototype.updateData=function(a){this.$1=babelHelpers["extends"]({},this.$1,a);return this};a.prototype.setCommItemSourceID=function(a){this.$1.comm_item_source_id=a;return this};a.prototype.setIsUnifiedInbox=function(a){this.$1.is_unified_inbox=a;return this};a.prototype.setMessagingFolderTag=function(a){this.$1.messaging_folder_tag=a;return this};a.prototype.setMessengerArchived=function(a){this.$1.messenger_archived=a;return this};a.prototype.setPageCommItemStatus=function(a){this.$1.page_comm_item_status=a;return this};a.prototype.setVC=function(a){this.$1.vc=a;return this};c={comm_item_source_id:!0,is_unified_inbox:!0,messaging_folder_tag:!0,messenger_archived:!0,page_comm_item_status:!0,vc:!0};e.exports=a}),null);
__d("PagesManagerPerfTypedLogger",["Banzai","GeneratedLoggerUtils","nullthrows"],(function(a,b,c,d,e,f){"use strict";__p&&__p();function a(){this.clear()}a.prototype.log=function(){b("GeneratedLoggerUtils").log("logger:PagesManagerPerfLoggerConfig",this.$1,b("Banzai").BASIC)};a.prototype.logVital=function(){b("GeneratedLoggerUtils").log("logger:PagesManagerPerfLoggerConfig",this.$1,b("Banzai").VITAL)};a.prototype.logImmediately=function(){b("GeneratedLoggerUtils").log("logger:PagesManagerPerfLoggerConfig",this.$1,{signal:!0})};a.prototype.clear=function(){this.$1={};return this};a.prototype.getData=function(){return babelHelpers["extends"]({},this.$1)};a.prototype.updateData=function(a){this.$1=babelHelpers["extends"]({},this.$1,a);return this};a.prototype.setEventName=function(a){this.$1.event_name=a;return this};a.prototype.setEventSeriesID=function(a){this.$1.event_series_id=a;return this};a.prototype.setPageID=function(a){this.$1.page_id=a;return this};a.prototype.setPerfTime=function(a){this.$1.perf_time=a;return this};a.prototype.setVC=function(a){this.$1.vc=a;return this};c={event_name:!0,event_series_id:!0,page_id:!0,perf_time:!0,vc:!0};e.exports=a}),null);
__d("MercurySeenIndicator.react",["cx","MercuryIDs","MessengerReadReceipt.bs","React"],(function(a,b,c,d,e,f,g){"use strict";__p&&__p();var h;c=b("React").PropTypes;h=babelHelpers.inherits(a,b("React").Component);h&&h.prototype;a.prototype.render=function(){var a=b("MercuryIDs").getParticipantIDFromUserID(this.props.viewer);a=this.$1(a);return b("React").createElement("span",{className:"_3jy5"+(a?" repliedLast":"")+(a&&this.$2()?" seenByAll":"")})};a.prototype.$1=function(a){return a===this.props.thread.snippet_sender};a.prototype.$2=function(){return b("MessengerReadReceipt.bs").wasSeenByAll(this.props.readReceipts,{thread_id:this.props.thread.thread_id,author:this.props.thread.snippet_sender,timestamp:this.props.thread.timestamp})};function a(){h.apply(this,arguments)}a.propTypes={thread:c.object.isRequired,viewer:c.string.isRequired};e.exports=a}),null);
__d("MercuryMessageRenderer",["DOM","DOMEmoji","DOMEmote","DOMHyperlink","JSXDOM","URI","shouldAddMRefParam","transformTextToDOM"],(function(a,b,c,d,e,f){__p&&__p();a={formatMessageBody:function(a,c,d){__p&&__p();var e=(a||"").replace(/\s+$/,"");if(!c)return i(e,!1,d);a=Object.keys(c).map(function(a){return window.parseInt(a)}).sort(function(a,b){return a-b});var f=[],g=0;a.forEach(function(a){var b=e.slice(g,a);b&&f.push(i(b,!1,d));g=a+c[a].length;b=e.slice(a,g);b&&f.push(i(b,!0,d))});g<e.length&&f.push(i(e.slice(g),!1,d));return f.length===0?null:f.length===1?f[0]:b("DOM").create("span",{},f)}};function g(a,c){c=c(a);Array.isArray(c)&&c.forEach(function(a){if(a.href){var c=new(b("URI"))(a.href);b("shouldAddMRefParam")(c)&&(a.href=c.addQueryData({__mref:"message"}).toString())}});return c}function h(a,c){a=a.replace(/\r\n?/g,"\n").split(/\n{2,}/);return a.filter(function(a){return a.length}).map(function(a){return b("JSXDOM").p(null,g(a,c))})}function i(a,c,d){if(a.length===0&&!c)return null;var e=function(a){return b("transformTextToDOM")(a,[b("DOMHyperlink").params(!0),b("DOMEmoji").params({renderInMessenger:!0}),b("DOMEmote").params({renderInMessenger:!0})])};return b("JSXDOM").span({className:c?"highlight":null},d?h(a,e):g(a,e))}e.exports=a}),null);
__d("MercuryThreadSearchUtils",["TokenizeUtil","escapeRegex"],(function(a,b,c,d,e,f){__p&&__p();a={wordsInString:function(a){return(a||"").split(/\s+/).filter(function(a){return a.trim().length>0})},anyMatchPredicate:function(a,b){for(var c=0;c<a.length;c++)if(b(a[c]))return!0;return!1},allMatchPredicate:function(a,b){for(var c=0;c<a.length;c++)if(!b(a[c]))return!1;return!0},queryWordMatchesAnyNameWord:function(a,c){var d=new RegExp("^"+b("escapeRegex")(a),"i");return this.anyMatchPredicate(c,function(a){a=b("TokenizeUtil").parse(a).flatValue;return d.test(a)})},queryMatchesName:function(a,b){a=this.wordsInString(a);var c=this.wordsInString(b);return this.allMatchPredicate(a,function(a){return this.queryWordMatchesAnyNameWord(a,c)}.bind(this))}};e.exports=a}),null);
__d("MercuryLocalThreadResults",["MercuryIDs","MercuryPageOrderedThreadlist","MercurySingletonMixin","MercuryThreadSearchUtils","MessengerFolders.bs","MessengerParticipants.bs","MessengerState.bs"],(function(a,b,c,d,e,f){__p&&__p();function a(a){"use strict";this.$1=a,this.$2=b("MercuryPageOrderedThreadlist").getForFBID(this.$1)}a.prototype.findMatchingThreadsFromIds=function(a,c){"use strict";return c.filter(function(c){c=b("MessengerState.bs").getThreadMetaNow(this.$1,c);return this.$3(c,a)}.bind(this))};a.prototype.findMatchingThreads=function(a){"use strict";var c=[];b("MessengerFolders.bs").getSupportedFolders().forEach(function(a){c=c.concat(this.$2.getThreadlistUntilTimestamp(0,a))}.bind(this));return this.findMatchingThreadsFromIds(a,c)};a.prototype.$3=function(a,c){"use strict";__p&&__p();var d=this.$4(a.participants);c=b("MercuryThreadSearchUtils").wordsInString(c);var e=null;b("MessengerParticipants.bs").getMulti(d,function(a){e=d.map(function(b){return a[b]})});return!e?!1:b("MercuryThreadSearchUtils").allMatchPredicate(c,function(c){var d=b("MercuryThreadSearchUtils").anyMatchPredicate(e,function(a){return a&&a.name&&b("MercuryThreadSearchUtils").queryWordMatchesAnyNameWord(c,b("MercuryThreadSearchUtils").wordsInString(a.name))}),f=a.name&&b("MercuryThreadSearchUtils").queryWordMatchesAnyNameWord(c,b("MercuryThreadSearchUtils").wordsInString(a.name));return d||f})};a.prototype.$4=function(a){"use strict";return a.length===1&&b("MercuryIDs").tokenize(a[0]).value===this.$1?a:a.filter(function(a){a=b("MercuryIDs").tokenize(a).value;return a!==this.$1}.bind(this))};Object.assign(a,b("MercurySingletonMixin"));e.exports=a}),null);
__d("MercurySearchThreadResultOrderer",["MercurySingletonMixin","MessagingTag","MessengerState.bs","createObjectFrom"],(function(a,b,c,d,e,f){__p&&__p();function a(a){"use strict";this.$1=a}a.prototype.separateCanonicalThreadsInFolder=function(a,c){"use strict";var d=[],e=[];a.forEach(function(a){var f=b("MessengerState.bs").getThreadMetaNow(this.$1,a);f.folder===c&&f.is_canonical?d.push(a):e.push(a)}.bind(this));return{canonical_in_folder:d.sort(function(a,b){return this.$2(a,b)}.bind(this)),remaining:e}};a.prototype.filterThreadsInFolder=function(a,c){"use strict";var d=[];a.forEach(function(a){var e=b("MessengerState.bs").getThreadMetaNow(this.$1,a);e.folder===c&&e.is_archived===!1?d.push(a):c===b("MessagingTag").ACTION_ARCHIVED&&e.is_archived===!0&&d.push(a)}.bind(this));return d};a.prototype.orderResults=function(a,b,c,d){"use strict";b=i(b,c);c=b.sort(this.$3.bind(this,d));return i(a,c)};a.prototype.$3=function(a,c,d){"use strict";var e=b("MessengerState.bs").getThreadMetaNow(this.$1,c),f=b("MessengerState.bs").getThreadMetaNow(this.$1,d),i=g(e),j=g(f);if(i!==j)return h(i,a)>h(j,a)?-1:1;return e.is_canonical!==f.is_canonical?e.is_canonical?-1:1:this.$2(c,d)};a.prototype.$2=function(a,c){"use strict";a=b("MessengerState.bs").getThreadMetaNow(this.$1,a);c=b("MessengerState.bs").getThreadMetaNow(this.$1,c);return a.timestamp>c.timestamp?-1:1};function g(a){return a.is_archived?b("MessagingTag").ACTION_ARCHIVED:a.folder}function h(a,c){if(a===c)return 5;c={};c[b("MessagingTag").INBOX]=4;c[b("MessagingTag").ACTION_ARCHIVED]=3;c[b("MessagingTag").OTHER]=2;c[b("MessagingTag").SPAM]=1;return c[a]}function i(a,c){var d=b("createObjectFrom")(a);c=c.filter(function(a){return!(a in d)});return a.concat(c)}Object.assign(a,b("MercurySingletonMixin"));e.exports=a}),null);
__d("MercurySearchThreadResults",["KeyedCallbackManager","MercuryAPIArgsSource","MercuryServerDispatcher","MercuryServerPayloadPreprocessor","MercurySingletonMixin","MercuryThreadIDMap","MercuryThreadlistConstants","MessengerServerPayloadTransformer.bs","RangedCallbackManager"],(function(a,b,c,d,e,f){__p&&__p();var g=new(b("KeyedCallbackManager"))(),h=b("MercuryThreadlistConstants").WEBMESSENGER_THREAD_COUNT,i=b("MercuryThreadlistConstants").WEBMESSENGER_MORE_COUNT;function a(a){"use strict";this.$1=a,this.$2=b("MercuryServerPayloadPreprocessor").getForFBID(this.$1),this.$3=b("MercuryThreadIDMap").getForFBID(this.$1),b("MercuryServerDispatcher").registerEndpoints({"/ajax/mercury/search_threads.php":{request_user_id:a,mode:b("MercuryServerDispatcher").IMMEDIATE,handler:function(a){this.handleUpdate(a)}.bind(this)}})}a.prototype.getThreadlist=function(a,c){"use strict";if(a){var d=g.executeOrEnqueue(a,function(a){var b=a.getAllResources();a=a.hasReachedEndOfArray();c(b,a)}),e=g.getUnavailableResources(d),f=b("MercuryAPIArgsSource").WEBMESSENGER;e.length&&this.$4({client:f,query:a,offset:0,limit:h+1});return d}};a.prototype.isExhausted=function(a){"use strict";a=g.getResource(a);return a?a.hasReachedEndOfArray():!1};a.prototype.getCachedThreadlist=function(a){"use strict";a=g.getResource(a);return a?a.getAllResources():null};a.prototype.cacheThreadlist=function(a,c){"use strict";g.getResource(a);var d=new(b("RangedCallbackManager"))();d.addResourcesWithoutSorting(c,0);d.setReachedEndOfArray();g.setResource(a,d)};a.prototype.getMoreThreadlist=function(a,b){"use strict";__p&&__p();if(a){var c=g.getResource(a);if(c){var d=c.getCurrentArraySize(),e=i,f=c.executeOrEnqueue(0,d+e,function(){var a=c.getAllResources(),d=c.hasReachedEndOfArray();b(a,d)}),h=c.getUnavailableResources(f);h.length&&this.$4({query:a,offset:d,limit:e+1});return f}}};a.prototype.handleUpdate=function(a){"use strict";__p&&__p();if(a.graphql_payload){var c=a.graphql_payload.map(function(c){return b("MessengerServerPayloadTransformer.bs").transformThread(a.viewer,c,a.for_page)});this.$2.handleUpdate({threads:c,payload_source:a.payload_source})}else a.mercury_payload&&this.$2.handleUpdate(a.mercury_payload);c=a.search_threads||{};for(var d in c){var e=c[d]||[];e=e.map(function(a){return this.$3.getClientIDFromServerIDNow(a)}.bind(this));var f=g.getResource(d);f?this.$5(f,e,i+1):(f=new(b("RangedCallbackManager"))(),this.$5(f,e,h+1),g.setResource(d,f))}};a.prototype.unsubscribe=function(a,b){"use strict";if(b){b=g.getResource(b);b?b.unsubscribe(a):g.unsubscribe(a)}};a.prototype.setInitialCount=function(a){"use strict";h=a};a.prototype.$5=function(a,b,c){"use strict";var d=a.getCurrentArraySize();c=b.length<c;c||b.pop();a.addResourcesWithoutSorting(b,d);c&&a.setReachedEndOfArray()};a.prototype.$4=function(a){"use strict";a.client=b("MercuryAPIArgsSource").WEBMESSENGER,a.index="fbid",b("MercuryServerDispatcher").trySend("/ajax/mercury/search_threads.php",a,null,this.$1)};Object.assign(a,b("MercurySingletonMixin"));e.exports=a}),null);
__d("MercurySearchThreadsStrategy",["MercuryLocalThreadResults","MercurySearchThreadResults","MercurySingletonMixin","WebMessengerConstants","createObjectFrom"],(function(a,b,c,d,e,f){__p&&__p();var g=null,h=null,i=b("WebMessengerConstants").SEARCH_THREAD_DELAY;function a(a){"use strict";this.$1=a,this.$2=b("MercuryLocalThreadResults").getForFBID(this.$1),this.$3=b("MercurySearchThreadResults").getForFBID(this.$1)}a.prototype.clearTimer=function(){"use strict";g=null,clearTimeout(h),h=null};a.prototype.search=function(a,b,c,d){"use strict";__p&&__p();a!=g&&(g=a,clearTimeout(h),h=null);var e=this.$2.findMatchingThreads(a),f=this.$3.getCachedThreadlist(a);if(f){f=this.$4(e,f);b(f);c([],this.$3.isExhausted(a));d(null,a);return}f=this.$5(a);e=this.$4(e,f.thread_ids);if(f.from_exhausted_remote_results){this.$3.cacheThreadlist(a,e);b(e);c([],!0);d(null,a);return}b(e);h=setTimeout(function(){var b=this.$3.getThreadlist(a,c);d(b,a)}.bind(this),i)};a.prototype.$5=function(a){"use strict";__p&&__p();var b="",c=[];for(var d=a.length-1;d>0;d--){var e=a.slice(0,d),f=this.$3.getCachedThreadlist(e);if(!f)continue;if(this.$3.isExhausted(e))return{from_exhausted_remote_results:!0,thread_ids:this.$2.findMatchingThreadsFromIds(a,f)};else b.length===0&&(b=e,c=this.$2.findMatchingThreadsFromIds(a,f))}return{from_exhausted_remote_results:!1,thread_ids:c}};a.prototype.$4=function(a,c){"use strict";return Object.keys(babelHelpers["extends"]({},b("createObjectFrom")(a),b("createObjectFrom")(c)))};Object.assign(a,b("MercurySingletonMixin"));e.exports=a}),null);
__d("PagesManagerCountDownTimer.react",["cx","React"],(function(a,b,c,d,e,f,g){__p&&__p();var h,i=1e3;c=babelHelpers.inherits(a,b("React").Component);h=c&&c.prototype;function a(a,b){"use strict";__p&&__p();h.constructor.call(this,a,b),this.$2=function(){__p&&__p();this.setState({isCountingDown:!0});var a=function(){var a=this.$1(this.props.expireTimestamp);if(a>0){this.setState({timeRemaining:a});this.$2();return}this.setState({isCountingDown:!1});this.props.onTimeup()}.bind(this);setTimeout(a,i)}.bind(this),this.state={timeRemaining:this.$1(this.props.expireTimestamp),isCountingDown:!1}}a.prototype.componentDidMount=function(){"use strict";this.state.isCountingDown||this.$2()};a.prototype.UNSAFE_componentWillReceiveProps=function(a){"use strict";this.setState({timeRemaining:this.$1(a.expireTimestamp)}),this.state.isCountingDown||this.$2()};a.prototype.render=function(){"use strict";return b("React").createElement("div",{className:"_3uo9"+(this.props.isHidden?" hidden_elem":"")},this.$3())};a.prototype.$3=function(){"use strict";var a=Math.floor(this.state.timeRemaining/1e3/60),c=this.$4(Math.floor(a/60));a=this.$4(a%60);return b("React").createElement("span",null,c+":"+a)};a.prototype.$1=function(a){"use strict";return a?a-Date.now():0};a.prototype.$4=function(a){"use strict";return("0"+a).slice(-2)};e.exports=a}),null);
__d("PagesManagerPerfLogger",["PagesManagerPerfTypedLogger"],(function(a,b,c,d,e,f){"use strict";__p&&__p();var g=1e3;function a(){this.$1=new Set()}a.prototype.log=function(a,c){var d=c.perfID+":"+a;if(this.$1.has(d))return;this.$1.add(d);d=Date.now()/g-c.baseTime;new(b("PagesManagerPerfTypedLogger"))().setPageID(c.pageID).setEventName(a).setEventSeriesID(c.perfID).setPerfTime(Math.round(d)).log()};e.exports=new a()}),null);
__d("PagesManagerListBatchActionContainer.react",["FluxContainer","PagesManagerStore","React"],(function(a,b,c,d,e,f){__p&&__p();var g;g=babelHelpers.inherits(a,b("React").Component);g&&g.prototype;a.getStores=function(){"use strict";return[b("PagesManagerStore")]};a.calculateState=function(a){"use strict";a=b("PagesManagerStore").getSelectedRows();var c=a.length>0;return{showBatchAction:c,selectedRows:a}};a.prototype.render=function(){"use strict";var a=this.props,c=a.ChildClass;a=babelHelpers.objectWithoutProperties(a,["ChildClass"]);return b("React").createElement(c,babelHelpers["extends"]({},a,{selectedRows:this.state.selectedRows,showBatchAction:this.state.showBatchAction}))};function a(){"use strict";g.apply(this,arguments)}e.exports=b("FluxContainer").create(a)}),null);
__d("PagesManagerListRowContainer.react",["FluxContainer","PagesManagerStore","React"],(function(a,b,c,d,e,f){__p&&__p();var g;g=babelHelpers.inherits(a,b("React").Component);g&&g.prototype;a.getStores=function(){"use strict";return[b("PagesManagerStore")]};a.calculateState=function(a,c){"use strict";a=!1;var d=!1;c&&c.listItem&&(a=c.selected===undefined?b("PagesManagerStore").getIsRowSelected(c.listItem):c.selected,d=b("PagesManagerStore").getViewingListItem()===c.listItem);c=b("PagesManagerStore").isSelectionMode();return{selected:a,isViewing:d,selectionMode:c}};a.prototype.render=function(){"use strict";var a=this.props,c=a.ChildClass;a=babelHelpers.objectWithoutProperties(a,["ChildClass"]);return b("React").createElement(c,babelHelpers["extends"]({ref:"childClass",isViewing:this.state.isViewing,onSelected:this.props.onSelected,selected:this.state.selected,selectionMode:this.state.selectionMode},a))};function a(){"use strict";g.apply(this,arguments)}e.exports=b("FluxContainer").create(a,{withProps:!0})}),null);
__d("PagesManagerStaticStore",[],(function(a,b,c,d,e,f){a={_pageID:"",setPageID:function(a){this._pageID=a},getPageID:function(){return this._pageID}};e.exports=a}),null);
__d("XPagesCustomTagCreateController",["XController"],(function(a,b,c,d,e,f){e.exports=b("XController").create("/pages/custom_tag/create/",{tag_name:{type:"String",required:!0},color:{type:"String"}})}),null);
__d("XPagesCustomTagDeleteController",["XController"],(function(a,b,c,d,e,f){e.exports=b("XController").create("/pages/custom_tag/delete/",{tag_name:{type:"String",required:!0}})}),null);
__d("XPagesCustomTagEditColorController",["XController"],(function(a,b,c,d,e,f){e.exports=b("XController").create("/pages/custom_tag/edit/color/",{tag_name:{type:"String",required:!0},color:{type:"String",required:!0}})}),null);
__d("XPagesCustomTagMergeController",["XController"],(function(a,b,c,d,e,f){e.exports=b("XController").create("/pages/custom_tag/merge/",{tag_name:{type:"String",required:!0},old_tags:{type:"StringSet",required:!0}})}),null);
__d("XPagesCustomTagsDataController",["XController"],(function(a,b,c,d,e,f){e.exports=b("XController").create("/pages/custom_tags/data/",{})}),null);
__d("PagesManagerCustomTagsStore",["ActorURI","AsyncRequest","FluxStore","PageCustomerActions","PagesManagerCustomTagsActionType","PagesManagerDispatcher","XPagesCustomTagCreateController","XPagesCustomTagDeleteController","XPagesCustomTagEditColorController","XPagesCustomTagMergeController","XPagesCustomTagsDataController","immutable"],(function(a,b,c,d,e,f){"use strict";__p&&__p();var g;c=babelHelpers.inherits(a,b("FluxStore"));g=c&&c.prototype;function a(a){g.constructor.call(this,a),this.$PagesManagerCustomTagsStore1=new Map(),this.$PagesManagerCustomTagsStore2=!1,this.$PagesManagerCustomTagsStore3=!1}a.prototype.hasCustomTags=function(a){return this.$PagesManagerCustomTagsStore1.has(a)};a.prototype.getCustomTags=function(a){return b("immutable").Map(this.$PagesManagerCustomTagsStore1.get(a)||new Map())};a.prototype.hasCustomTag=function(a,b){a=this.$PagesManagerCustomTagsStore1.get(a);return a!==undefined&&a.has(b)};a.prototype.getIsMergingLabels=function(){return this.$PagesManagerCustomTagsStore2};a.prototype.getIsManagingTags=function(){return this.$PagesManagerCustomTagsStore3};a.prototype.__onDispatch=function(a){__p&&__p();switch(a.type){case b("PagesManagerCustomTagsActionType").FETCH:new(b("AsyncRequest"))().setURI(b("ActorURI").create(b("XPagesCustomTagsDataController").getURIBuilder().getURI(),a.pageID)).setHandler(function(c){this.__dispatcher.dispatch({type:b("PagesManagerCustomTagsActionType").UPDATE,pageID:a.pageID,customTags:c.payload})}.bind(this)).send();break;case b("PagesManagerCustomTagsActionType").UPDATE:var c=this.$PagesManagerCustomTagsStore1.get(a.pageID)||new Map();a.customTags.map(function(a){c.set(a.name,a)});this.$PagesManagerCustomTagsStore1.set(a.pageID,c);this.__emitChange();break;case b("PagesManagerCustomTagsActionType").TOGGLE_MERGE_LABELS:this.$PagesManagerCustomTagsStore2=a.show;this.__emitChange();break;case b("PagesManagerCustomTagsActionType").TOGGLE_TAG_MANAGEMENT_DIALOG:this.$PagesManagerCustomTagsStore3=a.show;this.$PagesManagerCustomTagsStore2=!1;this.__emitChange();break;case b("PagesManagerCustomTagsActionType").CREATE:new(b("AsyncRequest"))().setURI(b("ActorURI").create(b("XPagesCustomTagCreateController").getURIBuilder().setString("tag_name",a.tagName).setString("color",a.color).getURI(),a.pageID)).setHandler(function(c){this.__dispatcher.dispatch({type:b("PagesManagerCustomTagsActionType").UPDATE,pageID:a.pageID,customTags:[c.payload],hasTagListChanged:!0})}.bind(this)).send();break;case b("PagesManagerCustomTagsActionType").DELETE:new(b("AsyncRequest"))().setURI(b("ActorURI").create(b("XPagesCustomTagDeleteController").getURIBuilder().setString("tag_name",a.tagName).getURI(),a.pageID)).setHandler(function(c){c=this.$PagesManagerCustomTagsStore1.get(a.pageID);c&&c.has(a.tagName)&&(c["delete"](a.tagName),this.$PagesManagerCustomTagsStore1.set(a.pageID,c),this.__dispatcher.dispatch({type:b("PagesManagerCustomTagsActionType").UPDATE,pageID:a.pageID,customTags:[],hasTagListChanged:!0}))}.bind(this)).send();break;case b("PagesManagerCustomTagsActionType").EDIT_COLOR:new(b("AsyncRequest"))().setURI(b("ActorURI").create(b("XPagesCustomTagEditColorController").getURIBuilder().setString("tag_name",a.tagName).setString("color",a.color).getURI(),a.pageID)).setHandler(function(c){this.__dispatcher.dispatch({type:b("PagesManagerCustomTagsActionType").UPDATE,pageID:a.pageID,customTags:[c.payload],hasTagListChanged:!1})}.bind(this)).send();break;case b("PagesManagerCustomTagsActionType").MERGE:new(b("AsyncRequest"))().setURI(b("ActorURI").create(b("XPagesCustomTagMergeController").getURIBuilder().setString("tag_name",a.tagName).setStringSet("old_tags",a.oldTags).getURI(),a.pageID)).setHandler(function(d){var c=this.$PagesManagerCustomTagsStore1.get(a.pageID);a.oldTags.forEach(function(b){c&&c.has(b)&&b!==a.tagName&&c["delete"](b)});this.$PagesManagerCustomTagsStore1.set(a.pageID,c);this.__dispatcher.dispatch({type:b("PagesManagerCustomTagsActionType").UPDATE,pageID:a.pageID,customTags:[d.payload],hasTagListChanged:!0});b("PageCustomerActions").resetData(a.pageID)}.bind(this)).send();break;default:break}};a.__moduleID=e.id;e.exports=new a(b("PagesManagerDispatcher"))}),null);
__d("PageCustomTagColorSelector.react",["ix","cx","xuiglyph","ContextualLayer.react","Image.react","PageCustomTagConsts","React","XUICard.react"],(function(a,b,c,d,e,f,g,h,i){"use strict";__p&&__p();var j,k=b("PageCustomTagConsts").COLORS,l=b("PageCustomTagConsts").TRIANGLES;c=babelHelpers.inherits(a,b("React").Component);j=c&&c.prototype;function a(a){j.constructor.call(this,a),this.$1=function(a){this.props.onToggleSelector(a),this.setState({openSelector:a})}.bind(this),this.$2=function(a){this.props.onSelectColor(a),this.setState({openSelector:!1})}.bind(this),this.state={openSelector:!1}}a.prototype.$3=function(a){return"#"+k[a].border.substring(2)};a.prototype.$4=function(a){return"#"+k[a].fill.substring(2)};a.prototype.$5=function(a){var c=null;a==="FF000000"?c=g("88838"):c="/images/pages/context_card/checkmark/checkmark_"+a+".png";return b("React").createElement(b("Image.react"),{src:c})};a.prototype.render=function(){var a=l[this.props.selectedColor];return b("React").createElement("span",null,b("React").createElement("div",{className:"_1fj6"+(this.state.openSelector?" _1fj7":""),ref:"colorSelector"},b("React").createElement(b("XUICard.react"),{className:"_1fjd",style:{borderColor:this.$3(this.props.selectedColor),backgroundColor:this.$4(this.props.selectedColor)},onClick:function(){return this.$1(!this.state.openSelector)}.bind(this)},b("React").createElement(b("Image.react"),{src:a}))),b("React").createElement(b("ContextualLayer.react"),{contextRef:function(){return this.refs.colorSelector}.bind(this),shown:this.state.openSelector,onToggle:function(a){return!a&&this.$1}.bind(this),position:"below",alignment:"left"},b("React").createElement("div",{className:"_1fj8"},b("React").createElement("div",{className:"_1fjb"}),Object.keys(k).map(function(a){return b("React").createElement(b("XUICard.react"),{className:"_1fjc",key:a,style:{borderColor:this.$3(a),backgroundColor:this.$4(a)},onClick:function(){return this.$2(a)}.bind(this)},a===this.props.selectedColor?this.$5(a):null)}.bind(this)))))};e.exports=a}),null);
__d("PageCustomTagSearchableEntry",["SearchableEntry"],(function(a,b,c,d,e,f){__p&&__p();var g;c=babelHelpers.inherits(a,b("SearchableEntry"));g=c&&c.prototype;function a(a){"use strict";g.constructor.call(this,{uniqueID:a.id,title:a.name}),this.$PageCustomTagSearchableEntry1=a}a.prototype.getColor=function(){"use strict";return"#"+this.$PageCustomTagSearchableEntry1.color.substring(2)};a.prototype.getBorderColor=function(){"use strict";return"#"+this.$PageCustomTagSearchableEntry1.borderColor.substring(2)};a.prototype.getFillColor=function(){"use strict";return"#"+this.$PageCustomTagSearchableEntry1.fillColor.substring(2)};a.prototype.getFBID=function(){"use strict";return this.$PageCustomTagSearchableEntry1.id};a.prototype.getData=function(){"use strict";return this.$PageCustomTagSearchableEntry1};e.exports=a}),null);
__d("PageCustomTagSearchSource",["AbstractSearchSource","PageCustomTagSearchableEntry"],(function(a,b,c,d,e,f){__p&&__p();var g,h=3,i=[];a=babelHelpers.inherits(j,b("AbstractSearchSource"));g=a&&a.prototype;j.getInstance=function(a,b){"use strict";var c=b?1:0;!i[c]?i[c]=new j(a,b):i[c].setAvailableTags(a);return i[c]};function j(a,b){"use strict";g.constructor.call(this);var c=b?1:0;i[c]||(this.setAvailableTags(a),this.setShowQueryAsEntry(b))}j.prototype.setAvailableTags=function(a){"use strict";this.$PageCustomTagSearchSource1=a};j.prototype.setShowQueryAsEntry=function(a){"use strict";this.$PageCustomTagSearchSource2=a};j.prototype.searchImpl=function(a,c,d){"use strict";__p&&__p();var e=[];d=!1;if(a){var f=a.toLowerCase();this.$PageCustomTagSearchSource1.forEach(function(b){b.name.toLowerCase().indexOf(f)!==-1&&e.push(b),a===b.name&&(d=!0)})}else e=this.$PageCustomTagSearchSource1.slice(0,h);var g=[];a&&!d&&this.$PageCustomTagSearchSource2&&g.push(new(b("PageCustomTagSearchableEntry"))({id:0,color:"",borderColor:"",fillColor:"",name:a}));e.forEach(function(a){g.push(new(b("PageCustomTagSearchableEntry"))(a))});c(g,a)};e.exports=j}),null);
__d("PageCustomTagTypeaheadPresenter.react",["cx","fbt","ContextualLayerUpdateOnScroll","LeftRight.react","React","emptyFunction"],(function(a,b,c,d,e,f,g,h){__p&&__p();var i,j,k;i=babelHelpers.inherits(l,b("React").Component);i&&i.prototype;l.prototype.render=function(){"use strict";var a=this.props.entry,c="_599m"+(this.props.highlighted?" _599n":""),d={};this.props.searchBar||(d.color=this.props.highlighted?"white":a.getColor());var e=!a.getFBID();return b("React").createElement("li",{"aria-selected":this.props.highlighted,className:c,key:a.getUniqueID(),onMouseDown:function(b){return this.props.onSelect(a,b)}.bind(this),onMouseEnter:function(){return this.props.onHighlight(a)}.bind(this),role:this.props.role},b("React").createElement(b("LeftRight.react"),null,b("React").createElement("div",{style:d},a.getTitle()),e?b("React").createElement("div",{className:"_507"},h._("+ New label")):null))};function l(){"use strict";i.apply(this,arguments)}j=babelHelpers.inherits(a,b("React").Component);j&&j.prototype;a.prototype.$1=function(a){"use strict";return b("React").createElement(l,{entry:a,key:a.getUniqueID(),highlighted:a===this.props.highlightedEntry,onHighlight:this.props.onHighlight,onRenderHighlight:this.props.onRenderHighlight,onSelect:this.props.onSelect,searchBar:this.props.searchBar})};a.prototype.render=function(){"use strict";var a=(this.props.searchBar?"":"_50ig")+(this.props.entries.length?"":" _599s");return b("React").createElement("ul",{className:a,onMouseLeave:function(){return this.props.removeHighlight()}.bind(this)},this.props.entries.map(function(a){return this.$1(a)}.bind(this)))};function a(){"use strict";j.apply(this,arguments)}k=babelHelpers.inherits(c,b("React").Component);k&&k.prototype;c.prototype.render=function(){"use strict";var a=this.props.entry;return b("React").createElement("span",{className:"_4n1-",style:{color:a.getColor()}},a.getTitle())};function c(){"use strict";k.apply(this,arguments)}d={useLayer:!0,layerBehaviors:{ContextualLayerUpdateOnScroll:b("ContextualLayerUpdateOnScroll")},ViewRenderer:a,TokenRenderer:c};a.defaultProps={removeHighlight:b("emptyFunction"),searchBar:!1};e.exports=d}),null);
__d("PagesManagerManageCustomTagsDialog.react",["cx","fbt","LeftRight.react","Link.react","PageCustomTagColorSelector.react","PagesAdminToolUIActionType","PagesContextCardCustomTag.react","PagesManagerCustomTagsAction","PagesManagerLogger","PagesSelectableListCheckbox.react","React","ScrollableArea.react","XUIButton.react","XUIDialog.react","XUIDialogBody.react","XUIDialogButton.react","XUIDialogCancelButton.react","XUIDialogFooter.react","XUIDialogTitle.react","XUITextInput.react","curry","nullthrows"],(function(a,b,c,d,e,f,g,h){"use strict";__p&&__p();var i,j=350,k=500,l=225,m=25,n=5;c=babelHelpers.inherits(a,b("React").Component);i=c&&c.prototype;function a(a){__p&&__p();i.constructor.call(this,a),this.$1=function(a){b("PagesManagerLogger").logManageTagUIAction(b("PagesAdminToolUIActionType").TAG_MANAGEMENT_CLICK_DELETE_LINK,this.props.pageID,{fbid:a.id,tag_name:a.name}),this.state.selectedRows.indexOf(a.name)>=0&&this.$2(a.name),this.$3(!0,a)}.bind(this),this.$4=function(){var a=b("nullthrows")(this.state.deleteConfirmationDialogProps.actionTag);b("PagesManagerLogger").logManageTagUIAction(b("PagesAdminToolUIActionType").TAG_MANAGEMENT_CLICK_CONFIRM_DELETE,this.props.pageID,{fbid:a.id,tag_name:a.name});b("PagesManagerCustomTagsAction").deleteCustomTag(this.props.pageID,a.name);this.$3(!1)}.bind(this),this.$6=function(a,c){b("PagesManagerLogger").logManageTagUIAction(b("PagesAdminToolUIActionType").TAG_MANAGEMENT_CLICK_CHANGE_COLOR,this.props.pageID,{fbid:a.id,tagName:a.name}),b("PagesManagerCustomTagsAction").editCustomTagColor(this.props.pageID,a.name,c)}.bind(this),this.$7=function(a){b("PagesManagerLogger").logManageTagUIAction(b("PagesAdminToolUIActionType").TAG_MANAGEMENT_CLICK_COLOR_SELECTOR,this.props.pageID,{show:a})}.bind(this),this.$8=function(event){this.setState({tagNameInputValue:event.target.value})}.bind(this),this.$9=function(event){this.setState({mergeTagNameInputValue:event.target.value})}.bind(this),this.$10=function(){b("PagesManagerLogger").logManageTagUIAction(b("PagesAdminToolUIActionType").TAG_MANAGEMENT_CLICK_ADD_TAG,this.props.pageID,{tag_name:this.state.tagNameInputValue}),b("PagesManagerCustomTagsAction").createCustomTag(this.props.pageID,this.state.tagNameInputValue),this.setState({tagNameInputValue:""})}.bind(this),this.$11=function(){b("PagesManagerLogger").logManageTagUIAction(b("PagesAdminToolUIActionType").TAG_MANAGEMENT_CLICK_MERGE_TAG,this.props.pageID,{tag_name:this.state.mergeTagNameInputValue}),b("PagesManagerCustomTagsAction").mergeCustomTag(this.props.pageID,this.state.mergeTagNameInputValue,this.state.selectedRows),this.$12(!1),this.setState({mergeTagNameInputValue:"",selectedRows:[]})}.bind(this),this.$13=function(a){this.setState({hoveredTag:a})}.bind(this),this.$15=function(a){this.state.selectedRows.indexOf(a)>=0?this.$2(a):this.$14(a)}.bind(this),this.$12=function(a){b("PagesManagerCustomTagsAction").toggleMergeLabelsSection(this.props.pageID,a)}.bind(this),this.state={deleteConfirmationDialogProps:{show:!1,actionTag:null},tagNameInputValue:"",mergeTagNameInputValue:"",selectedRows:[],hoveredTag:""}}a.prototype.$3=function(a,c){this.setState({deleteConfirmationDialogProps:{show:a,actionTag:a?b("nullthrows")(c):null}})};a.prototype.$5=function(){return b("React").createElement(b("XUIDialog.react"),{layerHideOnBlur:!1,onToggle:function(a){return!a&&this.$3(a)}.bind(this),shown:this.state.deleteConfirmationDialogProps.show,width:j},b("React").createElement(b("XUIDialogTitle.react"),{showCloseButton:!1},h._("Delete label?")),b("React").createElement(b("XUIDialogBody.react"),null,h._("Are you sure to delete label \"{label name}\"?",[h._param("label name",this.state.deleteConfirmationDialogProps.actionTag!==null?this.state.deleteConfirmationDialogProps.actionTag.name:null)])),b("React").createElement(b("XUIDialogFooter.react"),null,b("React").createElement(b("XUIDialogCancelButton.react"),null),b("React").createElement(b("XUIDialogButton.react"),{action:"confirm",label:h._("Confirm"),onClick:this.$4,use:"confirm"})))};a.prototype.$2=function(a){var b=this.state.selectedRows;a=this.state.selectedRows.indexOf(a);b.splice(a,1);this.setState({selectedRows:b})};a.prototype.$14=function(a){var b=this.state.selectedRows;b.push(a);this.setState({selectedRows:b})};a.prototype.$16=function(a){return this.state.hoveredTag===a||this.state.selectedRows.indexOf(a)>=0?b("React").createElement(b("PagesSelectableListCheckbox.react"),{checked:this.state.selectedRows.indexOf(a)>=0,className:"_54un",onChange:b("curry")(this.$15,a)}):null};a.prototype.$17=function(){return b("React").createElement("div",{className:"_42xa"},b("React").createElement(b("XUITextInput.react"),{className:"_42xc",placeholder:h._("Name the new combined label..."),xuiError:this.$18(),onChange:this.$9,value:this.state.mergeTagNameInputValue,maxLength:m}),b("React").createElement(b("XUIButton.react"),{className:"_42xd",label:h._("Combine"),disabled:this.$18()||this.state.mergeTagNameInputValue===""||this.state.selectedRows.length<2,use:"confirm",onClick:this.$11}))};a.prototype.$19=function(){return b("React").createElement("div",{className:"_5hry"},b("React").createElement(b("XUITextInput.react"),{className:"_5hrz",placeholder:h._("Add a label for products, services or common questions..."),xuiError:this.$20(),onChange:this.$8,value:this.state.tagNameInputValue,maxLength:m}),b("React").createElement(b("XUIButton.react"),{className:"_5hr-",label:h._("Add"),disabled:this.$20()||this.state.tagNameInputValue==="",use:"confirm",onClick:this.$10}))};a.prototype.$21=function(){if(this.props.customTags.size===0)return null;var a=b("React").createElement("div",{className:"_31fn"},this.props.customTags.toArray().map(function(a){return b("React").createElement(b("LeftRight.react"),{className:"_2zxg",key:a.id,onMouseEnter:b("curry")(this.$13,a.name),onMouseLeave:b("curry")(this.$13,"")},b("React").createElement("div",null,this.$16(a.name),b("React").createElement(b("PageCustomTagColorSelector.react"),{selectedColor:a.color,onSelectColor:function(b){return this.$6(a,b)}.bind(this),onToggleSelector:this.$7}),b("React").createElement(b("PagesContextCardCustomTag.react"),{canRemove:!1,tagData:a})),b("React").createElement(b("Link.react"),{onClick:b("curry")(this.$1,a)},h._("Delete")))}.bind(this)));return this.props.customTags.size>n?b("React").createElement(b("ScrollableArea.react"),{height:l},a):a};a.prototype.$20=function(){if(this.props.customTags.has(this.state.tagNameInputValue))return h._("Label name must be unique.");return this.state.tagNameInputValue.indexOf(":")!==-1?h._("Label name can not contain \":\"."):null};a.prototype.$18=function(){return this.state.mergeTagNameInputValue.indexOf(":")!==-1?h._("Label name can not contain \":\"."):null};a.prototype.render=function(){var a=this.props.isMergingLabels&&this.state.selectedRows.length>1?this.$17():this.$19();return b("React").createElement(b("XUIDialog.react"),{layerHideOnBlur:!1,onToggle:this.props.onToggle,shown:this.props.show,width:k},b("React").createElement(b("XUIDialogTitle.react"),{showCloseButton:!1},h._("Add and manage labels")),b("React").createElement(b("XUIDialogBody.react"),null,b("React").createElement("div",{className:"_5hrx"},h._("Labels help you track and find conversations. Create your own labels and apply them to people based on what they've messaged you about.")),b("React").createElement("div",{className:(this.state.selectedRows.length<2||this.props.isMergingLabels?"hidden_elem":"")+" _54uo"},b("React").createElement(b("XUIButton.react"),{className:"_54up",label:h._("Combine"),use:"confirm",onClick:b("curry")(this.$12,!0)})),this.$21(),this.$5(),a),b("React").createElement(b("XUIDialogFooter.react"),null,b("React").createElement(b("XUIDialogButton.react"),{action:"cancel",label:h._("Close"),use:"confirm"})))};e.exports=a}),null);
__d("PagesManagerInboxSwitcher.react",["ix","cx","fbt","Image.react","PagesManagerInboxSwitcherUtil","React","ShimButton.react","fbglyph"],(function(a,b,c,d,e,f,g,h,i){__p&&__p();var j;j=babelHelpers.inherits(a,b("React").PureComponent);j&&j.prototype;a.prototype.render=function(){"use strict";return b("React").createElement(b("ShimButton.react"),{className:"_1tvr _4w2j",onClick:function(){return b("PagesManagerInboxSwitcherUtil").switchToInbox(this.props.pageID,this.props.pageToken)}.bind(this)},b("React").createElement("div",{className:"_259i"},i._("Go to new inbox")),b("React").createElement(b("Image.react"),{className:"_1tvs",src:g("133558")}))};function a(){"use strict";j.apply(this,arguments)}e.exports=a}),null);
__d("PagesManagerMessagingAwayStatusDispatcher",["ReactDispatcher_DEPRECATED"],(function(a,b,c,d,e,f){e.exports=new(b("ReactDispatcher_DEPRECATED"))()}),null);
__d("PagesManagerAwayToggleAction",["PagesAdminToolUIActionType","PagesManagerLogger","PagesManagerMessagingActionType","PagesManagerMessagingAwayStatusDispatcher"],(function(a,b,c,d,e,f){"use strict";a={fetchStatus:function(a){b("PagesManagerMessagingAwayStatusDispatcher").dispatch({pageID:a,type:b("PagesManagerMessagingActionType").AWAY_STATE.FETCH})},setToggleStatus:function(a,c){b("PagesManagerLogger").logMessageInboxUIAction(b("PagesAdminToolUIActionType").MESSAGE_INBOX_CLICK_AWAY_TOGGLE,a,{away:c}),b("PagesManagerMessagingAwayStatusDispatcher").dispatch({pageID:a,toggle:c,type:b("PagesManagerMessagingActionType").AWAY_STATE.SET})}};e.exports=a}),null);
__d("PagesManagerAwayBanner.react",["cx","fbt","ix","Image.react","LeftRight.react","Link.react","PagesManagerAwayToggleAction","PagesManagerCountDownTimer.react","PagesManagerResizeListener","React","XUIText.react"],(function(a,b,c,d,e,f,g,h,i){__p&&__p();var j,k="/help/800788243369168";j=babelHelpers.inherits(a,b("React").Component);j&&j.prototype;a.prototype.$1=function(){"use strict";b("PagesManagerAwayToggleAction").setToggleStatus(this.props.pageID,!1)};a.prototype.componentDidUpdate=function(a){"use strict";a.isAway!==this.props.isAway&&b("PagesManagerResizeListener").emit("change")};a.prototype.renderLeftChild=function(){"use strict";var a=this.props.expirationTimestamp*1e3;return b("React").createElement("div",null,b("React").createElement(b("Image.react"),{className:"_2fei",src:i("94985")}),b("React").createElement(b("XUIText.react"),{className:"_2fek",size:"meta1",display:"inline"},h._("Currently Away"),b("React").createElement("div",{className:"_2fel"},b("React").createElement(b("PagesManagerCountDownTimer.react"),{expireTimestamp:a,isHidden:!this.props.isAway,isNewInbox:!0,onTimeup:function(){return this.$1()}.bind(this)}))))};a.prototype.renderRightChild=function(){"use strict";return b("React").createElement("div",null,b("React").createElement(b("Link.react"),{className:"_2fem",href:k,target:"_blank"},h._("Learn more")),b("React").createElement(b("XUIText.react"),{className:"_2fen",onClick:function(){b("PagesManagerAwayToggleAction").setToggleStatus(this.props.pageID,!1)}.bind(this)},h._("Turn Off")))};a.prototype.render=function(){"use strict";return!this.props.isInitialized?b("React").createElement("div",null):b("React").createElement(b("LeftRight.react"),{className:"_2feo"+(this.props.isAway?"":" hidden_elem")},this.renderLeftChild(),this.renderRightChild())};function a(){"use strict";j.apply(this,arguments)}e.exports=a}),null);
__d("XPagesAwayToggleController",["XController"],(function(a,b,c,d,e,f){e.exports=b("XController").create("/pages/manager/messages/awaytoggle/",{})}),null);
__d("XPagesAwayToggleStatusController",["XController"],(function(a,b,c,d,e,f){e.exports=b("XController").create("/pages/manager/messages/awaytoggle/status/",{})}),null);
__d("PagesManagerMessagingAwayStatusStore",["ActorURI","AsyncRequest","FluxStore","PagesManagerMessagingActionType","PagesManagerMessagingAwayStatusDispatcher","XPagesAwayToggleController","XPagesAwayToggleStatusController"],(function(a,b,c,d,e,f){"use strict";__p&&__p();var g;c=babelHelpers.inherits(a,b("FluxStore"));g=c&&c.prototype;function a(a){g.constructor.call(this,a),this.$PagesManagerMessagingAwayStatusStore1=!1,this.$PagesManagerMessagingAwayStatusStore2=!1,this.$PagesManagerMessagingAwayStatusStore3=0}a.prototype.$PagesManagerMessagingAwayStatusStore4=function(a){var c=b("XPagesAwayToggleStatusController").getURIBuilder().getURI();c=b("ActorURI").create(c,a);new(b("AsyncRequest"))().setURI(c).setHandler(function(a){this.$PagesManagerMessagingAwayStatusStore1=a.payload.isAway,this.$PagesManagerMessagingAwayStatusStore3=a.payload.expiration,this.$PagesManagerMessagingAwayStatusStore2=!0,this.__dispatcher.dispatch({type:b("PagesManagerMessagingActionType").AWAY_STATE.UPDATE})}.bind(this)).send()};a.prototype.$PagesManagerMessagingAwayStatusStore5=function(a,c){var d=b("XPagesAwayToggleController").getURIBuilder().getURI();d=b("ActorURI").create(d,a);new(b("AsyncRequest"))().setURI(d).setMethod("POST").setData({is_away:c}).setHandler(function(a){this.$PagesManagerMessagingAwayStatusStore1=a.payload.isAway,this.$PagesManagerMessagingAwayStatusStore3=a.payload.expiration,this.__dispatcher.dispatch({type:b("PagesManagerMessagingActionType").AWAY_STATE.UPDATE})}.bind(this)).send()};a.prototype.__onDispatch=function(a){switch(a.type){case b("PagesManagerMessagingActionType").AWAY_STATE.SET:this.$PagesManagerMessagingAwayStatusStore5(a.pageID,a.toggle);break;case b("PagesManagerMessagingActionType").AWAY_STATE.FETCH:this.$PagesManagerMessagingAwayStatusStore4(a.pageID);break;case b("PagesManagerMessagingActionType").AWAY_STATE.UPDATE:this.__emitChange();break;default:break}};a.prototype.isAway=function(){return this.$PagesManagerMessagingAwayStatusStore1};a.prototype.isInitialized=function(){return this.$PagesManagerMessagingAwayStatusStore2};a.prototype.getExpirationTimestamp=function(){return this.$PagesManagerMessagingAwayStatusStore3};a.__moduleID=e.id;e.exports=new a(b("PagesManagerMessagingAwayStatusDispatcher"))}),null);
__d("PagesManagerAwayContainer.react",["FluxContainer","PagesManagerAwayToggleAction","PagesManagerMessagingAwayStatusStore","React"],(function(a,b,c,d,e,f){__p&&__p();var g;g=babelHelpers.inherits(a,b("React").Component);g&&g.prototype;a.getStores=function(){"use strict";return[b("PagesManagerMessagingAwayStatusStore")]};a.calculateState=function(a,c){"use strict";return{isAway:b("PagesManagerMessagingAwayStatusStore").isAway(),isInitialized:b("PagesManagerMessagingAwayStatusStore").isInitialized(),expirationTimestamp:b("PagesManagerMessagingAwayStatusStore").getExpirationTimestamp()}};a.prototype.UNSAFE_componentWillMount=function(){"use strict";b("PagesManagerAwayToggleAction").fetchStatus(this.props.pageID)};a.prototype.render=function(){"use strict";var a=this.props,c=a.RenderClass;a=babelHelpers.objectWithoutProperties(a,["RenderClass"]);return b("React").createElement(c,babelHelpers["extends"]({},a,this.state))};function a(){"use strict";g.apply(this,arguments)}e.exports=b("FluxContainer").create(a,{withProps:!0})}),null);
__d("PagesManagerMessagingAppointmentBannerContainer.react",["ix","cx","fbt","ChatAppointmentUtil","Image.react","Link.react","PagesEventObserver","PagesEventType","PagesManagerMessagingAppointmentDialog.react","PagesManagerMessagingMessagelistAction","PagesPlatformBookingMessageViewer","PagesPlatformNativeBookingGraphQLStatus","React","ReactDOM","RelayModern","ServicesAppointmentReferrer","fbglyph","PagesManagerMessagingAppointmentBannerContainerFragment_appointments.graphql","PagesManagerMessagingAppointmentBannerContainer_appointments.graphql","PagesManagerMessagingAppointmentBannerContainerRefetchQuery.graphql"],(function(a,b,c,d,e,f,g,h,i){"use strict";__p&&__p();var j;c=b("RelayModern").createRefetchContainer;b("RelayModern").graphql;var k=function(a){return b("React").createElement(b("Link.react"),{className:"_2ph_ _1hgm",onClick:a.onClick,role:"button"},b("React").createElement("span",{className:"_2pii _1hgo _1hgp"},b("React").createElement(b("Image.react"),{className:"_3-90",src:g("112904")}),a.title),b("React").createElement("span",{className:"_1hgq"+(a.bookingStatus===b("PagesPlatformNativeBookingGraphQLStatus").CONFIRMED?" _1hgt":"")+(a.bookingStatus===b("PagesPlatformNativeBookingGraphQLStatus").PENDING?" _1hgs":"")+" _1hgu"},a.status))};d=babelHelpers.inherits(a,b("React").Component);j=d&&d.prototype;function a(a){__p&&__p();j.constructor.call(this,a);this.$7=function(){this.setState({dialogShown:!0,selectedBookingStatus:[b("PagesPlatformNativeBookingGraphQLStatus").REQUESTED]}),b("PagesEventObserver").notify(b("PagesEventType").BOOKING_ADMIN_CLICK_REQUEST_LIST,this.props.pageID)}.bind(this);this.$8=function(){this.setState({dialogShown:!0,selectedBookingStatus:[b("PagesPlatformNativeBookingGraphQLStatus").PENDING,b("PagesPlatformNativeBookingGraphQLStatus").CONFIRMED]}),b("PagesEventObserver").notify(b("PagesEventType").BOOKING_ADMIN_CLICK_SENT_LIST,this.props.pageID)}.bind(this);var c=a.messageList;a.pageID;var d=a.userID;this.state=this.$2(a);this.lastMessageMap=new Map();this.$1=!0;this.lastMessageMap.set(d,this.$3(c))}a.prototype.$2=function(a){var b;a=((a=this)!=null?(a=a.state)!=null?a.dialogShown:a:a)||!1;b=((b=this)!=null?(b=b.state)!=null?b.selectedBookingStatus:b:b)||[];return{dialogShown:a,selectedBookingStatus:b}};a.prototype.UNSAFE_componentWillReceiveProps=function(a){var b=a.appointmentCount,c=a.messageList,d=a.pageID,e=a.userID;c=this.$3(c);var f=this.lastMessageMap.get(e);this.setState(this.$2(a));this.$4(f,c)?this.props.relay.refetch({pageID:d,userID:e,count:b},null,null,{force:!0}):(this.props.userID!==e||this.props.pageID!==d)&&(this.$1=!0);this.lastMessageMap.set(e,c)};a.prototype.$5=function(){var a;a=((a=this)!=null?(a=a.props)!=null?(a=a.appointments)!=null?(a=a.confirmed)!=null?a.edges:a:a:a:a)||[];return a.map(function(a){return a.node})};a.prototype.$6=function(){var a;a=((a=this)!=null?(a=a.props)!=null?(a=a.appointments)!=null?(a=a.requested)!=null?a.edges:a:a:a:a)||[];return a.map(function(a){return a.node})};a.prototype.$3=function(a){return a.length>0?a[a.length-1]:null};a.prototype.$4=function(a,b){if(b&&a!==b){b=((a=b)!=null?(a=a.attachments)!=null?(a=a[0])!=null?(a=a.share)!=null?(a=a.target)!=null?(a=a.requestMetadata)!=null?a.id:a:a:a:a:a:a)||((a=b)!=null?(a=a.log_message_data)!=null?(a=a.untypedData)!=null?a.request_id:a:a:a);return Boolean(b)}return!1};a.prototype.$9=function(a){if(a.length===0)return null;var c;a.length===1?c=i._({"*":"{user name} requested {number} appointments","_1":"{user name} requested 1 appointment"},[i._param("user name",this.props.appointments.user_name),i._plural(a.length,"number")]):c=i._({"*":"{number} appointment requests","_1":"1 appointment request"},[i._plural(a.length,"number")]);return b("React").createElement(k,{onClick:this.$7,status:i._("Respond"),title:c})};a.prototype.$10=function(a){__p&&__p();if(a.length===0)return null;var c,d;if(a.length===1){var e=a[0],f=e.suggested_time_range;f=b("ChatAppointmentUtil").renderDateTimeRange(f);c=e.status;d=e.booking_status}else f=i._({"*":"{number} appointments","_1":"1 appointment"},[i._plural(a.length,"number")]),c=i._("View");return b("React").createElement(k,{bookingStatus:d,onClick:this.$8,status:c,title:f})};a.prototype.$11=function(){if(!this.state.dialogShown)return null;var a=this.props.appointments,c=a.requested;a=a.confirmed;c=this.state.selectedBookingStatus.includes(b("PagesPlatformNativeBookingGraphQLStatus").REQUESTED)?c:a;return b("React").createElement(b("PagesManagerMessagingAppointmentDialog.react"),{appointments:c,causalElementRef:function(){return this}.bind(this),dialogShown:this.state.dialogShown,onToggle:function(a){return this.setState({dialogShown:a})}.bind(this),pageID:this.props.pageID,referrer:b("ServicesAppointmentReferrer").BANNER,viewer:b("PagesPlatformBookingMessageViewer").ADMIN})};a.prototype.render=function(){var a=this.$5(),c=this.$6();if(a.length===0&&c.length===0)return null;this.$1&&(b("PagesEventObserver").notify(b("PagesEventType").BOOKING_ADMIN_BANNER_IMPRESSION,this.props.pageID,{sent_count:a.length,requested_count:c.length}),this.$1=!1);return b("React").createElement("div",{className:"_1hgy",ref:function(a){a&&b("ReactDOM").findDOMNode(a)?b("PagesManagerMessagingMessagelistAction").setAppointmentBannerHeight(b("ReactDOM").findDOMNode(a).clientHeight):b("PagesManagerMessagingMessagelistAction").setAppointmentBannerHeight(0)}},this.$11(),this.$9(c),this.$10(a))};({appointments:function(){return b("PagesManagerMessagingAppointmentBannerContainerFragment_appointments.graphql")}});e.exports=c(a,{appointments:function(){return b("PagesManagerMessagingAppointmentBannerContainer_appointments.graphql")}},function(){return b("PagesManagerMessagingAppointmentBannerContainerRefetchQuery.graphql")})}),null);
__d("PagesManagerMessagingAppointmentBannerRoot.react",["PagesManagerMessagingAppointmentBannerContainer.react","React","RelayFBEnvironment","RelayModern","PagesManagerMessagingAppointmentBannerRootQuery.graphql"],(function(a,b,c,d,e,f){"use strict";__p&&__p();var g,h,i=b("RelayModern").QueryRenderer;b("RelayModern").graphql;var j=100;g=babelHelpers.inherits(a,b("React").Component);g&&g.prototype;a.prototype.render=function(){var a=this.props,c=a.messageList,d=a.pageID,e=a.userID,f=babelHelpers.objectWithoutProperties(a,["messageList","pageID","userID"]);return!d||!e?null:b("React").createElement(i,{environment:b("RelayFBEnvironment"),query:h||(h=function(){return b("PagesManagerMessagingAppointmentBannerRootQuery.graphql")}),render:function(a){var g=a.error;a=a.props;return!a||g?null:b("React").createElement(b("PagesManagerMessagingAppointmentBannerContainer.react"),babelHelpers["extends"]({},f,{appointmentCount:j,appointments:a.user,messageList:c,pageID:d,userID:e}))},variables:{count:j,pageID:d,userID:e}})};function a(){g.apply(this,arguments)}e.exports=a}),null);
__d("PagesManagerNavigationUnit",["invariant"],(function(a,b,c,d,e,f,g){"use strict";__p&&__p();function a(a){this.$1=a}a.prototype.getDisplayTitle=function(){g(0)};a.prototype.getKey=function(){return this.$1};a.prototype.getNotificationCount=function(a,b){return 0};e.exports=a}),null);
__d("PagesManagerMessagingAllNavigationUnit",["fbt","PagesManagerMessagingNavigationUnitKey","PagesManagerNavigationUnit"],(function(a,b,c,d,e,f,g){"use strict";var h;c=babelHelpers.inherits(a,b("PagesManagerNavigationUnit"));h=c&&c.prototype;function a(){h.constructor.call(this,b("PagesManagerMessagingNavigationUnitKey").FILTERS.ALL)}a.prototype.getDisplayTitle=function(){return g._("All")};e.exports=a}),null);
__d("PagesManagerMessagingFolderNavigationUnit",["invariant","immutable","PagesManagerMessagingNavigationUnitKey","PagesManagerNavigationUnit"],(function(a,b,c,d,e,f,g){"use strict";__p&&__p();var h,i=b("immutable").List;h=babelHelpers.inherits(a,b("PagesManagerNavigationUnit"));h&&h.prototype;a.prototype.getSupportedFilterKeys=function(){return i([b("PagesManagerMessagingNavigationUnitKey").FILTERS.ALL])};a.prototype.assertSupportsFilter=function(a){this.getSupportedFilterKeys().indexOf(a.getKey())>=0||g(0)};function a(){h.apply(this,arguments)}e.exports=a}),null);
__d("PagesManagerMessagingArchiveNavigationUnit",["fbt","PagesManagerMessagingFolderNavigationUnit","PagesManagerMessagingNavigationUnitKey"],(function(a,b,c,d,e,f,g){"use strict";var h;c=babelHelpers.inherits(a,b("PagesManagerMessagingFolderNavigationUnit"));h=c&&c.prototype;function a(){h.constructor.call(this,b("PagesManagerMessagingNavigationUnitKey").FOLDERS.ARCHIVED)}a.prototype.getDisplayTitle=function(){return g._("Archived")};e.exports=a}),null);
__d("PagesManagerMessagingDoneNavigationUnit",["fbt","PagesManagerMessagingFolderNavigationUnit","PagesManagerMessagingNavigationUnitKey"],(function(a,b,c,d,e,f,g){"use strict";var h;c=babelHelpers.inherits(a,b("PagesManagerMessagingFolderNavigationUnit"));h=c&&c.prototype;function a(){h.constructor.call(this,b("PagesManagerMessagingNavigationUnitKey").FOLDERS.PAGE_BACKGROUND)}a.prototype.getDisplayTitle=function(){return g._("Done")};e.exports=a}),null);
__d("PagesManagerMessagingFlaggedNavigationUnit",["fbt","PagesManagerMessagingNavigationUnitKey","PagesManagerNavigationUnit"],(function(a,b,c,d,e,f,g){"use strict";var h;c=babelHelpers.inherits(a,b("PagesManagerNavigationUnit"));h=c&&c.prototype;function a(){h.constructor.call(this,b("PagesManagerMessagingNavigationUnitKey").FILTERS.FLAGGED)}a.prototype.getDisplayTitle=function(){return g._("Flagged")};e.exports=a}),null);
__d("PagesManagerMessagingUnreadCountHelper",["MercuryUnreadState"],(function(a,b,c,d,e,f){"use strict";a={getUnreadCount:function(a,c){a=b("MercuryUnreadState").getForFBID(a);var d=a.exceedsMaxCount(c);return d?0:a.getUnreadCount(c)}};e.exports=a}),null);
__d("PagesManagerMessagingInboxNavigationUnit",["fbt","immutable","PagesManagerMessagingFolderNavigationUnit","PagesManagerMessagingNavigationUnitKey","PagesManagerMessagingUnreadCountHelper"],(function(a,b,c,d,e,f,g){"use strict";__p&&__p();var h,i=b("immutable").List;c=babelHelpers.inherits(a,b("PagesManagerMessagingFolderNavigationUnit"));h=c&&c.prototype;function a(){h.constructor.call(this,b("PagesManagerMessagingNavigationUnitKey").FOLDERS.INBOX)}a.prototype.getDisplayTitle=function(){return g._("Inbox")};a.prototype.getSupportedFilterKeys=function(){return i([b("PagesManagerMessagingNavigationUnitKey").FILTERS.ALL,b("PagesManagerMessagingNavigationUnitKey").FILTERS.UNREAD,b("PagesManagerMessagingNavigationUnitKey").FILTERS.FLAGGED])};a.prototype.getNotificationCount=function(a,c){return b("PagesManagerMessagingUnreadCountHelper").getUnreadCount(a,this.getKey())};e.exports=a}),null);
__d("PagesManagerMessagingSpamNavigationUnit",["fbt","PagesManagerMessagingFolderNavigationUnit","PagesManagerMessagingNavigationUnitKey"],(function(a,b,c,d,e,f,g){"use strict";var h;c=babelHelpers.inherits(a,b("PagesManagerMessagingFolderNavigationUnit"));h=c&&c.prototype;function a(){h.constructor.call(this,b("PagesManagerMessagingNavigationUnitKey").FOLDERS.SPAM)}a.prototype.getDisplayTitle=function(){return g._("Spam")};e.exports=a}),null);
__d("PagesManagerMessagingUnreadNavigationUnit",["fbt","PagesManagerMessagingNavigationUnitKey","PagesManagerMessagingUnreadCountHelper","PagesManagerNavigationUnit"],(function(a,b,c,d,e,f,g){"use strict";__p&&__p();var h;c=babelHelpers.inherits(a,b("PagesManagerNavigationUnit"));h=c&&c.prototype;function a(){h.constructor.call(this,b("PagesManagerMessagingNavigationUnitKey").FILTERS.UNREAD)}a.prototype.getDisplayTitle=function(){return g._("Unread")};a.prototype.getNotificationCount=function(a,c){return c.activeFolder.getKey()!==b("PagesManagerMessagingNavigationUnitKey").FOLDERS.INBOX?0:b("PagesManagerMessagingUnreadCountHelper").getUnreadCount(a,c.activeFolder.getKey())};e.exports=a}),null);
__d("PagesManagerMessagingFilterStore",["invariant","FluxStore","MessageThreadViewSource","MessagingTag","PagesManagerActionType","PagesManagerDispatcher","PagesManagerMessagingAllNavigationUnit","PagesManagerMessagingArchiveNavigationUnit","PagesManagerMessagingDoneNavigationUnit","PagesManagerMessagingFlaggedNavigationUnit","PagesManagerMessagingInboxNavigationUnit","PagesManagerMessagingLogger","PagesManagerMessagingNavigationUnitKey","PagesManagerMessagingSearchStore","PagesManagerMessagingSpamNavigationUnit","PagesManagerMessagingUnreadNavigationUnit","immutable"],(function(a,b,c,d,e,f,g){"use strict";__p&&__p();var h,i="inbox|all|";c=babelHelpers.inherits(a,b("FluxStore"));h=c&&c.prototype;function a(){__p&&__p();h.constructor.call(this,b("PagesManagerDispatcher"));var a=new(b("PagesManagerMessagingInboxNavigationUnit"))(),c=new(b("PagesManagerMessagingArchiveNavigationUnit"))(),d=new(b("PagesManagerMessagingSpamNavigationUnit"))();this.$PagesManagerMessagingFilterStore2=b("immutable").List([a,c,d]);this.$PagesManagerMessagingFilterStore8=new(b("PagesManagerMessagingAllNavigationUnit"))();var e=new(b("PagesManagerMessagingUnreadNavigationUnit"))();this.$PagesManagerMessagingFilterStore1=b("immutable").List([this.$PagesManagerMessagingFilterStore8,e,new(b("PagesManagerMessagingFlaggedNavigationUnit"))()]);this.$PagesManagerMessagingFilterStore4=this.$PagesManagerMessagingFilterStore2.first();this.$PagesManagerMessagingFilterStore5=this.getFilterByKey(this.$PagesManagerMessagingFilterStore4.getSupportedFilterKeys().first());this.$PagesManagerMessagingFilterStore7=!1;this.$PagesManagerMessagingFilterStore6=!1;this.$PagesManagerMessagingFilterStore3=[a,e,c,d]}a.prototype.enableDoneFolder=function(a){if(!a)return;if(this.$PagesManagerMessagingFilterStore2.some(function(a){return a instanceof b("PagesManagerMessagingDoneNavigationUnit")}))return;a=new(b("PagesManagerMessagingDoneNavigationUnit"))();this.$PagesManagerMessagingFilterStore2=this.$PagesManagerMessagingFilterStore2.push(a);var c=this.$PagesManagerMessagingFilterStore3[0],d=this.$PagesManagerMessagingFilterStore3[1],e=this.$PagesManagerMessagingFilterStore3[2],f=this.$PagesManagerMessagingFilterStore3[3];this.$PagesManagerMessagingFilterStore3=[c,d,e,a,f]};a.prototype.$PagesManagerMessagingFilterStore9=function(a,b){a=a.filter(function(a){return a.getKey()===b});a.size>0||g(0);return a.first()};a.prototype.$PagesManagerMessagingFilterStore10=function(a,c){b("PagesManagerMessagingLogger").logMessagesSectionViewEvent(a,c.getKey()),b("PagesManagerMessagingLogger").logPageViewFolderEvent(a,c,b("MessageThreadViewSource").NEW_MESSAGETAB),this.$PagesManagerMessagingFilterStore4=c,this.$PagesManagerMessagingFilterStore5=this.getFilterByKey(c.getSupportedFilterKeys().first()),this.__emitChange()};a.prototype.$PagesManagerMessagingFilterStore11=function(a,c){c.getKey()===b("MessagingTag").UNREAD?(this.$PagesManagerMessagingFilterStore5=c,this.$PagesManagerMessagingFilterStore4=this.$PagesManagerMessagingFilterStore2.first()):(this.$PagesManagerMessagingFilterStore4.assertSupportsFilter(c),this.$PagesManagerMessagingFilterStore5=c),this.__emitChange()};a.prototype.getFilterByKey=function(a){return this.$PagesManagerMessagingFilterStore9(this.$PagesManagerMessagingFilterStore1,a)};a.prototype.getAvailableFolders=function(){return this.$PagesManagerMessagingFilterStore2};a.prototype.getAvailableFilters=function(){return b("immutable").List(this.$PagesManagerMessagingFilterStore1.filter(function(a){return this.getActiveFolder().getSupportedFilterKeys().indexOf(a.getKey())>=0}.bind(this)))};a.prototype.getActiveFolder=function(){return this.$PagesManagerMessagingFilterStore4};a.prototype.getActiveFilter=function(){var a=b("PagesManagerMessagingSearchStore").getCurrentSearchCustomTagNames();return this.$PagesManagerMessagingFilterStore6||a.size!==0&&this.$PagesManagerMessagingFilterStore5.getKey()!==b("PagesManagerMessagingNavigationUnitKey").FILTERS.FLAGGED?this.$PagesManagerMessagingFilterStore8:this.$PagesManagerMessagingFilterStore5};a.prototype.getActiveFolderName=function(){return this.getActiveFolder().getKey()};a.prototype.getActiveFilterName=function(){return this.getActiveFilter().getKey()};a.prototype.getFolderDropDown=function(){if(this.getActiveFilterName()===b("MessagingTag").UNREAD)return this.$PagesManagerMessagingFilterStore2;else{var a=this.$PagesManagerMessagingFilterStore3.filter(function(a){return a.getKey()!==this.$PagesManagerMessagingFilterStore4.getKey()}.bind(this));return b("immutable").List(a)}};a.prototype.getActiveFolderDropDown=function(){if(this.getActiveFilterName()===b("MessagingTag").UNREAD)return this.$PagesManagerMessagingFilterStore5;else return this.$PagesManagerMessagingFilterStore4};a.prototype.getUnitNotificationCountMap=function(a){var b=new Map(),c=function(c){return b.set(c,c.getNotificationCount(a,{activeFolder:this.getActiveFolder(),activeFilter:this.getActiveFilter()}))}.bind(this);this.getAvailableFolders().map(c);this.getAvailableFilters().map(c);return b};a.prototype.getNavigationKey=function(){return this.getActiveFolderName()+"|"+this.getActiveFilterName()+"|"+(b("PagesManagerMessagingSearchStore").getCustomTagsFilterName()||"")};a.prototype.getIsInboxAll=function(){return this.getNavigationKey()===i};a.prototype.getIsFiltering=function(){return this.$PagesManagerMessagingFilterStore7};a.prototype.__onDispatch=function(a){__p&&__p();switch(a.type){case b("PagesManagerActionType").NAVIGATION_UNIT.CHANGE:this.getAvailableFolders().indexOf(a.unit)>=0?this.$PagesManagerMessagingFilterStore10(a.pageID,a.unit):this.$PagesManagerMessagingFilterStore11(a.pageID,a.unit);break;case b("PagesManagerActionType").NAVIGATION_UNIT.NOTIFICATION_COUNT_CHANGE:this.__emitChange();break;case b("PagesManagerActionType").SEARCH.ADD_SEARCH_CUSTOM_TAG:case b("PagesManagerActionType").SEARCH.REMOVE_SEARCH_CUSTOM_TAG:case b("PagesManagerActionType").SEARCH.CHANGE_SEARCH_TERM:b("PagesManagerDispatcher").waitFor([b("PagesManagerMessagingSearchStore").getDispatchToken()]);var c=b("PagesManagerMessagingSearchStore").getCurrentSearchTerm()!=="";this.$PagesManagerMessagingFilterStore7=!1;this.$PagesManagerMessagingFilterStore6!==c&&(this.$PagesManagerMessagingFilterStore6=c,this.__emitChange());break;case b("PagesManagerActionType").FILTER_PANEL.TOGGLE_PANEL:this.$PagesManagerMessagingFilterStore7=a.showPanel,this.__emitChange()}};a.__moduleID=e.id;e.exports=new a()}),null);
__d("XPagesCustomTagMessageThreadCountsController",["XController"],(function(a,b,c,d,e,f){e.exports=b("XController").create("/pages/custom_tags/message_thread_counts/",{intersect_custom_tags:{type:"StringVector",defaultValue:[]},folder:{type:"String",defaultValue:"inbox"},key:{type:"String",required:!0},enum_tag:{type:"Enum",enumType:1}})}),null);
__d("PagesManagerMessagingSearchStore",["ActorURI","AsyncRequest","FluxStore","MercurySearchSnippetResults","MercurySearchThreadResultOrderer","MercurySearchThreadResults","MercurySearchThreadsStrategy","PageMessageEnumTag","PagesManagerCustomTagsActionType","PagesManagerCustomTagsStore","PagesManagerDispatcher","PagesManagerMessagingActionType","PagesManagerMessagingFilterStore","PagesManagerMessagingNavigationUnitKey","PagesManagerMessagingThreadlistAction","PagesMessagingSearchMode","PagesMessengerThreadUtils","XPagesCustomTagMessageThreadCountsController","emptyFunction","guid","immutable"],(function(a,b,c,d,e,f){"use strict";__p&&__p();var g;c=babelHelpers.inherits(a,b("FluxStore"));g=c&&c.prototype;function a(){g.constructor.call(this,b("PagesManagerDispatcher")),this.$PagesManagerMessagingSearchStore2="",this.$PagesManagerMessagingSearchStore3=!1,this.$PagesManagerMessagingSearchStore4=!1,this.$PagesManagerMessagingSearchStore5=!1,this.$PagesManagerMessagingSearchStore6=!1,this.$PagesManagerMessagingSearchStore7=!1,this.$PagesManagerMessagingSearchStore8="",this.$PagesManagerMessagingSearchStore10=[],this.$PagesManagerMessagingSearchStore11={},this.$PagesManagerMessagingSearchStore1=[],this.$PagesManagerMessagingSearchStore9=b("PagesMessagingSearchMode").NONE,this.$PagesManagerMessagingSearchStore12={}}a.prototype.getCurrentSearchTerm=function(){return this.$PagesManagerMessagingSearchStore2};a.prototype.getIsInSearchMode=function(){return this.$PagesManagerMessagingSearchStore5};a.prototype.getSearchMode=function(){return this.$PagesManagerMessagingSearchStore9};a.prototype.getThreadNameSearchResults=function(){return this.$PagesManagerMessagingSearchStore10};a.prototype.getThreadSnippetSearchResults=function(){return this.$PagesManagerMessagingSearchStore11};a.prototype.getIsSearchingName=function(){return this.$PagesManagerMessagingSearchStore6};a.prototype.getIsSearchingSnippet=function(){return this.$PagesManagerMessagingSearchStore7};a.prototype.hasMoreNameSearchResult=function(){return this.$PagesManagerMessagingSearchStore3};a.prototype.hasMoreSnippetSearchResult=function(){return this.$PagesManagerMessagingSearchStore4};a.prototype.getCurrentSearchCustomTagNames=function(){return b("immutable").List(this.$PagesManagerMessagingSearchStore1)};a.prototype.getCustomTagsFilterName=function(){return this.$PagesManagerMessagingSearchStore1.length===0?null:b("PagesMessengerThreadUtils").getCustomTagsFilter(this.$PagesManagerMessagingSearchStore1,b("PagesManagerMessagingFilterStore").getActiveFilterName()===b("PagesManagerMessagingNavigationUnitKey").FILTERS.FLAGGED)};a.prototype.getCurrentSearchCustomTagThreadCounts=function(){var a=this.$PagesManagerMessagingSearchStore13();return!a||!(a in this.$PagesManagerMessagingSearchStore12)?null:b("immutable").OrderedMap(this.$PagesManagerMessagingSearchStore12[a])};a.prototype.$PagesManagerMessagingSearchStore14=function(a,b){return a+"|"+b};a.prototype.$PagesManagerMessagingSearchStore13=function(){return this.$PagesManagerMessagingSearchStore14(b("PagesManagerMessagingFilterStore").getActiveFolderName(),this.getCustomTagsFilterName()||"")};a.prototype.$PagesManagerMessagingSearchStore15=function(a){var c=this.$PagesManagerMessagingSearchStore13();if(!c||c in this.$PagesManagerMessagingSearchStore12)return;new(b("AsyncRequest"))().setURI(b("ActorURI").create(b("XPagesCustomTagMessageThreadCountsController").getURIBuilder().setStringVector("intersect_custom_tags",this.$PagesManagerMessagingSearchStore1).setEnum("enum_tag",b("PagesManagerMessagingFilterStore").getActiveFilterName()===b("PagesManagerMessagingNavigationUnitKey").FILTERS.FLAGGED?b("PageMessageEnumTag").FLAG:null).setString("folder",b("PagesManagerMessagingFilterStore").getActiveFolderName()).setString("key",this.$PagesManagerMessagingSearchStore13()).getURI(),a)).setHandler(function(a){var c=a.payload.threadCounts,d=Object.keys(c).sort(function(a,b){return c[b]-c[a]}),e=new Map();d.map(function(a){e.set(a,c[a])});this.__dispatcher.isDispatching()?(this.$PagesManagerMessagingSearchStore12[a.payload.key]=e,a.payload.key===this.$PagesManagerMessagingSearchStore13()&&this.__emitChange()):this.__dispatcher.dispatch({type:b("PagesManagerMessagingActionType").SEARCH.UPDATE_CUSTOM_TAG_THREAD_COUNTS,key:a.payload.key,threadCounts:e})}.bind(this)).send()};a.prototype.__onDispatch=function(a){__p&&__p();switch(a.type){case b("PagesManagerMessagingActionType").SEARCH.CHANGE_SEARCH_TERM:this.$PagesManagerMessagingSearchStore2=a.searchTerm;this.$PagesManagerMessagingSearchStore2===""?(this.$PagesManagerMessagingSearchStore10=[],this.$PagesManagerMessagingSearchStore5=!1,this.$PagesManagerMessagingSearchStore9=b("PagesMessagingSearchMode").NONE):(this.$PagesManagerMessagingSearchStore5=!0,this.$PagesManagerMessagingSearchStore9=a.searchMode,this.$PagesManagerMessagingSearchStore16(a.pageID,a.searchTerm,a.activeFolder,a.searchMode));this.__emitChange();break;case b("PagesManagerMessagingActionType").MESSAGE_SEARCH.NAME_SEARCH_UPDATE:this.$PagesManagerMessagingSearchStore6=a.isSearching;this.__emitChange();break;case b("PagesManagerMessagingActionType").MESSAGE_SEARCH.SNIPPET_SEARCH_UPDATE:this.$PagesManagerMessagingSearchStore7=a.isSearching;this.__emitChange();break;case b("PagesManagerMessagingActionType").MESSAGE_SEARCH.LOAD_MORE_NAME_RESULT:this.$PagesManagerMessagingSearchStore17(a.pageID,a.searchTerm,a.activeFolder);this.__emitChange();break;case b("PagesManagerMessagingActionType").MESSAGE_SEARCH.LOAD_MORE_SNIPPET_RESULT:this.$PagesManagerMessagingSearchStore18(a.pageID,a.searchTerm,a.activeFolder);this.__emitChange();break;case b("PagesManagerMessagingActionType").SEARCH.ADD_SEARCH_CUSTOM_TAG:b("PagesManagerDispatcher").waitFor([b("PagesManagerCustomTagsStore").getDispatchToken()]);var c=b("PagesManagerCustomTagsStore").hasCustomTag(a.pageID,a.tagName);c&&this.$PagesManagerMessagingSearchStore1.indexOf(a.tagName)<0&&(this.$PagesManagerMessagingSearchStore2="",this.$PagesManagerMessagingSearchStore5=!1,this.$PagesManagerMessagingSearchStore1.push(a.tagName),this.__emitChange());break;case b("PagesManagerMessagingActionType").SEARCH.REMOVE_SEARCH_CUSTOM_TAG:case b("PagesManagerCustomTagsActionType").DELETE:c=this.$PagesManagerMessagingSearchStore1.indexOf(a.tagName);c>=0&&(this.$PagesManagerMessagingSearchStore1.splice(c,1),this.__emitChange());break;case b("PagesManagerMessagingActionType").SEARCH.FETCH_CUSTOM_TAG_THREAD_COUNTS:this.$PagesManagerMessagingSearchStore15(a.pageID);break;case b("PagesManagerCustomTagsActionType").UPDATE:a.hasTagListChanged&&(this.$PagesManagerMessagingSearchStore12={},this.$PagesManagerMessagingSearchStore15(a.pageID));this.__emitChange();break;case b("PagesManagerMessagingActionType").SEARCH.UPDATE_CUSTOM_TAG_THREAD_COUNTS:this.$PagesManagerMessagingSearchStore12[a.key]=a.threadCounts;a.key===this.$PagesManagerMessagingSearchStore13()&&this.__emitChange();break}};a.prototype.$PagesManagerMessagingSearchStore16=function(a,c,d,e){__p&&__p();var f=b("guid")();this.$PagesManagerMessagingSearchStore8=f;var g=b("MercurySearchThreadsStrategy").getForFBID(a),h=b("MercurySearchSnippetResults").getForFBID(a),i=b("MercurySearchThreadResultOrderer").getForFBID(a);(e===b("PagesMessagingSearchMode").ALL||e===b("PagesMessagingSearchMode").NAME_SEARCH)&&(this.$PagesManagerMessagingSearchStore6=!0,g.search(c,function(a){this.$PagesManagerMessagingSearchStore10=i.filterThreadsInFolder(a,d),this.__emitChange()}.bind(this),function(a,c){if(f!==this.$PagesManagerMessagingSearchStore8)return;a=i.filterThreadsInFolder(a,d);this.$PagesManagerMessagingSearchStore10=i.orderResults(this.$PagesManagerMessagingSearchStore10,[],a,d);this.$PagesManagerMessagingSearchStore3=!c;this.__dispatcher.isDispatching()?(this.$PagesManagerMessagingSearchStore6=!1,this.__emitChange()):b("PagesManagerMessagingThreadlistAction").changeIsSearchingNameStatus(!1)}.bind(this),b("emptyFunction")));(e===b("PagesMessagingSearchMode").ALL||e===b("PagesMessagingSearchMode").MESSAGE_SEARCH)&&(this.$PagesManagerMessagingSearchStore7=!0,h.getAllThreadSearchResults(c,function(a,c,e){this.$PagesManagerMessagingSearchStore11=this.$PagesManagerMessagingSearchStore19(c,a,d),this.$PagesManagerMessagingSearchStore4=!e,this.__dispatcher.isDispatching()?(this.$PagesManagerMessagingSearchStore7=!1,this.__emitChange()):b("PagesManagerMessagingThreadlistAction").changeIsSearchingSnippetStatus(!1)}.bind(this,i)));this.__emitChange()};a.prototype.$PagesManagerMessagingSearchStore19=function(a,b,c){var d=Object.keys(a);b=b.filterThreadsInFolder(d,c);var e={};b.forEach(function(b){e[b]=a[b]});return e};a.prototype.$PagesManagerMessagingSearchStore17=function(a,c,d){var e=b("MercurySearchThreadResults").getForFBID(a),f=b("MercurySearchThreadResultOrderer").getForFBID(a);this.$PagesManagerMessagingSearchStore6=!0;e.getMoreThreadlist(c,function(a,c){c=f.filterThreadsInFolder(a,d);this.$PagesManagerMessagingSearchStore10=c;this.__dispatcher.isDispatching()?(this.$PagesManagerMessagingSearchStore6=!1,this.__emitChange()):b("PagesManagerMessagingThreadlistAction").changeIsSearchingNameStatus(!1)}.bind(this))};a.prototype.$PagesManagerMessagingSearchStore18=function(a,c,d){var e=b("MercurySearchSnippetResults").getForFBID(a);a=b("MercurySearchThreadResultOrderer").getForFBID(a);e.getAllThreadSearchMoreResults(c,function(a,c,e){this.$PagesManagerMessagingSearchStore4=!e,this.$PagesManagerMessagingSearchStore11=this.$PagesManagerMessagingSearchStore19(c,a,d),this.__dispatcher.isDispatching()?(this.$PagesManagerMessagingSearchStore7=!1,this.__emitChange()):b("PagesManagerMessagingThreadlistAction").changeIsSearchingSnippetStatus(!1)}.bind(this,a))};a.__moduleID=e.id;e.exports=new a()}),null);
__d("PagesManagerMessagingTabPerfEvents",[],(function(a,b,c,d,e,f){e.exports=Object.freeze({MESSAGE_TAB_WILL_RENDER:"message_tab_will_render",MESSAGE_TAB_APP_DID_RENDER:"message_tab_app_did_render",MESSAGE_TAB_THREAD_LIST_DID_RENDER:"message_tab_thread_list_did_render",MESSAGE_TAB_DETAIL_VIEW_DID_RENDER:"message_tab_detail_view_did_render",OLD_MESSAGE_TAB_WILL_RENDER:"old_message_tab_will_render",OLD_MESSAGE_TAB_DID_RENDER:"old_message_tab_did_render"})}),null);
__d("PagesManagerMessagingFilterActions",["PagesManagerActionType","PagesManagerDispatcher","PagesManagerMessagingThreadlistAction"],(function(a,b,c,d,e,f){"use strict";a={changeFilter:function(a,c){b("PagesManagerDispatcher").dispatch({unit:c,pageID:a,type:b("PagesManagerActionType").NAVIGATION_UNIT.CHANGE}),b("PagesManagerMessagingThreadlistAction").resetSearch(a)},notifyNotificationCountChanged:function(a){b("PagesManagerDispatcher").dispatch({pageID:a,type:b("PagesManagerActionType").NAVIGATION_UNIT.NOTIFICATION_COUNT_CHANGE})},toggleFilterPanel:function(a,c){b("PagesManagerDispatcher").dispatch({pageID:a,showPanel:c,type:b("PagesManagerActionType").FILTER_PANEL.TOGGLE_PANEL})}};e.exports=a}),null);
__d("PagesManagerMessagingThreadlistStore",["AbstractPagesManagerListStore","MercuryPageOrderedThreadlist","MercuryThreadlistConstants","PagesManagerActionType","PagesManagerDispatcher","PagesManagerMessagingFilterStore","PagesManagerMessagingSearchStore"],(function(a,b,c,d,e,f){__p&&__p();var g;c=babelHelpers.inherits(a,b("AbstractPagesManagerListStore"));g=c&&c.prototype;function a(){"use strict";g.constructor.call(this,b("PagesManagerDispatcher"))}a.prototype.__onDispatch=function(a){"use strict";switch(a.type){case b("PagesManagerActionType").LIST.FETCH:this.__handleListFetch(a);break;case b("PagesManagerActionType").LIST.LOADING:this.__isLoading=!0;this.__emitChange();break;default:g.__onDispatch.call(this,a)}};a.prototype.$PagesManagerMessagingThreadlistStore1=function(){"use strict";return b("PagesManagerMessagingSearchStore").getCustomTagsFilterName()||b("PagesManagerMessagingFilterStore").getActiveFilterName()};a.prototype.$PagesManagerMessagingThreadlistStore2=function(a,c){"use strict";a=b("MercuryPageOrderedThreadlist").getForFBID(a);return a.hasLoadedThreadlist(b("PagesManagerMessagingFilterStore").getActiveFolderName(),this.$PagesManagerMessagingThreadlistStore1())||a.getThreadCount(b("PagesManagerMessagingFilterStore").getActiveFolderName(),this.$PagesManagerMessagingThreadlistStore1())>=c};a.prototype.$PagesManagerMessagingThreadlistStore3=function(a,c,d){"use strict";a=b("MercuryPageOrderedThreadlist").getForFBID(a);a.getFilteredThreadlist(c,d+1,b("PagesManagerMessagingFilterStore").getActiveFolderName(),this.$PagesManagerMessagingThreadlistStore1(),function(a){a=a.length>d;this.$PagesManagerMessagingThreadlistStore4(a)}.bind(this))};a.prototype.$PagesManagerMessagingThreadlistStore5=function(a){"use strict";a=b("MercuryPageOrderedThreadlist").getForFBID(a);return a.getAvailableThreadlistNow(b("PagesManagerMessagingFilterStore").getActiveFolderName(),this.$PagesManagerMessagingThreadlistStore1())};a.prototype.__handleListFetch=function(a){"use strict";var c=a.pageID,d=a.offset;a=a.limit;this.__isLoading=!0;var e=this.$PagesManagerMessagingThreadlistStore2(c,d+a);e?this.$PagesManagerMessagingThreadlistStore4(!!this.__hasMoreItem.get(b("PagesManagerMessagingFilterStore").getNavigationKey())):this.$PagesManagerMessagingThreadlistStore3(c,d,a);this.__emitChange()};a.prototype.__handleNavigationUnitChange=function(a){"use strict";b("PagesManagerDispatcher").waitFor([b("PagesManagerMessagingFilterStore").getDispatchToken(),b("PagesManagerMessagingSearchStore").getDispatchToken()]);if(this.__isPriorityEnabled&&b("PagesManagerMessagingFilterStore").getIsInboxAll())return;this.__handleListFetch({pageID:a.pageID,offset:0,limit:b("MercuryThreadlistConstants").WEBMESSENGER_THREAD_COUNT})};a.prototype.$PagesManagerMessagingThreadlistStore4=function(a){"use strict";this.__isLoading=!1,this.__hasMoreItem.set(b("PagesManagerMessagingFilterStore").getNavigationKey(),a),this.__dispatcher.isDispatching()||this.__dispatcher.dispatch({type:b("PagesManagerActionType").LIST.FETCHED})};a.prototype.getItemList=function(a){"use strict";a=this.$PagesManagerMessagingThreadlistStore5(a);var c=b("PagesManagerMessagingFilterStore").getNavigationKey();return this.hasMoreItem(c)&&a.length>0?a.slice(0,a.length-1):a};e.exports=new a()}),null);
__d("PagesMessagingActionPlacement",[],(function(a,b,c,d,e,f){e.exports=Object.freeze({SPRINGBOARD_INLINE_ACTION:"springboard_inline_action",THREAD_LIST_BATCH_ACTION:"thread_list_batch_action",THREAD_ROW_ACTION_ICON:"thread_row_action_icon",MESSAGE_DIALOG_ACTION_LIST:"message_dialog_action_list",MESSAGE_DIALOG_OPENING:"message_dialog_opening",MESSAGE_DIALOG_SHOWN:"message_dialog_shown",THREAD_TITLE_BAR:"thread_title_bar",HOME_PAGE_PAGELET_INLINE_ACTION:"home_page_pagelet_inline_action",UNKNOWN:"unknown"})}),null);
__d("PagesManagerMessagingThreadInteractionHelper",["MercuryPageThreadActions","MercuryThreadIDMap","MessagingTag","MessengerState.bs","PagesManagerMessagingFilterActions","PagesManagerMessagingFilterStore","PagesManagerMessagingMessagelistStore","PagesManagerMessagingNavigationUnitKey","PagesManagerMessagingThreadlistStore","PagesManagerStore","PagesMessagingActionPlacement","URI"],(function(a,b,c,d,e,f){"use strict";__p&&__p();var g={_getPermalinkURI:function(a,c){var d=b("MercuryThreadIDMap").getForFBID(c).getServerIDFromClientIDNow(a),e=b("URI").getRequestURI();c=b("MessengerState.bs").getThreadMetaNow(c,a);e.addQueryData({threadid:d,timestamp:c?c.timestamp:null});return e},_clearURLParam:function(){var a=b("URI").getRequestURI();a.removeQueryData("threadid");a.removeQueryData("timestamp");window.history.replaceState({},null,a)},handlePermalinkUpdate:function(a,b){if(!a){this._clearURLParam();return}a=g._getPermalinkURI(a,b);window.history.replaceState({},null,a)},handleUnreadStateUpdate:function(a,c,d){var e=b("PagesManagerStore").getViewingListItem();if(!e)return;var f=b("MessengerState.bs").getThreadMetaNow(c,e.toString()),g=b("PagesManagerMessagingMessagelistStore").getMessagelist(c,e.toString()),h=b("PagesManagerMessagingThreadlistStore").getItemList(c,d).length,i=b("MercuryPageThreadActions").getForFBID(c);(f&&f.unread_count>0||g.length>0)&&(d===b("MessagingTag").UNREAD&&h>1&&a!==e?i.markRead(e,b("PagesMessagingActionPlacement").MESSAGE_DIALOG_SHOWN):d===b("MessagingTag").UNREAD&&h===1?(i.markRead(a,b("PagesMessagingActionPlacement").MESSAGE_DIALOG_SHOWN),b("PagesManagerMessagingFilterActions").changeFilter(c,b("PagesManagerMessagingFilterStore").getFilterByKey(b("PagesManagerMessagingNavigationUnitKey").FILTERS.ALL))):d!==b("MessagingTag").UNREAD&&i.markRead(a,b("PagesMessagingActionPlacement").MESSAGE_DIALOG_SHOWN))}};e.exports=g}),null);
__d("PagesManagerMessagingBatchActionMenu.react",["cx","fbt","invariant","AsyncRequest","InsightsInfoTip.react","MercuryPageThreadActions","PagesAdminToolUIActionType","PagesManagerAction","PagesManagerLogger","PagesManagerMessagingMessagelistAction","PagesMessagingActionPlacement","PagesMessengerActions","PopoverMenu.react","React","ReactXUIMenu","SimpleXUIDialog","XPagesBanUserDataController","XUIDialogButton.react","XUIDialogCancelButton.react","XUIText.react"],(function(a,b,c,d,e,f,g,h,i){__p&&__p();var j,k=b("ReactXUIMenu").Item;c=babelHelpers.inherits(a,b("React").Component);j=c&&c.prototype;function a(a){"use strict";j.constructor.call(this,a),this.$1=b("MercuryPageThreadActions").getForFBID(a.pageID)}a.prototype.$2=function(event,a){"use strict";__p&&__p();a=a.item.getValue();b("PagesManagerLogger").logMessageInboxUIAction(b("PagesAdminToolUIActionType").MESSAGE_INBOX_CLICK_MENU_ACTION,this.props.pageID,{menu_action:a,position:this.props.placement});var c=null,d=!1;switch(a){case b("PagesMessengerActions").FLAG:c=this.$1.batchAddFlag;break;case b("PagesMessengerActions").UNFLAG:c=this.$1.batchRemoveFlag;break;case b("PagesMessengerActions").MARK_AS_SPAM:c=this.$1.batchMarkSpam;d=!0;break;case b("PagesMessengerActions").MARK_AS_DONE:c=this.$1.batchChangeFolderToBackground;d=!0;break;case b("PagesMessengerActions").MARK_AS_UNSPAM:c=this.$1.batchUnmarkSpam;d=!0;break;case b("PagesMessengerActions").MOVE_TO_INBOX:c=this.$1.batchChangeFolderToInbox;d=!0;break;case b("PagesMessengerActions").MARK_AS_READ:c=this.$1.batchMarkRead;break;case b("PagesMessengerActions").MARK_AS_UNREAD:c=this.$1.batchMarkUnread;break;case b("PagesMessengerActions").ARCHIVE:c=this.$1.batchArchive;d=!0;break;case b("PagesMessengerActions").UNARCHIVE:c=this.$1.batchUnarchive;d=!0;break;case b("PagesMessengerActions").DELETE_THREAD:this.$3();return;case b("PagesMessengerActions").HIDE_CONTEXT_CARD:this.$4();return;case b("PagesMessengerActions").SHOW_CONTEXT_CARD:this.$5();return;case b("PagesMessengerActions").SHOW_BAN_FROM_PAGE:this.$6();return;default:i(0)}c&&c.call(this.$1,this.props.selectedRows,this.props.placement);b("PagesManagerAction").deselectAll();d===!0&&b("PagesManagerAction").viewListItem(null);this.props.onSelectionClear&&this.props.onSelectionClear()};a.prototype.$3=function(){"use strict";var a=this.props.selectedRows.length,c=h._("Delete Messages");a=h._("Are you sure you want to delete {number of messages}?",[h._param("number of messages",b("React").createElement("span",{className:"_50f7"},h._({"*":{"message":"{number of messages} message","messages":"{number of messages} messages"}},[h._param("number of messages",a,[0]),h._enum(a>1?"messages":"message",{message:"message",messages:"messages"})])))]);var d=h._("Delete Messages");d=[b("React").createElement(b("XUIDialogCancelButton.react"),{key:"cancel"}),b("React").createElement(b("XUIDialogButton.react"),{action:"cancel",key:"submit",label:d,onClick:function(){this.$1.batchDelete(this.props.selectedRows,b("PagesMessagingActionPlacement").THREAD_LIST_BATCH_ACTION),b("PagesManagerAction").deselectAll(),b("PagesManagerAction").viewListItem(null),this.props.onSelectionClear&&this.props.onSelectionClear()}.bind(this),use:"confirm"})];b("SimpleXUIDialog").showEx(a,c,d)};a.prototype.$4=function(){"use strict";b("PagesManagerMessagingMessagelistAction").setIsContextCardHidden(this.props.pageID,!0)};a.prototype.$5=function(){"use strict";b("PagesManagerMessagingMessagelistAction").setIsContextCardHidden(this.props.pageID,!1)};a.prototype.$6=function(){"use strict";__p&&__p();this.props.pageID||i(0);this.props.userID||i(0);var a=b("XPagesBanUserDataController").getURIBuilder().setFBID("page_id",this.props.pageID).setFBIDVector("user_ids",[this.props.userID]).getURI(),c=h._("Ban person from Page"),d=h._("A person who's banned can't post, comment, like or take other actions on the Page. They won't be notified."),e=this.props.userName?h._("Would you like to ban {user name}?",[h._param("user name",b("React").createElement(b("XUIText.react"),{weight:"bold"},this.props.userName))]):h._("Would you like to ban this user?");e=b("React").createElement("div",null,e,b("React").createElement(b("InsightsInfoTip.react"),{alignH:"center",position:"above",tip:d}));b("SimpleXUIDialog").showConfirm(e,c,function(c){if(!c)return;new(b("AsyncRequest"))().setURI(a).setHandler(function(a){if(!a.payload.success)return;b("PagesManagerMessagingMessagelistAction").resetIsUserBanned(this.props.pageID,this.props.userID);this.$1.batchMarkSpam(this.props.selectedRows,b("PagesMessagingActionPlacement").THREAD_LIST_BATCH_ACTION)}.bind(this)).send()}.bind(this))};a.prototype.renderMenu=function(){"use strict";return b("React").createElement(b("ReactXUIMenu"),{onItemClick:function(event,a){return this.$2(event,a)}.bind(this)},this.props.inlineActionParam.showMoveToInbox?b("React").createElement(k,{value:b("PagesMessengerActions").MOVE_TO_INBOX},h._("Move to Inbox")):null,this.props.inlineActionParam.showFlag?b("React").createElement(k,{value:b("PagesMessengerActions").FLAG},h._("Flag")):null,this.props.inlineActionParam.showUnflag?b("React").createElement(k,{value:b("PagesMessengerActions").UNFLAG},h._("Unflag")):null,this.props.inlineActionParam.showSpam?b("React").createElement(k,{value:b("PagesMessengerActions").MARK_AS_SPAM},h._("Mark as Spam")):null,this.props.canUseDoneFolder?b("React").createElement(k,{value:b("PagesMessengerActions").MARK_AS_DONE},h._("Mark as done")):null,this.props.inlineActionParam.showUnspam?b("React").createElement(k,{value:b("PagesMessengerActions").MARK_AS_UNSPAM},h._("Move to Inbox")):null,this.props.inlineActionParam.showMarkRead?b("React").createElement(k,{value:b("PagesMessengerActions").MARK_AS_READ},h._("Mark as Read")):null,this.props.inlineActionParam.showMarkUnread?b("React").createElement(k,{value:b("PagesMessengerActions").MARK_AS_UNREAD},h._("Mark as Unread")):null,this.props.inlineActionParam.showArchive?b("React").createElement(k,{value:b("PagesMessengerActions").ARCHIVE},h._("Archive")):null,this.props.inlineActionParam.showUnarchive?b("React").createElement(k,{value:b("PagesMessengerActions").UNARCHIVE},h._("Move to Inbox")):null,this.props.inlineActionParam.showDelete?b("React").createElement(k,{value:b("PagesMessengerActions").DELETE_THREAD},h._("Delete")):null,this.props.inlineActionParam.showHideContextCard?b("React").createElement(k,{value:b("PagesMessengerActions").HIDE_CONTEXT_CARD},h._("Hide sender info")):null,this.props.inlineActionParam.showShowContextCard?b("React").createElement(k,{value:b("PagesMessengerActions").SHOW_CONTEXT_CARD},h._("Show sender info")):null,this.props.showBanFromPage&&this.props.pageID&&this.props.userID?b("React").createElement(k,{value:b("PagesMessengerActions").SHOW_BAN_FROM_PAGE},h._("Ban from Page")):null)};a.prototype.render=function(){"use strict";return b("React").createElement(b("PopoverMenu.react"),{alignh:this.props.alignh,className:"_1tly"+(this.props.showBatchAction?"":" hidden_elem"),layerBehaviors:this.props.layerBehaviors,menu:this.renderMenu(),onHide:this.props.onHide,onShow:this.props.onShow,ref:"menu"},this.props.children)};a.defaultProps={alignh:"left"};e.exports=a}),null);
__d("PagesManagerMessagingThreadTitle.react",["cx","fbt","ContextualDialogArrow","ContextualLayerAutoFlip","Image.react","InlineBlock.react","LeftRight.react","Link.react","MercuryIDs","MercuryParticipantListRenderer","MercuryThreadTitle.react","MessengerParticipants.bs","PagesManagerMessagingBatchActionMenu.react","PagesMessagingActionPlacement","PagesMessengerThreadUtils","React","XUIPopoverButton.react"],(function(a,b,c,d,e,f,g,h){__p&&__p();var i;c=babelHelpers.inherits(a,b("React").Component);i=c&&c.prototype;function a(a){"use strict";i.constructor.call(this,a),this.state={href:"",userName:null,imageSource:null}}a.prototype.$1=function(a){"use strict";if(a&&a.other_user_fbid){a=b("MercuryIDs").getParticipantIDFromUserID(a.other_user_fbid);b("MessengerParticipants.bs").get(a,function(a){var c=new(b("MercuryParticipantListRenderer"))().renderParticipantList([a]);this.setState({userName:c,href:a.href,imageSource:a.image_src})}.bind(this))}};a.prototype.UNSAFE_componentWillMount=function(){"use strict";this.$1(this.props.thread)};a.prototype.UNSAFE_componentWillReceiveProps=function(a){"use strict";this.$1(a.thread)};a.prototype.$2=function(){"use strict";return b("React").createElement("div",null,this.state.imageSource?b("React").createElement(b("Image.react"),{className:"_3stv",src:this.state.imageSource}):b("React").createElement("div",{className:"_3stv"}),b("React").createElement(b("InlineBlock.react"),{className:"_3ak8 _3-9a"},b("React").createElement(b("MercuryThreadTitle.react"),{className:"_174p",thread:this.props.thread,viewer:this.props.pageID,showUnreadCount:!1}),b("React").createElement(b("Link.react"),{href:this.state.href?this.state.href:"",target:"_blank"},h._("View Profile"))))};a.prototype.render=function(){"use strict";__p&&__p();if(this.props.thread===null||this.props.thread===undefined)return b("React").createElement("div",{className:"_174o"});var a=b("PagesMessengerThreadUtils").getBatchActionMenuParam(this.props.thread);a.showMarkRead=!1;a.showMarkUnread=!1;a.showHideContextCard=this.props.isContextCardEnabled&&!this.props.isContextCardHidden;a.showShowContextCard=this.props.isContextCardEnabled&&this.props.isContextCardHidden;var c=b("React").createElement(b("XUIPopoverButton.react"),{label:h._("Actions")});return b("React").createElement(b("LeftRight.react"),{className:"_3stw"},this.$2(),b("React").createElement(b("PagesManagerMessagingBatchActionMenu.react"),{alignh:"right",canUseDoneFolder:this.props.canUseDoneFolder,layerBehaviors:[b("ContextualDialogArrow"),b("ContextualLayerAutoFlip")],onHide:function(){},onShow:function(){},pageID:this.props.pageID,inlineActionParam:a,placement:b("PagesMessagingActionPlacement").THREAD_TITLE_BAR,selectedRows:[this.props.thread&&this.props.thread.thread_id],showBanFromPage:this.props.isBanFromPageEnabled,showBatchAction:!0,userID:this.props.thread?this.props.thread.other_user_fbid:null,userName:this.state?this.state.userName:null},c))};e.exports=a}),null);
__d("PagesManagerMessagingDetailContainer.react",["cx","BootloadedComponent.react","FluxContainer","Grid.react","immutable","JSResource","MercuryMessageStore","MercuryPageMessageActions","MercuryThreadInformer","MessagingTag","MessengerConfig","MessengerHotLikePreviewEvents","MessengerReadReceipt.bs","MessengerState.bs","PageCommPlatform","PagesManagerMessagingAppointmentBannerRoot.react","PagesManagerMessagingComposerContainer.react","PagesManagerMessagingFilterStore","PagesManagerMessagingMessageList.react","PagesManagerMessagingMessagelistAction","PagesManagerMessagingMessagelistStore","PagesManagerMessagingTabPerfEvents","PagesManagerMessagingThreadInteractionHelper","PagesManagerMessagingThreadTitle.react","PagesManagerPerfLogger","PagesMessagingPerfLoggerEvent","PagesMessagingPerfTypedLogger","React","ReactDOM","SubscriptionsHandler","Vector","debounce"],(function(a,b,c,d,e,f,g){"use strict";__p&&__p();var h,i=b("Grid.react").GridItem;c=babelHelpers.inherits(a,b("React").Component);h=c&&c.prototype;function a(a,c){h.constructor.call(this,a,c),this.$9=b("MercuryThreadInformer").getForFBID(a.pageID),this.$2=null,this.$4=!1,this.state={appointmentBannerHeight:0,isContextCardEnabled:!1,isLoading:!1,isLoadingMore:!1,messagelist:[],preventScroll:!1,hideContextCard:a.config.hideContextCard,scrollHeight:0,threadID:"",isUserBanned:!1,thread:{}},this.$3=!1,this.$6=b("debounce")(function(){this.props.height&&this.$10(this.props.height)}.bind(this),50)}a.getStores=function(){return[b("PagesManagerMessagingMessagelistStore")]};a.calculateState=function(a,c){a=[];var d=null,e=c.listItemKey;e&&(a=b("PagesManagerMessagingMessagelistStore").getMessagelist(c.pageID,e),d=b("MessengerState.bs").getThreadMetaNow(c.pageID,e),d&&d.other_user_fbid&&c.config&&c.pageID&&b("PagesManagerMessagingMessagelistAction").fetchIsUserBanned(c.pageID,d.other_user_fbid));e=b("PagesManagerMessagingMessagelistStore").isCardHidden();e===null&&(e=c.config.hideContextCard);var f=c.config.enableContextCard&&d&&d.other_user_fbid,g=c.pageID&&d&&d.other_user_fbid?b("PagesManagerMessagingMessagelistStore").getIsUserBanned(c.pageID,d.other_user_fbid):!1;return{appointmentBannerHeight:b("PagesManagerMessagingMessagelistStore").getAppointmentBannerHeight(),isContextCardEnabled:f,hideContextCard:e,isLoading:b("PagesManagerMessagingMessagelistStore").isLoading(),isLoadingMore:b("PagesManagerMessagingMessagelistStore").isLoadingMore(),isUserBanned:g,scrollHeight:b("PagesManagerMessagingMessagelistStore").getScrollHeight(),messagelist:a,threadID:c.listItemKey,thread:d}};a.prototype.$10=function(a){var c=0;this.refs.threadTitle&&(c=b("Vector").getElementDimensions(b("ReactDOM").findDOMNode(this.refs.threadTitle)).y);var d=b("Vector").getElementDimensions(b("ReactDOM").findDOMNode(this.refs.composer)).y;a=a-c-d-this.state.appointmentBannerHeight;a<0&&(a=0);b("PagesManagerMessagingMessagelistAction").setScrollAreaHeight(a)};a.prototype.$11=function(a,c,d){__p&&__p();d=b("MessengerReadReceipt.bs").getSeenTimestamps(d,a);var e=new Set(d.keys());return d.withMutations(function(a){b("immutable").Seq(c).reverse().forEach(function(b){if(e.size===0)return!1;if(!e.has(b.author))return!0;a.update(b.author,function(a){return!a||a.watermark<=b.timestamp?{watermark:b.timestamp,action:b.timestamp}:a});e["delete"](b.author)})})};a.prototype.componentDidMount=function(){b("PagesManagerPerfLogger").log(b("PagesManagerMessagingTabPerfEvents").MESSAGE_TAB_DETAIL_VIEW_DID_RENDER,this.props.perfParams),this.props.listItemKey&&this.$12(this.props.listItemKey)};a.prototype.UNSAFE_componentWillReceiveProps=function(a){a=a.listItemKey;a&&this.props.listItemKey!==a&&this.$12(a)};a.prototype.UNSAFE_componentWillUpdate=function(a,b){a.height!==this.props.height&&this.$10(a.height)};a.prototype.componentDidUpdate=function(a,b){b.appointmentBannerHeight!==this.state.appointmentBannerHeight&&this.$10(this.props.height)};a.prototype.getMessageStore=function(){return this.$5};a.prototype.logMessageLoadingStart=function(a){this.$3=!0,this.$1=Date.now(),this.$8=a,new(b("PagesMessagingPerfTypedLogger"))().setPageID(this.props.pageID).setEventName(b("PagesMessagingPerfLoggerEvent").MESSAGELIST_LOAD_START).log()};a.prototype.logMessageLoadingEnd=function(){this.$3&&this.$8===this.props.listItemKey&&(this.$3=!1,new(b("PagesMessagingPerfTypedLogger"))().setPageID(this.props.pageID).setEventName(b("PagesMessagingPerfLoggerEvent").MESSAGELIST_LOAD_END).setPerfTime(Date.now()-this.$1).log())};a.prototype.$12=function(a){__p&&__p();this.$5&&this.$5.destroy();this.$7&&this.$7.release();this.$5=new(b("MercuryMessageStore"))(a,b("MessengerConfig").MessageLoadCount,this.props.pageID);var c=b("PagesManagerMessagingMessagelistStore").getMessagelist(this.props.pageID,a);c.length===0&&(b("PagesManagerMessagingMessagelistAction").setIsLoadingMore(!1),b("PagesManagerMessagingMessagelistAction").setIsLoading(!0),this.logMessageLoadingStart(a));this.$7=new(b("SubscriptionsHandler"))();this.$7.addSubscriptions(this.$5.subscribe(function(c){this.logMessageLoadingEnd(),b("PagesManagerMessagingMessagelistAction").setIsLoading(!1),b("PagesManagerMessagingMessagelistAction").setIsLoadingMore(!1),b("PagesManagerMessagingMessagelistAction").updateMessagelist(this.props.pageID,a,c)}.bind(this)),this.$9.subscribe("threads-updated",function(a,c){c[this.props.listItemKey]&&b("PagesManagerMessagingMessagelistAction").updateThread(this.props.pageID,this.props.listItemKey)}.bind(this)),b("MessengerHotLikePreviewEvents").addListener(b("MessengerHotLikePreviewEvents").START,function(c,d){a==d&&b("PagesManagerMessagingMessagelistAction").setHotLikeStart(c)}),b("MessengerHotLikePreviewEvents").addListener(b("MessengerHotLikePreviewEvents").STOP,function(c){a==c&&b("PagesManagerMessagingMessagelistAction").setHotLikeEnd()}))};a.prototype.$13=function(){var a=b("PagesManagerMessagingFilterStore").getActiveFilterName();if(!this.props.listItemKey||a===b("MessagingTag").UNREAD)return;b("PagesManagerMessagingThreadInteractionHelper").handleUnreadStateUpdate(this.props.listItemKey,this.props.pageID,a);b("PagesManagerMessagingThreadInteractionHelper").handlePermalinkUpdate(this.props.listItemKey,this.props.pageID)};a.prototype.$14=function(){this.state.isLoadingMore||this.getMessageStore().fetchMoreMessages()&&(b("PagesManagerMessagingMessagelistAction").setIsLoading(!1),b("PagesManagerMessagingMessagelistAction").setIsLoadingMore(!0))};a.prototype.$15=function(){return b("React").createElement(b("MessengerState.bs").jsComponent,{fbid:this.props.pageID},function(a){return b("React").createElement(b("PagesManagerMessagingMessageList.react"),babelHelpers["extends"]({},this.props,{initLoading:this.state.isLoading,isLoadingMore:this.state.isLoadingMore,messagelist:b("immutable").List(this.state.messagelist),fetchEarlierMessages:function(){return this.$14()}.bind(this),readReceipts:this.$11(this.props.listItemKey,b("PagesManagerMessagingMessagelistStore").getMessagelist(this.props.pageID,this.props.listItemKey),b("MessengerState.bs").readReceiptsPerThread(a)),scrollHeight:this.state.scrollHeight,threadID:this.state.threadID,thread:this.state.thread}))}.bind(this))};a.prototype.$16=function(a){if(!this.state.isContextCardEnabled)return null;a=a;var c=0;this.refs.threadTitle&&(c=b("Vector").getElementDimensions(b("ReactDOM").findDOMNode(this.refs.threadTitle)).y);a+=c;return b("React").createElement(i,{alignv:"middle",className:"_2utd"+(this.state.hideContextCard?" hidden_elem":"")},b("React").createElement(b("BootloadedComponent.react"),{bootloadPlaceholder:b("React").createElement("div",{className:"hidden_elem"}),bootloadLoader:b("JSResource")("PagesMessengerContextCardContainer.react").__setRef("PagesManagerMessagingDetailContainer.react"),config:this.props.config,pageID:this.props.pageID,userID:this.state.thread&&this.state.thread.other_user_fbid,scrollHeight:a,updatedUI:!0}))};a.prototype.$17=function(){if(!this.props.config.enableBookingFlow)return null;var a=this.state.thread||{};return b("React").createElement(b("PagesManagerMessagingAppointmentBannerRoot.react"),{messageList:this.state.messagelist,pageID:this.props.pageID,userID:a.other_user_fbid})};a.prototype.render=function(){return b("React").createElement("div",null,b("React").createElement(b("Grid.react"),{alignv:"top",className:"_2utb",cols:this.state.isContextCardEnabled?2:1},b("React").createElement(i,{className:"_2utc"},b("React").createElement(b("PagesManagerMessagingThreadTitle.react"),{canUseDoneFolder:this.props.config.canUseDoneFolder,isBanFromPageEnabled:!this.state.isUserBanned,isContextCardEnabled:this.state.isContextCardEnabled,isContextCardHidden:this.state.hideContextCard,pageID:this.props.pageID,ref:"threadTitle",thread:this.state.thread}),this.$17(),this.$15()),this.$16(this.state.scrollHeight)),b("React").createElement("div",{className:this.props.config.enableComposer?"":"hidden_elem"},b("React").createElement(b("PagesManagerMessagingComposerContainer.react"),{accessToken:this.props.config.pageAccessToken,canCreateAppointment:this.props.config.shouldShowCreateAppointmentButton,canUseLeadForms:this.props.config.canUseLeadForms,commPlatform:b("PageCommPlatform").MESSENGER,creatorInfo:this.props.config.creatorInfo,defaultCurrency:this.props.config.defaultCurrency,messageActions:b("MercuryPageMessageActions").getForFBID(this.props.pageID),onInitialRender:function(){return this.$6()}.bind(this),onMessageOrAttachmentUpdate:function(){return this.$6()}.bind(this),onFocus:function(){return this.$13()}.bind(this),recipientID:this.state.thread?this.state.thread.other_user_fbid.toString():null,ref:"composer",shouldAllowPaymentOnboarding:this.props.config.shouldAllowPaymentOnboarding,shouldShowCommerceInvoiceButton:this.props.config.shouldShowCommerceInvoiceButton,shouldShowCommerceInvoiceButtonPUX:this.props.config.shouldShowCommerceInvoiceButtonPUX,shouldShowInvoiceShippingNUX:this.props.config.shouldShowInvoiceShippingNUX,shouldShowConfirmPayment:this.props.config.shouldShowConfirmPayment,shouldShowRequestPayment:this.props.config.shouldShowRequestPayment,threadElementID:this.state.threadID,threadID:this.state.threadID,userID:this.props.pageID})))};e.exports=b("FluxContainer").create(a,{withProps:!0})}),null);
__d("PagesManagerAwayToggle.react",["cx","fbt","BUISwitch.react","PagesManagerAwayToggleAction","PagesManagerCountDownTimer.react","React","Tooltip"],(function(a,b,c,d,e,f,g,h){__p&&__p();var i;i=babelHelpers.inherits(a,b("React").Component);i&&i.prototype;a.prototype.$1=function(){"use strict";this.props.isAway&&b("PagesManagerAwayToggleAction").setToggleStatus(this.props.pageID,!1)};a.prototype.$2=function(a){"use strict";a!==this.props.isAway&&b("PagesManagerAwayToggleAction").setToggleStatus(this.props.pageID,a)};a.prototype.render=function(){"use strict";var a=h._("Going out? Set your status to Away for 12 hours. Change it if you get back sooner."),c=h._("Away"),d=0;this.props.expirationTimestamp&&(d=this.props.expirationTimestamp*1e3);d=b("React").createElement(b("PagesManagerCountDownTimer.react"),{expireTimestamp:d,isHidden:!this.props.isAway,onTimeup:function(){return this.$1()}.bind(this)});return b("React").createElement("div",{className:"_4cdp"},b("React").createElement("div",{className:"_ast"},b("React").createElement(b("BUISwitch.react"),babelHelpers["extends"]({onToggle:function(a){return this.$2(a)}.bind(this),value:this.props.isAway},b("Tooltip").propsFor(a)))),b("React").createElement("div",{className:"_asu"+(this.props.isAway?" _2eyq":"")},c),d)};function a(){"use strict";i.apply(this,arguments)}e.exports=a}),null);
__d("PagesManagerMessagingBatchActionHeader.react",["cx","fbt","PagesManagerMessagingBatchActionMenu.react","PagesMessagingActionPlacement","React","XUIPopoverButton.react"],(function(a,b,c,d,e,f,g,h){"use strict";var i;i=babelHelpers.inherits(a,b("React").Component);i&&i.prototype;a.prototype.render=function(){return b("React").createElement(b("PagesManagerMessagingBatchActionMenu.react"),babelHelpers["extends"]({layerBehaviors:[],placement:b("PagesMessagingActionPlacement").THREAD_LIST_BATCH_ACTION},this.props),b("React").createElement(b("XUIPopoverButton.react"),{className:"_3640",label:h._("Actions")}))};function a(){i.apply(this,arguments)}e.exports=a}),null);
__d("PagesManagerMessagingBatchActionHeaderContainer.react",["FluxContainer","MercuryPageThreadActions","MessengerState.bs","PagesManagerMessagingBatchActionHeader.react","PagesManagerMessagingFilterStore","PagesManagerMessagingNavigationUnitKey","PagesMessengerThreadUtils","React"],(function(a,b,c,d,e,f){"use strict";__p&&__p();var g;c=babelHelpers.inherits(a,b("React").Component);g=c&&c.prototype;function a(a,c){g.constructor.call(this,a,c),this.$1=b("MercuryPageThreadActions").getForFBID(a.pageID)}a.getStores=function(a){b("PagesManagerMessagingFilterStore").enableDoneFolder(a.canUseDoneFolder);return[b("PagesManagerMessagingFilterStore")]};a.calculateState=function(a,c){a=b("PagesManagerMessagingFilterStore").getActiveFolderName();var d=b("PagesManagerMessagingFilterStore").getActiveFilterName(),e=!1,f=!1,g=!1,h=!1,i=!1,j=!1,k=!1,l=!1,m=!1,n=!1,o=0,p=0;c.selectedRows.forEach(function(a){a=b("MessengerState.bs").getThreadMetaNow(c.pageID,a);b("PagesMessengerThreadUtils").isFlagThread(a)&&o++;a&&a.unread_count===0&&p++});var q=c.selectedRows.length;a===b("PagesManagerMessagingNavigationUnitKey").FOLDERS.INBOX&&d===b("PagesManagerMessagingNavigationUnitKey").FILTERS.ALL?(e=!0,h=!0,j=q-o>0,k=o>0,l=p<q,m=p>0):a===b("PagesManagerMessagingNavigationUnitKey").FOLDERS.ARCHIVED&&d===b("PagesManagerMessagingNavigationUnitKey").FILTERS.ALL?(f=!0,g=!0):a===b("PagesManagerMessagingNavigationUnitKey").FOLDERS.SPAM&&d===b("PagesManagerMessagingNavigationUnitKey").FILTERS.ALL?i=!0:d===b("PagesManagerMessagingNavigationUnitKey").FILTERS.FLAGGED&&a===b("PagesManagerMessagingNavigationUnitKey").FOLDERS.INBOX?k=!0:d===b("PagesManagerMessagingNavigationUnitKey").FILTERS.UNREAD&&a===b("PagesManagerMessagingNavigationUnitKey").FOLDERS.INBOX?l=!0:a===b("PagesManagerMessagingNavigationUnitKey").FOLDERS.PAGE_BACKGROUND&&(n=!0);return{inlineActionParam:{showArchive:e,showDelete:f,showUnarchive:g,showSpam:h,showUnspam:i,showFlag:j,showUnflag:k,showMarkRead:l,showMarkUnread:m,showMoveToInbox:n}}};a.prototype.$2=function(){this.props.onSelectionClear()};a.prototype.render=function(){return b("React").createElement(b("PagesManagerMessagingBatchActionHeader.react"),babelHelpers["extends"]({canUseDoneFolder:this.props.canUseDoneFolder,onSelectionClear:function(){return this.$2()}.bind(this),pageID:this.props.pageID,selectedRows:this.props.selectedRows,showBatchAction:this.props.showBatchAction},this.state))};e.exports=b("FluxContainer").create(a,{withProps:!0})}),null);
__d("PagesManagerMessagingFilterPanel.react",["cx","fbt","ix","Image.react","InlineBlock.react","LeftRight.react","Link.react","MessengerSpinner.react","PageCustomTagSearchSource","PagesAdminToolUIActionType","PagesContextCardCustomTag.react","PagesEnumTag.react","PagesManagerCustomTagsAction","PagesManagerLogger","PagesManagerManageCustomTagsDialog.react","PagesManagerMessagingFilterActions","PagesManagerMessagingNavigationUnitKey","PagesManagerMessagingThreadlistAction","React","ReactDOM","ScrollableArea.react","SearchableTextInput.react","Vector","fbglyph","nullthrows"],(function(a,b,c,d,e,f,g,h,i){"use strict";__p&&__p();var j,k=b("PagesManagerMessagingNavigationUnitKey").FILTERS,l=45,m=130;c=babelHelpers.inherits(a,b("React").Component);j=c&&c.prototype;function a(a){__p&&__p();j.constructor.call(this,a),this.$1=function(a){b("PagesManagerMessagingFilterActions").changeFilter(this.props.pageID,a)}.bind(this),this.$2=function(){b("PagesManagerMessagingFilterActions").changeFilter(this.props.pageID,this.props.defaultFilter)}.bind(this),this.$3=function(a){this.setState({tagQuery:"",tagQueryResult:null}),b("PagesManagerMessagingThreadlistAction").addSearchCustomTag(this.props.pageID,a.name,"filter_panel")}.bind(this),this.$4=function(a){this.setState({tagQuery:"",tagQueryResult:null}),b("PagesManagerMessagingThreadlistAction").removeSearchCustomTag(this.props.pageID,a.name,"filter_panel")}.bind(this),this.$6=function(event){this.setState({tagQuery:event.target.value})}.bind(this),this.$7=function(a,b){b===this.state.tagQuery&&this.setState({tagQueryResult:a.map(function(a){return a.getTitle()})})}.bind(this),this.$14=function(){b("PagesManagerLogger").logMessageInboxUIAction(b("PagesAdminToolUIActionType").MESSAGE_INBOX_CLICK_MANAGE_TAGS,this.props.pageID),this.$15(!0)}.bind(this),this.$15=function(a){b("PagesManagerCustomTagsAction").toggleManageTagsDialog(this.props.pageID,a)}.bind(this),this.state={tagQuery:"",tagQueryResult:null}}a.prototype.$5=function(){var a=this.props.height-l,c=b("ReactDOM").findDOMNode(this.refs.header);c!==null&&(a-=b("Vector").getElementDimensions(c).y);c=b("ReactDOM").findDOMNode(this.refs.searchBar);c!==null&&(a-=b("Vector").getElementDimensions(c).y);return a-m};a.prototype.$8=function(a){return b("React").createElement("div",{className:"_3v0k",key:a.getKey()},b("React").createElement(b("Image.react"),{className:"__o0",src:i("141802")}),b("React").createElement(b("PagesEnumTag.react"),{onClick:this.$1,unit:a,textOnly:!0}),b("React").createElement(b("Link.react"),{className:"__o1",onClick:this.$2},h._("Remove")))};a.prototype.$9=function(a){return b("React").createElement("div",{className:"_3v0k",key:a.getKey()},b("React").createElement(b("PagesEnumTag.react"),{onClick:this.$1,unit:a,textOnly:!0}))};a.prototype.$10=function(a){return b("React").createElement("div",{className:"_3v0k",key:a.id},b("React").createElement(b("Image.react"),{className:"__o0",src:i("141802")}),b("React").createElement(b("PagesContextCardCustomTag.react"),{canRemove:!1,key:a.id,tagData:a,textOnly:!0}),b("React").createElement(b("Link.react"),{className:"__o1",onClick:function(){return this.$4(a)}.bind(this)},h._("Remove")))};a.prototype.$11=function(a){var c=null;this.props.currentSearchCustomTagThreadCounts&&(c=this.props.currentSearchCustomTagThreadCounts.get(a.name));return b("React").createElement("div",{className:"_3v0k",key:a.id},b("React").createElement(b("PagesContextCardCustomTag.react"),{canRemove:!1,key:a.id,tagData:a,onClick:this.$3,textOnly:!0}),b("React").createElement("span",{className:"_2-3_"},c!==null?c:b("React").createElement(b("MessengerSpinner.react"),null)))};a.prototype.$12=function(){__p&&__p();var a=[],c=[],d=[],e=this.state.tagQuery!==""&&this.state.tagQueryResult!==null;this.props.activeFilter.getKey()===k.FLAGGED&&a.push(this.$8(this.props.activeFilter));this.props.currentSearchCustomTagNames.map(function(c){(!e||b("nullthrows")(this.state.tagQueryResult).indexOf(c)>=0)&&a.push(this.$10(this.props.customTags.get(c)))}.bind(this));this.state.tagQuery!==""&&this.state.tagQueryResult!==null?b("nullthrows")(this.state.tagQueryResult).map(function(a){this.props.currentSearchCustomTagNames.contains(a)||d.push(this.$11(this.props.customTags.get(a)))}.bind(this)):(this.props.enumTags&&this.props.enumTags.forEach(function(a){a.getKey()!==this.props.activeFilter.getKey()&&c.push(this.$9(a))}.bind(this)),this.props.currentSearchCustomTagThreadCounts!==null&&this.props.currentSearchCustomTagThreadCounts.forEach(function(a,b){this.props.currentSearchCustomTagNames.contains(b)||d.push(this.$11(this.props.customTags.get(b)))}.bind(this)),this.props.customTags.forEach(function(a,b){!this.props.currentSearchCustomTagNames.contains(b)&&(this.props.currentSearchCustomTagThreadCounts===null||b in this.props.currentSearchCustomTagThreadCounts)&&d.push(this.$11(this.props.customTags.get(b)))}.bind(this)));return b("React").createElement(b("ScrollableArea.react"),{className:"_3v0j",height:this.$5(),key:"tagList"},a,c,d)};a.prototype.$13=function(){return b("React").createElement(b("InlineBlock.react"),null,b("React").createElement(b("Image.react"),{src:i("94632")}),b("React").createElement(b("InlineBlock.react"),{className:"_106m"},b("React").createElement("div",{className:"_106n"},h._("About labels")),h._("Labels help you to track and find conversations. Create your own labels and apply them to people based on what they've messaged you about.")))};a.prototype.$16=function(){return b("React").createElement(b("PagesManagerManageCustomTagsDialog.react"),{customTags:this.props.customTags,pageID:this.props.pageID,show:this.props.isManagingTags,onToggle:this.$15,isMergingLabels:this.props.isMergingLabels})};a.prototype.render=function(){return b("React").createElement("div",{className:"_5xjz",style:{height:this.props.height-l+"px"}},b("React").createElement(b("LeftRight.react"),{className:"_5xj_",ref:"header"},h._("LABELS"),b("React").createElement(b("Link.react"),{onClick:this.$14},h._("Add and manage"))),b("React").createElement(b("SearchableTextInput.react"),{className:"_30p_",onChange:this.$6,onEntriesFound:this.$7,placeholder:h._("Search your labels..."),queryString:this.state.tagQuery,searchSource:b("PageCustomTagSearchSource").getInstance(this.props.customTags.toArray(),!1),ref:"searchBar"}),this.$12(),this.$16(),this.$13())};e.exports=a}),null);
__d("PagesManagerMessagingFilterPanelContainer.react",["FluxContainer","PagesManagerCustomTagsAction","PagesManagerCustomTagsStore","PagesManagerMessagingFilterPanel.react","PagesManagerMessagingFilterStore","PagesManagerMessagingNavigationUnitKey","PagesManagerMessagingSearchStore","PagesManagerMessagingThreadlistAction","React"],(function(a,b,c,d,e,f){"use strict";__p&&__p();var g,h=b("PagesManagerMessagingNavigationUnitKey").FILTERS;g=babelHelpers.inherits(a,b("React").Component);g&&g.prototype;a.getStores=function(){return[b("PagesManagerMessagingFilterStore"),b("PagesManagerCustomTagsStore"),b("PagesManagerMessagingSearchStore")]};a.prototype.UNSAFE_componentWillMount=function(){b("PagesManagerCustomTagsStore").hasCustomTags(this.props.pageID)||b("PagesManagerCustomTagsAction").fetch(this.props.pageID)};a.prototype.componentDidUpdate=function(a,c){this.state.isFiltering&&!c.isFiltering&&this.state.currentSearchCustomTagThreadCounts===null&&b("PagesManagerMessagingThreadlistAction").fetchCustomTagThreadCounts(this.props.pageID)};a.calculateState=function(a,c){return{activeFilter:b("PagesManagerMessagingFilterStore").getActiveFilter(),currentSearchCustomTagNames:b("PagesManagerMessagingSearchStore").getCurrentSearchCustomTagNames(),currentSearchCustomTagThreadCounts:b("PagesManagerMessagingSearchStore").getCurrentSearchCustomTagThreadCounts(),customTags:b("PagesManagerCustomTagsStore").getCustomTags(c.pageID),isManagingTags:b("PagesManagerCustomTagsStore").getIsManagingTags(),isFiltering:b("PagesManagerMessagingFilterStore").getIsFiltering(),isMergingLabels:b("PagesManagerCustomTagsStore").getIsMergingLabels()}};a.prototype.render=function(){var a=b("PagesManagerMessagingFilterStore").getAvailableFilters(),c=[],d=a.get(0);b("PagesManagerMessagingFilterStore").getActiveFilterName()===h.ALL&&(c=a.filter(function(a){return a.getKey()===h.FLAGGED}));return b("React").createElement(b("PagesManagerMessagingFilterPanel.react"),{activeFilter:this.state.activeFilter,currentSearchCustomTagNames:this.state.currentSearchCustomTagNames,currentSearchCustomTagThreadCounts:this.state.currentSearchCustomTagThreadCounts,customTags:this.state.customTags,defaultFilter:d,enumTags:c,height:this.props.height,isManagingTags:this.state.isManagingTags,pageID:this.props.pageID,isMergingLabels:this.state.isMergingLabels})};function a(){g.apply(this,arguments)}e.exports=b("FluxContainer").create(a,{withProps:!0})}),null);
__d("PagesManagerMessagingFilterPanelSwitch.react",["ix","cx","fbt","AsyncRequest","ContextualDialogArrow","ContextualLayer.react","Image.react","PagesAdminToolUIActionType","PagesManagerLogger","PagesManagerMessagingFilterActions","PagesManagerMessagingFilterPanelContainer.react","React","XBasicFBNuxDismissController","XUIAmbientNUX.react","fbglyph"],(function(a,b,c,d,e,f,g,h,i){"use strict";__p&&__p();var j,k=4152;c=babelHelpers.inherits(a,b("React").Component);j=c&&c.prototype;function a(a){j.constructor.call(this,a),this.$1=function(){var a=b("XBasicFBNuxDismissController").getURIBuilder().setInt("nux_id",k).getURI();new(b("AsyncRequest"))().setURI(a).send();this.setState({showNUX:!1})}.bind(this),this.$2=function(){b("PagesManagerLogger").logMessageInboxUIAction(b("PagesAdminToolUIActionType").MESSAGE_INBOX_TOGGLE_FILTER_PANEL,this.props.pageID,{show:!this.props.isFiltering}),b("PagesManagerMessagingFilterActions").toggleFilterPanel(this.props.pageID,!this.props.isFiltering)}.bind(this),this.state={showNUX:this.props.showNUX}}a.prototype.$3=function(){return b("React").createElement(b("XUIAmbientNUX.react"),{contextRef:function(){return this.refs.contextRef}.bind(this),onCloseButtonClick:this.$1,position:"above",shown:this.state.showNUX,width:"auto"},i._("You can now filter your inbox by labels."))};a.prototype.render=function(){return b("React").createElement("span",null,b("React").createElement("span",{className:"_5pwy",onClick:this.$2,ref:"contextRef",role:"button",tabIndex:"0"},b("React").createElement("span",{className:"_5pwz"+(this.props.isFiltering?" _5px3":"")},i._("Filter by")),b("React").createElement(b("Image.react"),{className:"_5px4",src:this.props.isFiltering?g("113106"):g("124190")})),b("React").createElement(b("ContextualLayer.react"),{alignment:"right",containerWidthMatchContext:!1,contextRef:function(){return this.refs.contextRef}.bind(this),layerBehaviors:[b("ContextualDialogArrow")],shown:this.props.isFiltering,offsetX:12,offsetY:16,position:"below"},b("React").createElement(b("PagesManagerMessagingFilterPanelContainer.react"),{pageID:this.props.pageID,height:this.props.height})),this.$3())};e.exports=a}),null);
__d("MercuryPageSeenIndicator.react",["cx","MercuryIDs","MercurySeenIndicator.react","React"],(function(a,b,c,d,e,f,g){"use strict";__p&&__p();var h;h=babelHelpers.inherits(a,b("React").Component);h&&h.prototype;a.prototype.render=function(){__p&&__p();if(this.props.snippetSearchResult){var a=this.props.snippetSearchResult.snippets.length;if(a===1){a=this.props.snippetSearchResult.snippets[0].author;var c=b("MercuryIDs").getParticipantIDFromUserID(this.props.viewer);if(a===c)return b("React").createElement("span",{className:"_3jy5 repliedLast"})}return b("React").createElement("span",null)}else return b("React").createElement(b("MercurySeenIndicator.react"),{readReceipts:this.props.readReceipts,thread:this.props.thread,viewer:this.props.viewer})};function a(){h.apply(this,arguments)}e.exports=a}),null);
__d("MercuryPageThreadTitle.react",["DOM","MercuryMessageRenderer","MercuryThreadTitle.react","React","ReactDOM"],(function(a,b,c,d,e,f){"use strict";__p&&__p();var g;g=babelHelpers.inherits(a,b("MercuryThreadTitle.react"));g&&g.prototype;a.prototype.render=function(){return b("React").createElement("div",{className:this.props.className},b("React").createElement("span",{ref:"title"}))};a.prototype.componentDidUpdate=function(){var a=this.props.thread.name?this.$MercuryPageThreadTitle1():this.state.participantNames;if(this.props.useHighlightTitle){var c=a.toLowerCase().search(this.props.highlightText.toLowerCase()),d={};d[c]=this.props.highlightText;a=b("MercuryMessageRenderer").formatMessageBody(a,d)}b("DOM").setContent(b("ReactDOM").findDOMNode(this.refs.title),a)};function a(){g.apply(this,arguments)}a.defaultProps={isNewThread:!1,showUnreadCount:!1,useShortName:!1,useAndSeparator:!1};e.exports=a}),null);
__d("PagesManagerMessagingListRow.react",["csx","cx","fbt","ContextualDialogArrow","ContextualLayerAutoFlip","CSS","Layout.react","MercuryPageSeenIndicator.react","MercuryPageThreadTitle.react","MercuryThreadSnippet.react","MercuryThreadTimestampReact.bs","MercuryTimestamp","PagesAdminToolUIActionType","PagesContextCardCustomTag.react","PagesEnumTag.react","PagesManagerLogger","PagesManagerMessagingBatchActionMenu.react","PagesManagerMessagingFilterStore","PagesManagerMessagingNavigationUnitKey","PagesMessagingActionPlacement","PagesSelectableListRow.react","React","ShimButton.react","SplitImage.react","XUIBadge.react"],(function(a,b,c,d,e,f,g,h,i){__p&&__p();var j,k=b("MercuryThreadTimestampReact.bs").jsComponent,l=b("Layout.react").Column,m=b("Layout.react").FillColumn,n=44;c=babelHelpers.inherits(a,b("React").Component);j=c&&c.prototype;function a(a){"use strict";j.constructor.call(this,a),this.state={menuShown:!1,showFadding:!1}}a.prototype.renderSnippetSearchResult=function(){"use strict";var a=this.props.snippetSearchResult.snippets.length,c=this.props.snippetSearchResult.num_total_snippets;if(a===1)return b("React").createElement("div",{className:"_3f6a"},this.props.snippetSearchResult.snippets[0].body);else return b("React").createElement("div",{className:"_3f6a"},i._("Found {number of messages found} results",[i._param("number of messages found",c)]))};a.prototype.$1=function(){"use strict";var a=this.props.customTagsData,c=null;this.props.isFlagged&&(c=b("React").createElement(b("PagesEnumTag.react"),{canRemove:!1,unit:b("PagesManagerMessagingFilterStore").getFilterByKey(b("PagesManagerMessagingNavigationUnitKey").FILTERS.FLAGGED)}));return b("React").createElement("div",{className:"_1woq",ref:"tagBlock"},b("React").createElement("div",{ref:"tags",className:"_4pbm"},c,a.map(function(a){return b("React").createElement(b("PagesContextCardCustomTag.react"),{key:a.name,canRemove:!1,tagData:a})})),b("React").createElement("span",{className:"_1wor"}))};a.prototype.$2=function(){"use strict";return b("React").createElement("div",null,b("React").createElement("div",{className:"_2fp5"},this.props.participantImages?b("React").createElement(b("SplitImage.react"),{srcs:this.props.participantImages,size:n}):null),b("React").createElement("div",{className:"_55hu"},b("React").createElement(k,{time:this.props.thread.timestamp,title:b("MercuryTimestamp").getAbsoluteTimestamp(this.props.thread.timestamp),text:b("MercuryTimestamp").getRelativeTimestamp(this.props.thread.timestamp)})),b("React").createElement(b("PagesManagerMessagingBatchActionMenu.react"),{alignh:"right",canUseDoneFolder:this.props.config.canUseDoneFolder,layerBehaviors:[b("ContextualDialogArrow"),b("ContextualLayerAutoFlip")],onHide:function(){this.setState({menuShown:!1})}.bind(this),onShow:function(){this.setState({menuShown:!0})}.bind(this),pageID:this.props.pageID,inlineActionParam:this.props.inlineActionParam,placement:b("PagesMessagingActionPlacement").THREAD_ROW_ACTION_ICON,selectedRows:[this.props.thread.thread_id],showBatchAction:!0},b("React").createElement(b("ShimButton.react"),{className:"_4hq1",inline:!0,onClick:function(event){return event.stopPropagation()}})),b("React").createElement(b("Layout.react"),null,b("React").createElement(m,{className:"_2fp6"},b("React").createElement(b("MercuryPageThreadTitle.react"),{className:"_1a_3",highlightText:this.props.highlightText,showUnreadCount:!1,thread:this.props.thread,useShortName:!1,useHighlightTitle:this.props.useHighlightTitle,viewer:this.props.pageID}),b("React").createElement("div",{className:"_1a_7"},this.props.snippetSearchResult?this.renderSnippetSearchResult():b("React").createElement(b("MercuryThreadSnippet.react"),{participants:this.props.participants,shouldRenderYou:!1,thread:this.props.thread,viewer:this.props.pageID})),this.$1()),b("React").createElement(l,{className:"_2fp8"},this.props.thread.unread_count>0?b("React").createElement("div",{className:"_2fp9"},b("React").createElement(b("XUIBadge.react"),{count:this.props.thread.unread_count,maxcount:99})):b("React").createElement("div",{className:"_2fpa"},b("React").createElement(b("MercuryPageSeenIndicator.react"),{readReceipts:this.props.readReceipts,snippetSearchResult:this.props.snippetSearchResult,thread:this.props.thread,viewer:this.props.pageID})))))};a.prototype.render=function(){"use strict";return b("React").createElement(b("PagesSelectableListRow.react"),{disabled:this.props.disableCheckBox,onSelected:this.props.onSelected,onClick:function(event){if(b("CSS").matchesSelector(event.target.parentElement,"._4vbb"))return;b("PagesManagerLogger").logMessageInboxUIAction(b("PagesAdminToolUIActionType").MESSAGE_INBOX_CLICK_THREAD_BLOCK,this.props.pageID);this.props.onViewingListItem(this.props.listItem)}.bind(this),selected:this.props.selected,className:"_1a_0"+(this.props.isUnread?" _1a_1":"")+(this.props.isViewing&&!this.props.selected?" _3wxb":"")+(this.state.menuShown?" _1hgw":"")+" _o3f _1yt-"+(this.props.selectionMode?" _ptw":"")},this.$2())};a.defaultProps={disableCheckBox:!1,useHighlightTitle:!1};e.exports=a}),null);
__d("PagesManagerMessagingListRowContainer.react",["immutable","PagesManagerMessagingListRow.react","MercuryIDs","MessengerState.bs","MessengerParticipants.bs","PagesManagerCustomTagsStore","PagesManagerMessagingFilterStore","PagesManagerMessagingThreadInteractionHelper","PagesMessengerThreadUtils","PageCommItemMessengerConsistencyTypedLogger","PageCommItemStatus","MessagingTag","React"],(function(a,b,c,d,e,f){"use strict";__p&&__p();var g,h=b("immutable").Map;c=babelHelpers.inherits(a,b("React").Component);g=c&&c.prototype;function a(){g.constructor.call(this),this.$4=function(a){this.$1&&this.setState({participantImages:a})}.bind(this),this.$2=function(a){b("PagesManagerMessagingThreadInteractionHelper").handleUnreadStateUpdate(a,this.props.pageID,b("PagesManagerMessagingFilterStore").getActiveFilterName()),b("PagesManagerMessagingThreadInteractionHelper").handlePermalinkUpdate(a,this.props.pageID),this.props.onViewingListItem(a)}.bind(this),this.$1=!1}a.prototype.componentWillUnmount=function(){this.$1=!1};a.prototype.UNSAFE_componentWillMount=function(){__p&&__p();this.$1=!0;var a=b("MessengerState.bs").getThreadMetaNow(this.props.pageID,this.props.listItem);if(!a)return;this.$3(a);var c;if(a.other_user_fbid){var d=b("MercuryIDs").getParticipantIDFromUserID(a.other_user_fbid),e=b("MessengerParticipants.bs").getNow(d);c=e&&e.big_image_src?[e.big_image_src]:undefined;c||b("MessengerParticipants.bs").getOrderedBigImageMulti([d],this.$4)}this.setState({inlineActionParam:b("PagesMessengerThreadUtils").getBatchActionMenuParam(a),thread:a,participants:h(b("immutable").Seq(a.participants).map(function(a){return[a,b("MessengerParticipants.bs").getNow(a)]})),participantImages:c})};a.prototype.$3=function(a){__p&&__p();if(a.comm_status===null)return;var c=!1;switch(a.comm_status){case b("PageCommItemStatus").DONE:c=!a.is_archived;break;case b("PageCommItemStatus").FOLLOW_UP:c=a.folder!==b("MessagingTag").INBOX;break;case b("PageCommItemStatus").TODO:c=a.folder!==b("MessagingTag").INBOX;break;case b("PageCommItemStatus").SPAM:c=a.folder!==b("MessagingTag").OTHER;break;default:break}c&&new(b("PageCommItemMessengerConsistencyTypedLogger"))().setCommItemSourceID(a.comm_source_id).setPageCommItemStatus(a.comm_status.toLowerCase()).setMessengerArchived(a.is_archived).setMessagingFolderTag(a.folder).setIsUnifiedInbox(!1).log()};a.prototype.shouldComponentUpdate=function(a,b){return a.selected!==this.props.selected||a.selectionMode!==this.props.selectionMode||a.isViewing!==this.props.isViewing||a.useHighlightTitle!==this.props.useHighlightTitle||b.participantImages!==this.state.participantImages?!0:this.state.thread!=b.thread};a.prototype.render=function(){if(this.state.thread.other_user_fbid===null)return b("React").createElement("div",null);var a=this.state.thread.unread_count&&this.state.thread.unread_count>0,c=this.state.thread.page_thread_info&&this.state.thread.page_thread_info.flagged,d=this.state.thread.page_thread_info&&this.state.thread.page_thread_info.customTagNames,e=[],f=b("PagesManagerCustomTagsStore").getCustomTags(this.props.pageID);(d||[]).map(function(a){f.has(a)&&e.push(f.get(a))});d=this.props;d.onViewingListItem;d=babelHelpers.objectWithoutProperties(d,["onViewingListItem"]);return b("React").createElement(b("PagesManagerMessagingListRow.react"),babelHelpers["extends"]({customTagsData:e,isFlagged:c,isUnread:a,onViewingListItem:this.$2,participantImages:this.state.participantImages,thread:this.state.thread},d,this.state))};a.prototype.updateThread=function(){var a=b("MessengerState.bs").getThreadMetaNow(this.props.pageID,this.props.listItem);if(!a)return;this.setState({thread:a,inlineActionParam:b("PagesMessengerThreadUtils").getBatchActionMenuParam(a)})};a.defaultProps={useHighlightTitle:!1};e.exports=a}),null);
__d("MessageSettingsPreviewTab",[],(function(a,b,c,d,e,f){e.exports=Object.freeze({MESSENGER_CODE:"messenger_code",RESPONSE_ASSISTANT:"response_assistant"})}),null);
__d("XPageMessageSettingsPreviewController",["XController"],(function(a,b,c,d,e,f){e.exports=b("XController").create("/pages/messaging/settings/preview_dialog/",{page_id:{type:"FBID",required:!0},tab:{type:"Enum",defaultValue:"messenger_code",enumType:1},__asyncDialog:{type:"Int"}})}),null);
__d("PagesManagerMessagingMessengerCodeLink.react",["ix","cx","fbt","AsyncRequest","Image.react","Link.react","MessageSettingsPreviewTab","React","TooltipData","XBasicFBNuxDismissController","XPageMessageSettingsPreviewController","XUIAmbientNUX.react","fbglyph","joinClasses"],(function(a,b,c,d,e,f,g,h,i){__p&&__p();var j,k=4156,l=4198;c=babelHelpers.inherits(a,b("React").Component);j=c&&c.prototype;function a(a){"use strict";j.constructor.call(this,a),this.state={isMessengerCodeNuxShown:this.props.showMessengerCodeNux,isResponseAssistantNuxShown:this.props.showResponseAssistantNux}}a.prototype.$1=function(a){"use strict";return function(){var c=b("XBasicFBNuxDismissController").getURIBuilder().setInt("nux_id",a).getURI();new(b("AsyncRequest"))().setURI(c).send();switch(a){case k:this.setState({isMessengerCodeNuxShown:!1});break;case l:this.setState({isResponseAssistantNuxShown:!1});break}}.bind(this)};a.prototype.$2=function(a){"use strict";__p&&__p();var c,d;switch(a){case k:c=this.state.isMessengerCodeNuxShown;d=i._("Download and share your Messenger Code");break;case l:c=this.state.isResponseAssistantNuxShown;d=i._("Get started with Response Assistant");break}return b("React").createElement(b("XUIAmbientNUX.react"),{contextRef:function(){return this.refs.codeLink}.bind(this),hasActionableContext:!0,onCloseButtonClick:this.$1(a),position:"above",shown:c,width:"auto"},d)};a.prototype.render=function(){"use strict";var a=i._("View Response Assistant and Messenger Code"),c=b("XPageMessageSettingsPreviewController").getURIBuilder().setFBID("page_id",this.props.pageID);this.state.isResponseAssistantNuxShown&&(c=c.setEnum("tab",b("MessageSettingsPreviewTab").RESPONSE_ASSISTANT));var d=b("joinClasses")("_59k4",this.props.className);return b("React").createElement("div",{className:d},b("React").createElement(b("Link.react"),babelHelpers["extends"]({ajaxify:c.getURI(),className:"_4d6o",ref:"codeLink",rel:"dialog"},b("TooltipData").propsFor(a)),b("React").createElement(b("Image.react"),{src:g("126342")})),this.state.isMessengerCodeNuxShown?this.$2(k):null,this.state.isResponseAssistantNuxShown?this.$2(l):null)};e.exports=a}),null);
__d("PagesManagerMessagingSearchInput.react",["cx","fbt","ContextualLayer.react","LayerHideOnEscape","PageCustomTagTypeaheadPresenter.react","React","SearchableEntry","SearchableTextInput.react","TokenizerToken.react","XUICloseButton.react","isEmpty","joinClasses"],(function(a,b,c,d,e,f,g,h){__p&&__p();var i;c=b("React").PropTypes;d=babelHelpers.inherits(a,b("React").Component);i=d&&d.prototype;function a(a,c){"use strict";__p&&__p();i.constructor.call(this,a,c),this.$1=function(){this.setState({showLayer:!1})}.bind(this),this.$8=function(a,c){var d=this.props.TokenRenderer||b("TokenizerToken.react"),e=b("joinClasses")("_2ei6",this.props.tokenClassName);return b("React").createElement(d,{className:e,key:a.getUniqueID(),label:a.getTitle(),entry:a,index:c,onRemove:this.props.onRemove})}.bind(this),this.$9=function(a){a=a.target.value;var b=!0;a===""&&(b=!1,this.props.onClear());this.setState({query:a,showLayer:b})}.bind(this),this.$10=function(){this.setState({query:""}),this.props.onClear()}.bind(this),this.$11=function(a,b){this.setState({matchedLabels:a})}.bind(this),this.$12=function(){this.state.query!==""&&(this.refs.input.getTextFieldDOM().select(),this.setState({showLayer:!0}))}.bind(this),this.$5=function(a){this.setState({highlightedEntry:a})}.bind(this),this.$6=function(){this.setState({highlightedEntry:{}})}.bind(this),this.$7=function(a){this.props.addCustomTag(a),this.setState({query:""})}.bind(this),this.state={query:"",showLayer:!1,matchedLabels:[],highlightedEntry:{}}}a.prototype.$2=function(a,b,event){"use strict";this.setState({showLayer:!1});switch(a){case"message":this.props.searchMessage.call(this,b);break;case"name":this.props.searchName.call(this,b);break}};a.prototype.$3=function(a){"use strict";return b("React").createElement("div",{className:"_4j2v"},b("React").createElement("li",{className:"_4j2w",onMouseDown:this.$2.bind(this,"message",this.state.query)},h._("Messages that contain \"{message search term}\"",[h._param("message search term",this.state.query)])),b("React").createElement("li",{className:"_4j2x",onMouseDown:this.$2.bind(this,"name",this.state.query)},h._("Names that contain \"{message search term}\"",[h._param("message search term",this.state.query)])))};a.prototype.$4=function(a){"use strict";var c=this.state.matchedLabels.filter(function(b){return!Object.prototype.hasOwnProperty.call(a,b.getUniqueID())});if(c.length==0)return b("React").createElement("div",null);else{var d=b("PageCustomTagTypeaheadPresenter.react").ViewRenderer;return b("React").createElement("div",null,b("React").createElement("li",{className:"_5n87"},h._("Labels")),b("React").createElement(d,{entries:c,highlightedEntry:this.state.highlightedEntry,onHighlight:this.$5,removeHighlight:this.$6,onSelect:this.$7,searchBar:!0}))}};a.prototype.render=function(){"use strict";__p&&__p();var a=this.props.entries&&this.props.entries.length>0,c=this.props.entries.map(this.$8,this),d={};if(a)for(var e=0,f=this.props.entries.length;e<f;e++){var g=this.props.entries[e];g=g.getUniqueID();d[g]=!0}g=this.props;e=g.className;f=g.placeholder;g=babelHelpers.objectWithoutProperties(g,["className","placeholder"]);e=b("joinClasses")("_29s6"+(a?" _29s7":""),e);f=a?"":this.props.placeholder;return b("React").createElement("div",{className:e},b("React").createElement("div",{className:"_29s8"},c),b("React").createElement(b("SearchableTextInput.react"),babelHelpers["extends"]({onBlur:this.$1,onChange:this.$9,onFocus:this.$12,onEntriesFound:this.$11,placeholder:f,queryString:this.state.query,ref:"input"},g)),b("React").createElement(b("XUICloseButton.react"),{className:"_3i2o"+(b("isEmpty")(this.state.query)?" hidden_elem":""),onClick:this.$10,size:"medium"}),this.props.contextRef&&this.props.contextRef()?b("React").createElement(b("ContextualLayer.react"),{behaviors:{LayerHideOnEscape:b("LayerHideOnEscape")},containerWidthMatchContext:!0,contextRef:this.props.contextRef,shown:this.state.showLayer,position:"below"},this.$3(d)):null)};a.propTypes={addCustomTag:c.func,contextRef:c.func,searchMessage:c.func,searchName:c.func,textInputClassName:c.string,tokenClassName:c.string,TokenRenderer:c.element,entries:c.arrayOf(c.instanceOf(b("SearchableEntry")))};e.exports=a}),null);
__d("PagesManagerMessagingSearchView.react",["cx","fbt","ix","Image.react","PageCustomTagSearchSource","PageCustomTagTypeaheadPresenter.react","PagesAdminToolUIActionType","PagesContextCardCustomTag.react","PagesEnumTag.react","PagesManagerLogger","PagesManagerMessagingFilterActions","PagesManagerMessagingFilterStore","PagesManagerMessagingNavigationUnitKey","PagesManagerMessagingSearchInput.react","PagesManagerMessagingThreadlistAction","PagesMessagingSearchMode","React","emptyFunction"],(function(a,b,c,d,e,f,g,h,i){"use strict";__p&&__p();var j;c=babelHelpers.inherits(a,b("React").Component);j=c&&c.prototype;function a(a,c){__p&&__p();j.constructor.call(this,a,c),this.$5=function(a){a=a.target.value;var b=!0;a===""&&(b=!1);this.setState({query:a,showLayer:b})}.bind(this),this.$4=function(a){b("PagesManagerMessagingThreadlistAction").removeSearchCustomTag(this.props.pageID,a,"search_block")}.bind(this),this.$9=function(){b("PagesManagerMessagingFilterActions").changeFilter(this.props.pageID,b("PagesManagerMessagingFilterStore").getAvailableFilters().get(0))}.bind(this),this.$1=function(a){b("PagesManagerMessagingThreadlistAction").changeSearchTerm(this.props.pageID,a.target.value,b("PagesManagerMessagingFilterStore").getActiveFolderName(),b("PagesMessagingSearchMode").ALL)}.bind(this),this.$2=function(){b("PagesManagerMessagingThreadlistAction").resetSearch(this.props.pageID)}.bind(this),this.$3=function(a){a.key==="Escape"&&b("PagesManagerMessagingThreadlistAction").resetSearch(this.props.pageID)}.bind(this),this.$7=function(a){b("PagesManagerLogger").logMessageInboxUIAction(b("PagesAdminToolUIActionType").MESSAGE_INBOX_CLICK_SEARCH_NAMES,this.props.pageID,{query:a}),b("PagesManagerMessagingThreadlistAction").changeSearchTerm(this.props.pageID,a,b("PagesManagerMessagingFilterStore").getActiveFolderName(),b("PagesMessagingSearchMode").NAME_SEARCH),this.setState({showLayer:!1})}.bind(this),this.$8=function(a){b("PagesManagerLogger").logMessageInboxUIAction(b("PagesAdminToolUIActionType").MESSAGE_INBOX_CLICK_SEARCH_MESSAGES,this.props.pageID,{query:a}),b("PagesManagerMessagingThreadlistAction").changeSearchTerm(this.props.pageID,a,b("PagesManagerMessagingFilterStore").getActiveFolderName(),b("PagesMessagingSearchMode").MESSAGE_SEARCH),this.setState({showLayer:!1})}.bind(this),this.$6=function(a){this.state.query!==""&&this.setState({showLayer:!0})}.bind(this),this.state={query:"",showLayer:!1,highlightedEntry:{}}}a.prototype.$10=function(){var a=[];this.props.currentSearchCustomTagNames.toArray().map(function(b){this.props.customTagSearchSource.has(b)&&a.push(this.props.customTagSearchSource.get(b))}.bind(this));return a};a.prototype.$11=function(){var a=h._("Search people and messages");return b("React").createElement(b("PagesManagerMessagingSearchInput.react"),{addCustomTag:b("emptyFunction"),className:"_5ptj",contextRef:function(){return this.refs.input}.bind(this),onClick:this.$6,onClear:this.$2,onRemove:b("emptyFunction"),placeholder:a,searchMessage:this.$8,searchName:this.$7,entries:[],excludedEntries:[],TokenRendere:b("PageCustomTagTypeaheadPresenter.react").ViewRenderer,searchSource:b("PageCustomTagSearchSource").getInstance([],!1)})};a.prototype.$12=function(){return this.props.currentSearchCustomTagNames.toArray().length===0&&this.props.activeFilter.getKey()!==b("PagesManagerMessagingNavigationUnitKey").FILTERS.FLAGGED?null:b("React").createElement("div",{className:"_4w11"},this.props.activeFilter.getKey()===b("PagesManagerMessagingNavigationUnitKey").FILTERS.FLAGGED?b("React").createElement(b("PagesEnumTag.react"),{canRemove:!0,onRemove:this.$9,unit:this.props.activeFilter}):null,this.$10().map(function(a){return b("React").createElement(b("PagesContextCardCustomTag.react"),{canRemove:!0,hideOnRemove:!0,key:a.id,onRemove:this.$4,tagData:a})}.bind(this)))};a.prototype.render=function(){var a={left:this.props.arrowTopX,top:this.props.arrowTopY-8};return b("React").createElement("div",null,b("React").createElement("div",{ref:"arrow",className:"_1u5x"+(this.props.currentSearchCustomTagNames.toArray().length>0||b("PagesManagerMessagingFilterStore").getActiveFilterName()===b("PagesManagerMessagingNavigationUnitKey").FILTERS.FLAGGED||this.props.isSearchActive?" hidden_elem":""),style:a}),b("React").createElement("div",{className:"_3i2n _4m_d"+(this.props.currentSearchCustomTagNames.toArray().length>0||b("PagesManagerMessagingFilterStore").getActiveFilterName()===b("PagesManagerMessagingNavigationUnitKey").FILTERS.FLAGGED?" hidden_elem":""),ref:"input"},b("React").createElement(b("Image.react"),{className:"_5pti",src:i("27278")}),this.$11()),this.$12())};e.exports=a}),null);
__d("PagesManagerMessagingUIActionTypes",["keyMirrorRecursive"],(function(a,b,c,d,e,f){"use strict";a=b("keyMirrorRecursive")({SET_SEARCH_ARROW_TOP_X:"",SET_SEARCH_ARROW_TOP_Y:"",SET_SEARCH_BAR_SHADOW:""});e.exports=a}),null);
__d("PagesManagerMessagingUIStore",["FluxStore","PagesManagerDispatcher","PagesManagerMessagingUIActionTypes"],(function(a,b,c,d,e,f){__p&&__p();var g;c=babelHelpers.inherits(a,b("FluxStore"));g=c&&c.prototype;function a(){"use strict";g.constructor.call(this,b("PagesManagerDispatcher")),this.$PagesManagerMessagingUIStore1=0,this.$PagesManagerMessagingUIStore2=0,this.$PagesManagerMessagingUIStore3=!1}a.prototype.__onDispatch=function(a){"use strict";__p&&__p();switch(a.type){case b("PagesManagerMessagingUIActionTypes").SET_SEARCH_ARROW_TOP_X:this.$PagesManagerMessagingUIStore1=a.offset;this.__emitChange();break;case b("PagesManagerMessagingUIActionTypes").SET_SEARCH_ARROW_TOP_Y:this.$PagesManagerMessagingUIStore2=a.offset;this.__emitChange();break;case b("PagesManagerMessagingUIActionTypes").SET_SEARCH_BAR_SHADOW:this.$PagesManagerMessagingUIStore3=a.status;this.__emitChange();break}};a.prototype.getSearchBarArrowTopX=function(){"use strict";return this.$PagesManagerMessagingUIStore1};a.prototype.getSearchBarArrowTopY=function(){"use strict";return this.$PagesManagerMessagingUIStore2};a.prototype.getSearchBarShadow=function(){"use strict";return this.$PagesManagerMessagingUIStore3};a.__moduleID=e.id;e.exports=new a()}),null);
__d("PagesManagerMessagingSearchContainer.react",["FluxContainer","PagesManagerCustomTagsAction","PagesManagerCustomTagsStore","PagesManagerMessagingFilterStore","PagesManagerMessagingSearchStore","PagesManagerMessagingSearchView.react","PagesManagerMessagingUIStore","React"],(function(a,b,c,d,e,f){"use strict";__p&&__p();var g;g=babelHelpers.inherits(a,b("React").Component);g&&g.prototype;a.getStores=function(){return[b("PagesManagerMessagingFilterStore"),b("PagesManagerCustomTagsStore"),b("PagesManagerMessagingSearchStore"),b("PagesManagerMessagingUIStore")]};a.prototype.UNSAFE_componentWillMount=function(){b("PagesManagerCustomTagsStore").hasCustomTags(this.props.pageID)||b("PagesManagerCustomTagsAction").fetch(this.props.pageID)};a.calculateState=function(a,c){return{activeFilter:b("PagesManagerMessagingFilterStore").getActiveFilter(),arrowTopX:b("PagesManagerMessagingUIStore").getSearchBarArrowTopX(),arrowTopY:b("PagesManagerMessagingUIStore").getSearchBarArrowTopY(),currentSearchCustomTagNames:b("PagesManagerMessagingSearchStore").getCurrentSearchCustomTagNames(),currentSearchTerm:b("PagesManagerMessagingSearchStore").getCurrentSearchTerm(),isSearchActive:b("PagesManagerMessagingSearchStore").getIsInSearchMode(),customTagSearchSource:b("PagesManagerCustomTagsStore").getCustomTags(c.pageID)}};a.prototype.render=function(){return b("React").createElement(b("PagesManagerMessagingSearchView.react"),babelHelpers["extends"]({},this.props,{activeFilter:this.state.activeFilter,arrowTopX:this.state.arrowTopX,arrowTopY:this.state.arrowTopY,initSearchTerm:this.state.currentSearchTerm,isSearchActive:this.state.isSearchActive,customTagSearchSource:this.state.customTagSearchSource,currentSearchCustomTagNames:this.state.currentSearchCustomTagNames}))};function a(){g.apply(this,arguments)}e.exports=b("FluxContainer").create(a,{withProps:!0})}),null);
__d("PagesManagerMessagingSimpleList.react",["cssVar","cx","fbt","invariant","CenteredContainer.react","PagesManagerAction","PagesManagerListRowContainer.react","PagesMessagingSearchMode","PagesSelectableSimpleList.react","React","XUISpinner.react"],(function(a,b,c,d,e,f,g,h,i,j){"use strict";__p&&__p();var k;c=babelHelpers.inherits(a,b("React").PureComponent);k=c&&c.prototype;function a(){__p&&__p();var a,c;for(var d=arguments.length,e=new Array(d),f=0;f<d;f++)e[f]=arguments[f];return c=(a=k.constructor).call.apply(a,[this].concat(e)),this.$2=function(a,c,d){switch(this.props.searchMode){case b("PagesMessagingSearchMode").MESSAGE_SEARCH:c=Object.keys(this.props.snippetSearchResult);d=c[a];return b("React").createElement(b("PagesManagerListRowContainer.react"),babelHelpers["extends"]({ChildClass:this.props.listRowContainer,highlightText:this.props.searchTerm,listItem:d,onViewingListItem:this.$1,pageID:this.props.pageID,ref:this.$3(a),key:this.props.searchMode+this.$3(a),snippetSearchResult:this.props.snippetSearchResult[d],type:"li",useHighlightTitle:!1,readReceipts:this.props.readReceipts},this.props.containerProps));case b("PagesMessagingSearchMode").NAME_SEARCH:c=this.props.searchResult[a];return b("React").createElement(b("PagesManagerListRowContainer.react"),babelHelpers["extends"]({ChildClass:this.props.listRowContainer,disableCheckBox:!0,highlightText:this.props.searchTerm,listItem:c,ref:this.$3(a),key:this.props.searchMode+this.$3(a),onViewingListItem:this.$1,pageID:this.props.pageID,type:"li",useHighlightTitle:!0,readReceipts:this.props.readReceipts},this.props.containerProps));default:j(0)}}.bind(this),this.$4=function(a,c,d){var e=this.props.list[a];return b("React").createElement(b("PagesManagerListRowContainer.react"),babelHelpers["extends"]({ChildClass:this.props.listRowContainer,ref:this.$3(a),key:this.$3(a),listItem:e,onSelected:d,onViewingListItem:this.$1,pageID:this.props.pageID,selected:c,type:"li",readReceipts:this.props.readReceipts},this.props.containerProps))}.bind(this),this.$3=function(a){a=this.props.list[a];return this.props.getKey(a)}.bind(this),this.$5=function(){return this.props.list.map(function(a){return this.props.getKey(a)}.bind(this))}.bind(this),this.$7=function(){this.props.isInSearchMode&&this.props.loadMore(this.props.searchMode,this.props.searchTerm);return this.props.onScroll()}.bind(this),c}a.prototype.$1=function(a){b("PagesManagerAction").viewListItem(a)};a.prototype.getListRowContainer=function(a){var b=this.refs.selectableList;if(b===null)return null;b=b.getSimpleList();if(!b)return null;b=b.refs[a];return!b?null:b.refs[a]};a.prototype.render=function(){return b("React").createElement(b("PagesSelectableSimpleList.react"),{actionBarLeftComponent:this.props.isInSearchMode?undefined:this.props.folderDropDown,actionBarRightComponent:this.props.actionBarRightContainer,allRowKeysGetter:this.props.isInSearchMode?undefined:this.$5,canLoadMoreRows:this.props.hasMoreResult,header:this.$6(),height:this.props.height,loadingIndicator:this.props.loadingMoreSpinner,onSelectionChange:this.props.onSelectionChange,onRequestMoreRows:this.$7,ref:"selectableList",replaceContent:this.$8(),rowCount:this.$9(),rowHeight:parseInt("72px",10),rowKeyGetter:this.$3,rowRenderer:this.props.isInSearchMode?this.$2:this.$4,showHeader:!0})};a.prototype.$9=function(){if(this.props.isInSearchMode)switch(this.props.searchMode){case b("PagesMessagingSearchMode").MESSAGE_SEARCH:return Object.keys(this.props.snippetSearchResult).length;case b("PagesMessagingSearchMode").NAME_SEARCH:return this.props.searchResult.length}return this.props.list.length};a.prototype.$6=function(){var a;if(this.props.isInSearchMode)switch(this.props.searchMode){case b("PagesMessagingSearchMode").MESSAGE_SEARCH:a=i._("Messages that contain \"{message search term}\"",[i._param("message search term",this.props.searchTerm)]);break;case b("PagesMessagingSearchMode").NAME_SEARCH:a=i._("Names that contain \"{message search term}\"",[i._param("message search term",this.props.searchTerm)]);break}a&&(a=b("React").createElement("div",{className:"_16-z"},a));return b("React").createElement("div",null,this.props.header,a)};a.prototype.$8=function(){if(this.props.list.length)return null;return!this.props.initLoading?this.props.emptyView:b("React").createElement(b("CenteredContainer.react"),{fullHeight:!0,vertical:!0},b("React").createElement(b("XUISpinner.react"),{size:"large"}))};e.exports=a}),null);
__d("PagesManagerMessagingUIActions",["PagesManagerDispatcher","PagesManagerMessagingUIActionTypes"],(function(a,b,c,d,e,f){a={setSearchBarArrowTopX:function(a){b("PagesManagerDispatcher").dispatch({offset:a,type:b("PagesManagerMessagingUIActionTypes").SET_SEARCH_ARROW_TOP_X})},setSearchBarArrowTopY:function(a){b("PagesManagerDispatcher").dispatch({offset:a,type:b("PagesManagerMessagingUIActionTypes").SET_SEARCH_ARROW_TOP_Y})},setSearchBarShaddow:function(a){b("PagesManagerDispatcher").dispatch({status:a,type:b("PagesManagerMessagingUIActionTypes").SET_SEARCH_BAR_SHADOW})}};e.exports=a}),null);
__d("PagesManagerMessagingListContainer.react",["cx","fbt","ix","ContextualDialogArrow","ContextualLayerAutoFlip","FluxContainer","Image.react","LeftRight.react","MercuryThreadInformer","MercuryThreadlistConstants","MessageThreadViewSource","PagesAdminToolUIActionType","PagesEventObserver","PagesEventType","PagesManagerAction","PagesManagerAwayContainer.react","PagesManagerAwayToggle.react","PagesManagerInboxSwitcher.react","PagesManagerListBatchActionContainer.react","PagesManagerLogger","PagesManagerMessagingBatchActionHeaderContainer.react","PagesManagerMessagingFilterActions","PagesManagerMessagingFilterPanelSwitch.react","PagesManagerMessagingFilterStore","PagesManagerMessagingListRowContainer.react","PagesManagerMessagingLogger","PagesManagerMessagingMessengerCodeLink.react","PagesManagerMessagingNavigationUnitKey","PagesManagerMessagingNUXActions","PagesManagerMessagingSearchContainer.react","PagesManagerMessagingSearchStore","PagesManagerMessagingSimpleList.react","PagesManagerMessagingTabPerfEvents","PagesManagerMessagingThreadInteractionHelper","PagesManagerMessagingThreadlistAction","PagesManagerMessagingThreadlistStore","PagesManagerMessagingUIActions","PagesManagerMessagingUIStore","PagesManagerPerfLogger","PagesManagerStore","PagesMessagingPerfLoggerEvent","PagesMessagingPerfTypedLogger","PagesMessagingSearchMode","PagesSelectableSimpleListAction","PopoverMenu.react","React","ReactDOM","ReactXUIMenu","SubscriptionsHandler","Vector","XUICard.react"],(function(a,b,c,d,e,f,g,h,i){"use strict";__p&&__p();var j,k=b("ReactXUIMenu").Item;a=babelHelpers.inherits(l,b("React").Component);j=a&&a.prototype;function l(a){__p&&__p();j.constructor.call(this,a),this.$15=function(a,c){switch(a){case b("PagesMessagingSearchMode").NAME_SEARCH:b("PagesManagerMessagingThreadlistAction").loadMoreNameResult(this.props.pageID,c,b("PagesManagerMessagingFilterStore").getActiveFolderName());break;case b("PagesMessagingSearchMode").MESSAGE_SEARCH:b("PagesManagerMessagingThreadlistAction").loadMoreSnippetResult(this.props.pageID,c,b("PagesManagerMessagingFilterStore").getActiveFolderName());break}}.bind(this),this.$16=function(){var a=b("PagesManagerMessagingFilterStore").getNavigationKey();a=b("PagesManagerMessagingThreadlistStore").hasMoreItem(a)&&!b("PagesManagerMessagingThreadlistStore").isLoading();if(a&&!this.state.isInSearchMode){a=this.$7(this.state);this.$8()&&(this.$2.set(a,Date.now()),new(b("PagesMessagingPerfTypedLogger"))().setPageID(this.props.pageID).setEventName(b("PagesMessagingPerfLoggerEvent").THREADLIST_LOAD_MORE_EVENT).setThreadOffset(a).log());b("PagesManagerMessagingThreadlistAction").fetchThreadlist(this.props.pageID,a,b("MercuryThreadlistConstants").WEBMESSENGER_MORE_COUNT)}}.bind(this),this.$17=function(){this.refs.listView.refs.selectableList.refs.scrollableArea.getArea().isScrolledToTop()?b("PagesManagerMessagingUIActions").setSearchBarShaddow(!1):b("PagesManagerMessagingUIStore").getSearchBarShadow()||b("PagesManagerMessagingUIActions").setSearchBarShaddow(!0)}.bind(this),this.$20=function(a,c){a=this.state.folderDropdown.filter(function(a){return a.getKey()===c.item.getValue()});if(a.count()==0)return;a=a.get(0);b("PagesManagerLogger").logMessageInboxUIAction(b("PagesAdminToolUIActionType").MESSAGE_INBOX_SWITCH_FOLDER,this.props.pageID,{folder:a.getKey(),position:"dropdown"});b("PagesManagerMessagingFilterActions").changeFilter(this.props.pageID,a)}.bind(this),this.$1=!1,this.$2=new Map(),this.$5=function(){this.refs.listView.clearSelection?this.refs.listView.clearSelection():b("PagesSelectableSimpleListAction").deselectAll()}.bind(this)}l.getStores=function(){return[b("PagesManagerMessagingThreadlistStore"),b("PagesManagerMessagingFilterStore"),b("PagesManagerMessagingSearchStore"),b("PagesManagerMessagingUIStore")]};l.calculateSearchState=function(a,c){__p&&__p();a=b("PagesManagerMessagingSearchStore").getThreadNameSearchResults();c=b("PagesManagerMessagingSearchStore").getIsSearchingName();var d=b("PagesManagerMessagingSearchStore").hasMoreNameSearchResult(),e=b("PagesManagerMessagingSearchStore").hasMoreSnippetSearchResult(),f=b("PagesManagerMessagingSearchStore").getThreadSnippetSearchResults(),g=b("PagesManagerMessagingSearchStore").getIsSearchingSnippet(),h=[],i={},j=!1,k=!1;switch(b("PagesManagerMessagingSearchStore").getSearchMode()){case b("PagesMessagingSearchMode").MESSAGE_SEARCH:i=f;j=e;k=g;break;case b("PagesMessagingSearchMode").NAME_SEARCH:h=a;j=d;k=c;break}return{hasMoreResult:j,isInSearchMode:!0,isSearching:k,searchTerm:b("PagesManagerMessagingSearchStore").getCurrentSearchTerm(),searchMode:b("PagesManagerMessagingSearchStore").getSearchMode(),searchResult:h,snippetSearchResult:i}};l.calsulateListState=function(a,c){__p&&__p();a=b("PagesManagerMessagingThreadlistStore").getItemList(c.pageID);var d=b("PagesManagerMessagingThreadlistStore").hasMoreItem(b("PagesManagerMessagingFilterStore").getNavigationKey()),e=a.findIndex(function(a){return a===b("PagesManagerStore").getViewingListItem()})>=0,f=b("PagesManagerStore").getInitialViewingItem(),g=b("PagesManagerStore").getViewingListItem(),h=a.length>0;f=f&&f===g;f=!f&&(!g&&h||g&&h&&!e);if(f){g=a[0];b("PagesManagerAction").viewListItem(g);b("PagesManagerMessagingThreadInteractionHelper").handlePermalinkUpdate(g,c.pageID)}h=b("PagesManagerMessagingThreadlistStore").isLoading();e=!1;a.length===0&&(e=h);return{hasMoreResult:d,initLoading:e,isInSearchMode:!1,threadIDList:a}};l.calculateState=function(a,c){__p&&__p();var d=null;b("PagesManagerMessagingSearchStore").getIsInSearchMode()&&b("PagesManagerMessagingSearchStore").getCurrentSearchTerm().length>0?d=l.calculateSearchState(a,c):d=l.calsulateListState(a,c);a&&a.initLoading&&!d.initLoading&&b("PagesManagerMessagingNUXActions").setThreadlistReady();d.isFiltering=b("PagesManagerMessagingFilterStore").getIsFiltering();d.folderDropdown=b("PagesManagerMessagingFilterStore").getFolderDropDown();d.unitNotificationCountMap=b("PagesManagerMessagingFilterStore").getUnitNotificationCountMap(c.pageID);d.showShadow=b("PagesManagerMessagingUIStore").getSearchBarShadow();d.currentSearchCustomTagNames=b("PagesManagerMessagingSearchStore").getCurrentSearchCustomTagNames();d.activeFilter=b("PagesManagerMessagingFilterStore").getActiveFilter();return d};l.prototype.$6=function(){return this.state.currentSearchCustomTagNames.size!==0||this.state.activeFilter.getKey()===b("PagesManagerMessagingNavigationUnitKey").FILTERS.FLAGGED};l.prototype.$7=function(a){return a.threadIDList.length};l.prototype.$8=function(){return b("PagesManagerMessagingFilterStore").getIsInboxAll()&&!this.state.isInSearchMode};l.prototype.componentDidUpdate=function(a,c){__p&&__p();if(this.$8()){a=this.$7(c);if(a!==this.$7(this.state)){var d=this.$2.get(a);d=d?Date.now()-d:0;new(b("PagesMessagingPerfTypedLogger"))().setPageID(this.props.pageID).setEventName(b("PagesMessagingPerfLoggerEvent").THREADLIST_RENDER_COMPLETE_EVENT).setPerfTime(d).setThreadOffset(a).log()}}this.$1&&!this.state.initLoading&&(this.$1=!1,b("PagesEventObserver").notify(b("PagesEventType").MESSAGES_INBOX_LOAD_END,this.props.pageID,{flowID:this.props.flowID,page_id:this.props.pageID,loading_event_time:Date.now()}));(this.state.isFiltering!==c.isFiltering||this.state.activeFilter!==c.activeFilter||this.state.currentSearchCustomTagNames.size===0&&c.currentSearchCustomTagNames.size!==0)&&this.$9()};l.prototype.componentDidMount=function(){b("PagesManagerPerfLogger").log(b("PagesManagerMessagingTabPerfEvents").MESSAGE_TAB_THREAD_LIST_DID_RENDER,this.props.perfParams),b("PagesManagerMessagingThreadlistAction").initThreadlist(this.props.pageID),b("PagesEventObserver").notify(b("PagesEventType").MESSAGES_THREADLIST_LOAD_START,this.props.pageID,{flowID:this.props.flowID,page_id:this.props.pageID,loading_event_time:Date.now()}),b("PagesManagerMessagingLogger").logPageViewFolderEvent(this.props.pageID,b("PagesManagerMessagingFilterStore").getActiveFolder(),b("MessageThreadViewSource").NEW_MESSAGETAB),this.$8()&&(this.$2.set(0,Date.now()),new(b("PagesMessagingPerfTypedLogger"))().setPageID(this.props.pageID).setEventName(b("PagesMessagingPerfLoggerEvent").THREADLIST_LOAD_MORE_EVENT).setThreadOffset(0).log()),this.$1=!0,this.$3=b("MercuryThreadInformer").getForFBID(this.props.pageID),this.$4=new(b("SubscriptionsHandler"))(),this.$4.addSubscriptions(this.$3.subscribe("threadlist-updated",function(a,b){return this.$10()}.bind(this)),this.$3.subscribe("threads-updated",function(a,b){return this.$11(Object.keys(b))}.bind(this))),this.$9()};l.prototype.componentWillUnmount=function(){this.$4&&this.$4.release()};l.prototype.$12=function(a){return a};l.prototype.$13=function(){b("PagesManagerMessagingThreadlistAction").loadMoreNameResult(this.props.pageID,this.state.searchTerm,b("PagesManagerMessagingFilterStore").getActiveFolderName())};l.prototype.$14=function(){b("PagesManagerMessagingThreadlistAction").loadMoreSnippetResult(this.props.pageID,this.state.searchTerm,b("PagesManagerMessagingFilterStore").getActiveFolderName())};l.prototype.$10=function(){b("PagesManagerMessagingThreadlistAction").updateThreadlist(this.props.pageID)};l.prototype.$11=function(a){a.forEach(function(a){if(this.refs.searchResult){var b=this.refs.searchResult.refs[a];b&&b.refs.childClass.updateThread()}else if(this.refs.listView){b=this.refs.listView.getListRowContainer(a);b&&b.refs.childClass.updateThread()}}.bind(this))};l.prototype.$9=function(){__p&&__p();if(this.refs.fileMenu&&this.refs.unreadCount){var a=0;if(this.state.isFiltering){var c=b("Vector").getElementDimensions(b("ReactDOM").findDOMNode(this.refs.filterSwitch)).x,d=b("ReactDOM").findDOMNode(this.refs.filterSwitch).offsetLeft;a=d+c-4}else{d=b("Vector").getElementDimensions(b("ReactDOM").findDOMNode(this.refs.fileMenu)).x;c=b("Vector").getElementDimensions(b("ReactDOM").findDOMNode(this.refs.unreadCount)).x;var e=b("ReactDOM").findDOMNode(this.refs.fileMenu).offsetLeft;a=e+(d-c)/2}b("PagesManagerMessagingUIActions").setSearchBarArrowTopX(a)}};l.prototype.$18=function(){var a=b("React").createElement(b("PagesManagerMessagingFilterPanelSwitch.react"),{pageID:this.props.pageID,ref:"filterSwitch",height:this.$19(),isFiltering:b("PagesManagerMessagingFilterStore").getIsFiltering(),enableManageTags:this.props.config.enableManageTags,showNUX:this.props.config.showFilterNUX});return b("React").createElement("div",null,b("React").createElement(b("PagesManagerListBatchActionContainer.react"),{ChildClass:b("PagesManagerMessagingBatchActionHeaderContainer.react"),canUseDoneFolder:this.props.config.canUseDoneFolder,pageID:this.props.pageID,onSelectionClear:this.$5}),a)};l.prototype.$21=function(a){return b("React").createElement(k,{key:a.getKey(),value:a.getKey()},b("React").createElement("div",{className:"_-7b"},a.getDisplayTitle()))};l.prototype.$22=function(){var a=b("React").createElement(b("ReactXUIMenu"),{onItemClick:this.$20},this.state.folderDropdown.map(this.$21)),c=b("PagesManagerMessagingFilterStore").getActiveFolderDropDown(),d=this.state.unitNotificationCountMap.get(c);return b("React").createElement(b("PopoverMenu.react"),{layerBehaviors:[b("ContextualDialogArrow"),b("ContextualLayerAutoFlip")],menu:a},b("React").createElement("div",{className:"_-7c _46l"},b("React").createElement("span",{ref:"fileMenu"},c.getDisplayTitle()),b("React").createElement("div",{className:"_-7h _-7e"+(d===0?" hidden_elem":""),ref:"unreadCount"},d)))};l.prototype.$23=function(){return""};l.prototype.$19=function(){var a=b("ReactDOM").findDOMNode(this.refs.threadListFooter),c=0;a!==null&&(c=b("Vector").getElementDimensions(a).y);return this.props.height-c};l.prototype.$24=function(){return b("React").createElement(b("XUICard.react"),{className:"_alj",ref:"threadListFooter"},b("React").createElement(b("LeftRight.react"),null,b("React").createElement(b("PagesManagerAwayContainer.react"),{pageID:this.props.pageID,RenderClass:b("PagesManagerAwayToggle.react")}),b("React").createElement(b("PagesManagerMessagingMessengerCodeLink.react"),{className:"_h38",pageID:this.props.pageID,showMessengerCodeNux:this.props.config.shouldShowMessengerCodeNUX,showResponseAssistantNux:this.props.config.shouldShowResponseAssistantNUX})))};l.prototype.$25=function(){return b("React").createElement("div",{ref:"threadListHeader"},b("React").createElement("div",{className:(this.state.isFiltering?"_4f_9":"")+" _alk"+(this.state.showShadow&&!this.props.config.showInboxSwitcher?" _1axm":"")},b("React").createElement(b("PagesManagerMessagingSearchContainer.react"),{pageID:this.props.pageID})),this.props.config.showInboxSwitcher?b("React").createElement("div",{className:this.state.showShadow?"_1axm":""},b("React").createElement(b("PagesManagerInboxSwitcher.react"),{pageID:this.props.pageID,pageToken:this.props.config.uriToken})):null)};l.prototype.$26=function(){return this.$6()?b("React").createElement("div",{className:"_3-8-",key:"emptyView"},b("React").createElement(b("Image.react"),{className:"_5gxr",src:i("94993")}),b("React").createElement("div",{className:"_5gxs"},h._("No conversations match the labels that you've selected"))):b("React").createElement("div",{key:"emptyView"})};l.prototype.$27=function(){return b("React").createElement(b("PagesManagerMessagingSimpleList.react"),babelHelpers["extends"]({},this.props,{actionBarRightContainer:this.$18(),folderDropDown:this.$22(),containerProps:{config:this.props.config},emptyView:this.$26(),getKey:this.$12,handleScroll:this.$17,hasMoreResult:this.state.hasMoreResult,header:this.$25(),height:this.$19(),initLoading:this.state.initLoading,isFiltering:this.state.isFiltering,isInSearchMode:this.state.isInSearchMode,isSearching:this.state.isSearching,isFilteringByTag:this.$6(),list:this.state.threadIDList,listRowContainer:b("PagesManagerMessagingListRowContainer.react"),loadMore:this.$15,navigationKey:b("PagesManagerMessagingFilterStore").getNavigationKey(),onScroll:this.$16,onSelectionChange:this.props.onSelectionChange,ref:"listView",scrollableWidth:320,selectAllLabel:this.$23(),searchTerm:this.state.searchTerm,searchMode:this.state.searchMode,searchResult:this.state.searchResult,snippetSearchResult:this.state.snippetSearchResult}))};l.prototype.render=function(){return b("React").createElement("div",null,this.$27(),this.$24())};e.exports=b("FluxContainer").create(l,{withProps:!0})}),null);
__d("PagesManagerMessagingApp.react",["cx","MercuryServerPayloadPreprocessor","MercurySyncPageEnvironment","MessengerState.bs","PagesEventObserver","PagesEventType","PagesManagerAction","PagesManagerAwayBanner.react","PagesManagerAwayContainer.react","PagesManagerDetailContainer.react","PagesManagerListContainer.react","PagesManagerListDetailLayout.react","PagesManagerMessagingDetailContainer.react","PagesManagerMessagingListContainer.react","PagesManagerMessagingLogger","PagesManagerMessagingTabPerfEvents","PagesManagerPerfLogger","PagesManagerStaticStore","PagesMessengerMessagePageButton.react","React","ReactDOM","joinClasses","PagesManagerStore"],(function(a,b,c,d,e,f,g){__p&&__p();var h;b("PagesManagerStore");c=babelHelpers.inherits(a,b("React").Component);h=c&&c.prototype;function a(a,c){"use strict";h.constructor.call(this,a,c),b("PagesManagerStaticStore").setPageID(this.props.pageID),this.state={rootElement:null},this.$1=function(){this.refs.body&&this.refs.body.recalculateHeight()}.bind(this)}a.prototype.UNSAFE_componentWillMount=function(){"use strict";b("MercurySyncPageEnvironment").setUp(this.props.pageID,this.props.initSyncSequenceID),b("PagesManagerMessagingLogger").logMessagesSectionViewEvent(this.props.pageID),b("PagesEventObserver").notify(b("PagesEventType").MESSAGES_THREADLIST_LAYOUT_LOAD_START,this.props.pageID,{flowID:this.props.flowID,page_id:this.props.pageID,loading_event_time:Date.now()}),this.props.initialThreadID&&b("PagesManagerAction").setInitialViewItem(this.props.initialThreadID)};a.prototype.componentDidMount=function(){"use strict";b("PagesManagerPerfLogger").log(b("PagesManagerMessagingTabPerfEvents").MESSAGE_TAB_APP_DID_RENDER,this.props.perfParams);var a=b("MercuryServerPayloadPreprocessor").getForFBID(this.props.pageID);a.handleUpdate(this.props.config.jewelInitData);this.setState({rootElement:b("ReactDOM").findDOMNode(this)})};a.prototype.componentWillUnmount=function(){"use strict";b("MercurySyncPageEnvironment").tearDown(this.props.pageID)};a.prototype.$2=function(a){"use strict";return a?a:null};a.prototype.$3=function(){"use strict";return this.props.config.enabledPageToPageMessaging?b("React").createElement(b("PagesMessengerMessagePageButton.react"),{flowID:this.props.flowID,pageID:this.props.pageID,pagesCommNewMessagesTab:!0,size:"large"}):null};a.prototype.$4=function(){"use strict";return b("React").createElement("div",{className:"_n4_"})};a.prototype.$5=function(a){"use strict";return b("React").createElement("div",{className:"_14vf"},b("React").createElement(b("PagesManagerListContainer.react"),{config:this.props.config,ChildContainerClass:b("PagesManagerMessagingListContainer.react"),flowID:this.props.flowID,pageID:this.props.pageID,perfParams:this.props.perfParams,readReceipts:a}))};a.prototype.$6=function(){"use strict";return b("React").createElement("div",null,b("React").createElement(b("PagesManagerDetailContainer.react"),{config:this.props.config,pageID:this.props.pageID,ChildContainerClass:b("PagesManagerMessagingDetailContainer.react"),getListItemKey:this.$2,perfParams:this.props.perfParams}))};a.prototype.$7=function(){"use strict";return!this.props.config.enableAwayToggle?null:b("React").createElement("div",null,b("React").createElement(b("PagesManagerAwayContainer.react"),{pageID:this.props.pageID,RenderClass:b("PagesManagerAwayBanner.react")}))};a.prototype.render=function(){"use strict";return b("React").createElement("div",null,b("React").createElement("div",{className:"_15i2"},b("React").createElement(b("MessengerState.bs").jsComponent,{fbid:this.props.pageID},function(a){return b("React").createElement(b("PagesManagerListDetailLayout.react"),{detailSection:this.$6(),listClassName:b("joinClasses")("_10uf","_1-9p"),listSection:this.$5(b("MessengerState.bs").readReceiptsPerThread(a)),navigationSection:this.$4(),ref:"body"})}.bind(this))))};e.exports=a}),null);