if (self.CavalryLogger) { CavalryLogger.start_js(["GefKK"]); }

__d("ArtilleryLoggerType",[],(function(a,b,c,d,e,f){e.exports=Object.freeze({PRELIMINARY_UPLOAD:"preliminary",FULL_UPLOAD:"full_upload"})}),null);
__d("ExpiringLockable",["EventEmitter","clearTimeout","setTimeoutAcrossTransitions"],(function(a,b,c,d,e,f){"use strict";__p&&__p();var g;c=babelHelpers.inherits(a,b("EventEmitter"));g=c&&c.prototype;function a(){var a,b;for(var c=arguments.length,d=new Array(c),e=0;e<c;e++)d[e]=arguments[e];return b=(a=g.constructor).call.apply(a,[this].concat(d)),this.$ExpiringLockable1=0,b}a.prototype.addUnlockListener=function(a,b){this.once("unlock",a,b)};a.prototype.$ExpiringLockable2=function(){this.$ExpiringLockable1+=1;var a=!1;return function(){if(a)return;a=!0;this.$ExpiringLockable1-=1;this.$ExpiringLockable1===0&&this.emit("unlock")}.bind(this)};a.prototype.getLock=function(){return{unlock:this.$ExpiringLockable2()}};a.prototype.getLockWithTimeout=function(a){var c=this.$ExpiringLockable2(),d,e=function(){d!=null&&(b("clearTimeout")(d),d=null),c()};d=b("setTimeoutAcrossTransitions")(function(){return e()},a);return{unlock:e}};a.prototype.destroy=function(){this.removeAllListeners("unlock")};e.exports=a}),null);
__d("ArtilleryProfilingHandleManager",["ExpiringLockable"],(function(a,b,c,d,e,f){"use strict";var g=new(b("ExpiringLockable"))();a={reset:function(){g.destroy(),g=new(b("ExpiringLockable"))()},subscribeToAllHandlesClosed:function(a){g.addUnlockListener(a)},getProfilingHandle:function(a,b){b===void 0&&(b=6e4);a=g.getLockWithTimeout(b);return{finish:a.unlock}}};e.exports=a}),null);
__d("ArtillerySWDataCollector",["Promise","ArtillerySWConfig","ClientServiceWorkerMessage","ServiceWorkerRegistration","pageLoadedViaSWCache","setTimeoutAcrossTransitions"],(function(a,b,c,d,e,f){__p&&__p();var g=5e3,h=null;function i(a){__p&&__p();var c=!1,d=new(b("ClientServiceWorkerMessage"))("asw-pageTraceDataRequest",{fullSWEFLog:b("ArtillerySWConfig").shouldLogEFRsrcs},function(b){__p&&__p();b=b.data;var d=b.command;b=b.data;if(c)return;c=!0;if(d==="trace"&&b.workerPerf){var e;b.workerPerf.annotations.stringProps&&b.workerPerf.annotations.stringProps.fullCacheHitData&&(e=b.workerPerf.annotations.stringProps.fullCacheHitData,delete b.workerPerf.annotations.stringProps.fullCacheHitData);a({workerPerf:b.workerPerf,fullCacheHitData:e});return}});d.sendViaController()}a={collect:function(){__p&&__p();if(h!==null)return h;h=new(b("Promise"))(function(a,c){b("pageLoadedViaSWCache")()||b("ServiceWorkerRegistration").isAWorkerActivated().then(function(c){if(c)b("setTimeoutAcrossTransitions")(function(){a()},g);else{a();return}})["catch"](a),i(a)});return h}};e.exports=a}),null);
__d("BrowserProfiler",[],(function(a,b,c,d,e,f){a={isEnabled:function(){return this.isAvailable()},isAvailable:function(){return!!window.facebookLowLevelProfiler},getProfile:function(a){window.facebookLowLevelProfiler.getData(function(b){a(b)})},notifyTracePosted:function(a,b){window.facebookLowLevelProfiler.notifyTracePosted(a,b)}};e.exports=a}),null);
__d("sourceMetaToString",[],(function(a,b,c,d,e,f){function a(a,b){var c;a.name?(c=a.name,a.module&&(c=a.module+"."+c)):a.module&&(c=a.module+".<anonymous>");b&&a.line&&(c=(c?c:"<anonymous>")+":"+a.line,a.column&&(c+=":"+a.column));return c}e.exports=a}),null);
__d("TimeSliceHelper",["LogBuffer","ProfilingCounters","ProfilingCountersStore","sourceMetaToString"],(function(a,b,c,d,e,f){__p&&__p();var g=function(a,b){return Math.round((a-b)*1e3)},h={counterFunction:function(a){return b("ProfilingCountersStore").getNestedTotals(a)}};function i(a,c,d,e){__p&&__p();c=c.counterFunction;if(d.guard){var f=b("sourceMetaToString")(d),g=d.guard.toString();f=f?g+" at "+f:g}else f=d.desc;g=e!=null?c(e):null;c={begin:d.begin,end:d.end,name:f,id:d.id,counters:g,isEdgeContinuation:d.isEdgeContinuation};d.parentID&&d.parentID!==d.id&&(c.parentID=d.parentID);a.push(c)}function j(a,c,d){c=c.counterFunction;c={begin:d.begin,end:d.end,name:"JS["+d.count+"]",counters:c(b("ProfilingCounters").wrapInSingleContext(d.contextsToBeMerged))};a.push(c)}function k(a,b){var c=b.indirectParentID,d=b.id;b=b.isEdgeContinuation;if(c!=null){var e=a.get(c);b=b;e!=null?e={indirectParentID:e.indirectParentID,isEdgeContinuation:b&&e.isEdgeContinuation}:e={indirectParentID:c,isEdgeContinuation:b};a.set(d,e)}}function l(a,b){var c=b.indirectParentID,d=b.isEdgeContinuation,e=b.id;if(c!=null&&c!==e){e=a.get(c);e!=null&&(c=e.indirectParentID,d=e.isEdgeContinuation&&d);return babelHelpers["extends"]({},b,{parentID:c,isEdgeContinuation:d})}return b}a={formatMetricsForTransport:function(a){__p&&__p();var b=[],c=[],d=[],e=new Map(),f=new Map(),h=0,i=function(a,b,c){var d;b.has(a)?d=b.get(a):(d=c.length,b.set(a,d),c.push(a));return d},j=[];a!=null&&a.forEach(function(a){__p&&__p();var k=a.begin,l=a.end,m=a.name,n=a.id,o=a.counters,p=a.parentID;a=a.isEdgeContinuation;var q=g(k,h);k=g(l,k);h=l;l=i(m,e,b);m=[q,k,l];var r=o||{};q=Object.keys(r).filter(function(a){return r[a]!==0}).sort();if(q.length>0){k=q.join();l=i(k,f,d);o=q.map(function(a){return r[a]});o.unshift(l)}else o=[];n&&m.push(n);p&&(m.push(p),m.push(a));j.push(m);c.push(o)});return{version:"compact",items:j,names:b,counters:c,counterSchemas:d}},getMetrics:function(a,b,c,d,e,f,g){var h=function(a,b){var e=b.end-b.begin<c;b=a&&b.begin-a.end<d&&e;return{shouldMergeIntoCurrentMerge:b,shouldFlushCurrentThenNewMerge:e}};return this.getCustomMergeMetrics(a,b,h,e,f,g)},getCustomMergeMetrics:function(a,c,d,e,f,g){__p&&__p();g==null?g=h:g=babelHelpers["extends"]({},h,g);var m=function(a){a=a.id;return a&&f[a]?f[a]:null},n=[],o=i.bind(undefined,n,g),p=j.bind(undefined,n,g);g=b("LogBuffer").read("time_slice_heartbeat");if(e.length>0){var q=Math.max.apply(null,e.map(function(a){return a.id}));g.forEach(function(a){return a.id+=q})}e=e.concat(g);var r;g=new Map();var s=k.bind(undefined,g),t=l.bind(undefined,g),u=function(){r&&(r.count>1?p(r):o(t(r.first),m(r.first))),r=null};g=e.sort(function(a,b){if(a.begin!==b.begin)return a.begin-b.begin;else if(a.end!==b.end)return a.end-b.end;else return 0}).filter(function(b){return(a==null||b.end>=a)&&(c==null||b.begin<=c)});if(g.length>0&&!g[0].representsExecution&&g[0].begin<a){e=g[0];g[0]=babelHelpers["extends"]({},e,{begin:a})}g.forEach(function(a){__p&&__p();var b=d(r,a),c=b.shouldMergeIntoCurrentMerge;b=b.shouldFlushCurrentThenNewMerge;var e=m(a);if(r&&c)r.end=a.end,r.count++,e&&r.contextsToBeMerged.push(e),r.count===2&&s(r.first),s(a);else if(b){u();c=[];e&&c.push(e);r={begin:a.begin,end:a.end,count:1,first:a,contextsToBeMerged:c}}else b||(u(),o(t(a),e))});u();return n}};e.exports=a}),null);
__d("getFirstPaint",["performance"],(function(a,b,c,d,e,f){"use strict";__p&&__p();function a(){var a;if(b("performance")&&b("performance").timing)if(window.chrome&&window.chrome.loadTimes){var c=window.chrome.loadTimes();a=parseInt(c.firstPaintTime*1e3,10)}else typeof b("performance").timing.msFirstPaint==="number"&&(a=b("performance").timing.msFirstPaint);return a||null}e.exports=a}),null);
__d("ArtilleryLogger",["Arbiter","ArtilleryExperiments","ArtilleryLoggerType","ArtilleryOnUntilOffLogging","ArtilleryProfilingHandleManager","ArtilleryRequestDataCollection","ArtillerySWDataCollector","Banzai","BigPipe","BigPipeExperiments","BrowserProfiler","ImageTimingHelper","NavigationMetrics","NavigationTimingHelper","PageletEventsHelper","ProfilingCountersStore","ResourceTimingBootloaderHelper","SnappyCompressUtil","TimeSliceHelper","TimeSliceInteraction","forEachObject","getFirstPaint","gkx","pageLoadedViaSWCache","performance","performanceAbsoluteNow","promiseDone","requireWeak"],(function(a,b,c,d,e,f){__p&&__p();var g;b("requireWeak")("AsyncProfiler",function(a){g=a});var h=b("BigPipeExperiments").link_images_to_pagelets,i=b("gkx")("AT48NnSHJjZiLaUYpB5-u0zwABDTXL4U_SCBY10OTJcI9RYdTYXvFVHVTckzfN9HmAmOHSkI5MJ9bmeDQBA0RiXTdX8DCgwaWsb1y9vNYucSiQ")&&b("ArtilleryExperiments").artillery_profiler_on,j=b("gkx")("AT5ao5o7IMukKdJlgVUFvT7QDKnTnili3yeyZi3nGO6HblfU_-ETf5GAL7wdSPb3FPH7CMSqEmpv7GVwvSaHneTnnosskuCcQ8BfBgHafS3ZAw")&&b("ArtilleryExperiments").artillery_profiler_on,k=b("gkx")("AT6fuVL0KGRBbzfQIyKVwSPOIhGI-l4WAfUAcly0NxRidFEWNTW7Oldf7YxJvR2qFjZPCAEusAc9Ee8hmGCf4HOZ")&&b("ArtilleryExperiments").artillery_profiler_on,l=b("ArtilleryExperiments").artillery_merge_max_distance_sec,m=b("ArtilleryExperiments").artillery_merge_max_duration_sec,n="generation_time",o="__user_annotations",p="serviceworker",q="first_paint",r="sampler_profile",s="user_timing_profile",t="artillery_logger_data",u="artillery_browser_perf_data",v=new Map(),w=new Map(),x=!1,y=new Map(),z=new Map(),A,B=null;function C(){return b("performance")&&b("performance").timing&&b("performance").timing.navigationStart}function D(a){v.has(a)||v.set(a,{})}function E(a){a.subscribe(b("BigPipe").Events.tti,function(a,c){a=c.ts;var d=c.lid;c=c.metrics;D(d);var e=v.get(d);e.t_bigpipe_tti=a;b("forEachObject")(c,function(a,b){e[b]=a})})}function F(a){a.subscribe(b("BigPipe").Events.displayed,function(a,c){a=c.ts;var d=c.lid;D(d);v.get(d).t_marker_all_pagelets_displayed=a;b("promiseDone")(b("ArtillerySWDataCollector").collect(),function(a){a&&z.set(d,a)})})}function G(a){a.subscribe(b("BigPipe").Events.loaded,function(a,b){a=b.ts;b=b.lid;D(b);v.get(b).t_marker_bigpipe_e2e=a})}function H(a,c){if(!a)return;if(c.profile){var d=b("SnappyCompressUtil").compressStringToSnappy(c.profile);d!==null&&(c.profile=d,c.snappy=!0)}d={clientData:a,browserPerfData:c,traceType:"pageload"};b("Banzai").post(u,d,b("Banzai").VITAL);b("BrowserProfiler").notifyTracePosted(d.clientData.traceID,d.traceType)}function I(a,c,d){var e=d;if(b("BrowserProfiler").isEnabled()&&w.has(e)){var f=w.get(e);window.requestIdleCallback(function(){b("BrowserProfiler").getProfile(function(a){H(f,a)})})}J(a,c,d)}function J(a,c,d){__p&&__p();var e=b("performanceAbsoluteNow")(),f=d,k=v.get(f),r=w.get(f);if(!r||!k)return;k.uploadType=b("ArtilleryLoggerType").FULL_UPLOAD;S(k);T(k,f);N();var t=b("performanceAbsoluteNow")(),u=null;switch(a){case"normal":u=0;k.navigation_timing=b("NavigationTimingHelper").getNavTimings();break;case"quickling":case"ajax":if(b("performance").getEntriesByName){var x=b("performance").getEntriesByName(c);k.navigation_timing=b("NavigationTimingHelper").getAsyncRequestTimings(c);x.length&&(u=x[0].startTime)}break}c=K(a,d);x=c.sampleRecorder;d=c.profilingCountersData;var A=c.userTimingProfilerData;c=c.timeSliceData;if(u!=null&&C()){u=u+b("performance").timing.navigationStart;k.resource_timing_bootloader=b("ResourceTimingBootloaderHelper").getMetrics(u,h,f,null,!0).data;c=b("TimeSliceHelper").getMetrics(u,k.t_onload,m,l,c,b("ProfilingCountersStore").toMap(d));j?k.time_slice=b("TimeSliceHelper").formatMetricsForTransport(c):k.time_slice=c;k.extra_points=b("TimeSliceInteraction").getPageLoadPoints(u,t);k.interaction_ids=b("TimeSliceInteraction").getInteractionIDsBetween(u,t)}k.pagelet_events=b("PageletEventsHelper").getMetrics(f);!i&&k.pagelet_events&&(k.pagelet_events.display_resources&&delete k.pagelet_events.display_resources,k.pagelet_events.all_resources&&delete k.pagelet_events.all_resources);k.t_pagelet_start_early_resources&&k.t_pagelet_cssload_early_resources&&k.pagelet_events&&k.pagelet_events.pagelets&&(k.pagelet_events.pagelets.early_resources={css:k.t_pagelet_start_early_resources,css_load:k.t_pagelet_cssload_early_resources});V(f);U(k,f);var B=babelHelpers["extends"]({},k,r.data,{policies:Array.from(r.policies)});d=z.get(f);a==="normal"&&d!=null&&(B[p]=d.workerPerf);a==="normal"&&(B[q]=b("getFirstPaint")());y.size&&(B[o]={},y.forEach(function(a,b){B[o][b]=a}));w["delete"](f);v["delete"](f);A&&C()&&(B[s]=A);B[n]=b("performanceAbsoluteNow")()-e;c=g!=null&&x!=null?g.stopRecording(x):null;c!=null?c.then(function(a){return L(B,a)},function(a){throw a}):L(B)}function K(a,c){switch(a){case"normal":case"quickling":return b("ArtilleryOnUntilOffLogging").finish();case"ajax":return b("ArtilleryRequestDataCollection").finish(c)}return{sampleRecorder:null,profilingCountersData:[],userTimingProfilerData:null,timeSliceData:[]}}function L(a,c){c!=null&&(a[r]=c);c=b("performanceAbsoluteNow")();M(a);a[n]+=b("performanceAbsoluteNow")()-c;b("Banzai").post(t,a,b("Banzai").VITAL)}function M(a){__p&&__p();var c={};if(k){var d=["resource_timing_bootloader","pagelet_events"];d.forEach(function(d){var e=a[d];if(e==null)return;e=JSON.stringify(e);e=b("SnappyCompressUtil").compressStringToSnappy(e);e!==null&&(c[d]=e,delete a[d])})}d=[s];d.forEach(function(d){var e=a[d];if(e==null)return;e=b("SnappyCompressUtil").compressUint8ArrayToSnappy(a[d]);e!==null&&(c[d]=e,delete a[d])});Array.from(Object.keys(c)).length>0&&(a.miny=c)}function N(){var a=navigator&&navigator.hardwareConcurrency;W.recordUserAnnotation("num_cores",a!=null?a.toString():"unknown");navigator&&navigator.deviceMemory&&typeof navigator.deviceMemory==="number"&&W.recordUserAnnotation("ram_gb",navigator.deviceMemory.toString());navigator&&navigator.connection&&(typeof navigator.connection.downlink==="number"&&W.recordUserAnnotation("browser_downlink_megabits",navigator.connection.downlink.toString()),typeof navigator.connection.rtt==="number"&&W.recordUserAnnotation("browser_rtt_ms",navigator.connection.rtt.toString()),typeof navigator.connection.effectiveType==="string"&&W.recordUserAnnotation("browser_effective_connection_type",navigator.connection.effectiveType));W.recordUserAnnotation("client_pixel_ratio_10x",((window.devicePixelRatio||1)*10).toString());W.recordUserAnnotation("is_sw_page_loaded_via_cache",b("pageLoadedViaSWCache")()?"1":"0");b("performance")&&b("performance").navigation&&W.recordUserAnnotation("nav_type",O(b("performance").navigation.type))}function O(a){switch(a){case 0:return"TYPE_NAVIGATE";case 1:return"TYPE_RELOAD";case 2:return"TYPE_BACK_FORWARD";case 255:return"TYPE_RESERVED";default:return"unknown navigation type"}}function P(){if(B==null)return;var a=B,b=a.pageType,c=a.pageURI;a=a.serverLID;I(b,c,a)}function Q(a){a=a.serverLID;return w.has(a)&&v.has(a)}function R(){var a=function(a,b){Q(b)&&(B=b,A!=null&&(A.finish(),A=null))};b("NavigationMetrics").addRetroactiveListener(b("NavigationMetrics").Events.NAVIGATION_DONE,a)}function S(a){if(!B)return;!a.t_bigpipe_tti&&B.tti&&(a.t_bigpipe_tti=B.tti);!a.t_tti&&B.tti&&(a.t_tti=B.tti);!a.t_marker_bigpipe_e2e&&B.e2e&&(a.t_marker_bigpipe_e2e=B.e2e);!a.t_onload&&B.e2e&&(a.t_onload=B.e2e)}function T(a,b){if(window.CavalryLogger){var c=window.CavalryLogger.getInstance(b);b=["t_domcontent","t_pagelet_start_early_resources","t_pagelet_cssload_early_resources","t_tti","t_onload"];b.forEach(function(b){Object.prototype.hasOwnProperty.call(c.values,b)&&(a[b]=c.values[b])})}}function U(a,c){if(window.CavalryLogger){c=window.CavalryLogger.getInstance(c);b("ResourceTimingBootloaderHelper").mergeBootloaderMetricsAndResourceTimings(a.resource_timing_bootloader,c.bootloader_metrics,!0)}}function V(a){__p&&__p();var c=v.get(a);if(C()){var d=b("performance").timing.navigationStart,e=c.t_bigpipe_tti,f=c.t_marker_bigpipe_e2e;a=b("ImageTimingHelper").getImageTimings(a);e=b("ResourceTimingBootloaderHelper").getLastTTIAndE2EImageResponseEnds(e,f,a);f=e.TTI;a=e.E2E;!isNaN(f)&&f!==d&&(c.t_tti_with_images=f);!isNaN(a)&&a!==d&&(c.t_marker_bigpipe_e2e_with_images=a)}}var W={enableProfilingWithClientData:function(a,c,d,e){__p&&__p();D(a);w.set(a,{traceID:c,data:d,policies:e});A!=null&&(b("ArtilleryProfilingHandleManager").reset(),A=null);A=b("ArtilleryProfilingHandleManager").getProfilingHandle(b("NavigationMetrics").Events.NAVIGATION_DONE,300*1e3);b("ArtilleryProfilingHandleManager").subscribeToAllHandlesClosed(P);if(x)return;x=!0;b("PageletEventsHelper").init();b("Arbiter").subscribe(b("BigPipe").Events.init,function(a,b){a=b.arbiter;a&&(E(a),F(a),G(a))});R()},recordUserAnnotation:function(a,b,c){c===void 0&&(c=!0);if(!c&&y.has(a))return!1;y.set(a,b);return!0}};e.exports=W}),null);