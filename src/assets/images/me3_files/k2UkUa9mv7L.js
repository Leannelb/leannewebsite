if (self.CavalryLogger) { CavalryLogger.start_js(["B3lC8"]); }

__d("FBKeyframesLoggedSession",["BanzaiLogger","CurrentUser","FacebookAppIDs","FunnelLogger","KeyframesEnvironment","KeyframesPerformanceLog","KeyframesPluginsLoader","KeyframesVersion","KeyframesWebConfig","once","performanceNow","uuid"],(function(a,b,c,d,e,f){"use strict";__p&&__p();a=!1;var g="KEYFRAMES_FUNNEL",h="KeyframesFramePerfLoggerConfig",i=2,j=9e18,k={appid:b("FacebookAppIDs").WWW,appversion:null,connection_class:b("KeyframesWebConfig").connectionClass,country:null,deviceid:null,extras:null,isemployee:b("CurrentUser").isEmployee()?1:0,name:"keyframes_frame_perf_report",vc:null,year_class:null};function l(a){return parseInt(a.match(/[a-f0-9]+$/gi),16)}function m(){var a=b("performanceNow")();return function(){return Math.floor(b("performanceNow")()-a)}}function n(){return{value:Date.now(),phase:b("KeyframesEnvironment").getCurrentWWWSitePhase()}}function o(a,c){__p&&__p();this.$2=!1,this.$3=0,this.$5=1,this.$6=!1,this.$13=b("KeyframesVersion").getCurrentVersion(),this.$17=function(a){this.$15("play_ended");this.$3++;if(this.$3===this.$5){a=Object.assign({},a,k,{animation_duration:String(a.animation_duration),asset_id:this.$7.assetID||null,asset_name:this.$7.assetID?null:this.$7.assetName,display_refresh_rate:String(a.display_refresh_rate),extras:'{"www_phase":"'+b("KeyframesEnvironment").getCurrentWWWSitePhase()+'"}',keyframes_version:this.$13,project_name:this.$7.projectName,session_id:this.$11});o.performanceLoggingMethod(a);this.$5<j&&(this.$5*=i)}}.bind(this),this.$18=function(event){switch(event){case"start":this.$15("play_started");return;case"pause":this.$15("play_ended");return}}.bind(this),this.$12=c||n(),this.$7=a,this.$11=b("uuid")(),this.$4=l(this.$11)}o.performanceLoggingMethod=function(a){b("BanzaiLogger").log(h,a)};o.prototype.startDecode=function(a){if(!this.$1){this.$14();this.$15("asset_decode_started",a);var c=m();this.$1=b("once")(function(a,b){this.$15("asset_decode_ended",a,{"time_since:asset_decode_started":c(),plugins_decoded:b||[]})}.bind(this))}return this.$1};o.prototype.error=function(a){this.$14(),this.$1?this.$16("asset_decode_failed",a):this.$16("asset_request_failed",a)};o.prototype.markAsPackage=function(){this.$6||(b("FunnelLogger").addFunnelTag(g,this.$4,"package"),this.$6=!0)};o.prototype.getUUID=function(){return this.$11};o.prototype.getInstanceID=function(){return this.$4};o.prototype.getPerformanceLogIfEnabled=function(){__p&&__p();if(b("KeyframesWebConfig").enableLogging){if(!this.$8){var a=this.$14(),c=new(b("KeyframesPerformanceLog"))(this.$17,this.$18);c.onNextFrame(function(){return this.$15("first_frame_rendered",n(),{"time_since:session_started":a()})}.bind(this));this.$8=c}return this.$8}return null};o.prototype.$14=function(){this.$10||(b("KeyframesWebConfig").enableLogging&&(b("FunnelLogger").startFunnelAtTime(g,this.$12.value,this.$4),this.$15("session_started",this.$12,{supported_plugins:Object.keys(b("KeyframesPluginsLoader").getSupportedPlugins())})),this.$10=m());return this.$10};o.prototype.$15=function(a,c,d){c=c||n(),b("KeyframesWebConfig").enableLogging&&(this.$2||b("FunnelLogger").appendActionAtTimeWithPayload(g,c.value,this.$4,a,Object.assign({},this.$19(),d,{www_phase:c.phase})))};o.prototype.$16=function(a,c){c=c||n(),b("KeyframesWebConfig").enableLogging&&(this.$2||(this.$15("session_failed",c,{fail_reason:a}),b("FunnelLogger").endFunnelAtTime(g,c.value,this.$4),this.$2=!0))};o.prototype.$19=function(){return{asset_id:this.$7.assetID||null,asset_name:this.$7.assetID?null:this.$7.assetName,asset_source:"network",keyframes_version:this.$13,project_name:this.$7.projectName,session_id:this.$11,www_phase:b("KeyframesEnvironment").getCurrentWWWSitePhase()}};e.exports=o}),null);